<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>A New World to Explore | FFXIV Library</title>
  <meta name="description" content="A New World to Explore — MSQ topic page with clear steps and embedded video. EN/JP/ZH switch." />
  <link rel="icon" href="../img/favicon.ico" />
  <link rel="stylesheet" href="../style.css" />
  <style>
    .topic-wrap{max-width:960px;margin:24px auto;padding:0 16px}
    .topic-head{display:flex;align-items:center;justify-content:space-between;gap:12px;margin:12px 0 8px}
    .topic-title{font-size:1.6rem;font-weight:800;letter-spacing:.3px;margin:0}
    .topic-meta{display:flex;flex-wrap:wrap;gap:8px;color:var(--muted,#888)}
    .kv{display:grid;grid-template-columns:160px 1fr;gap:6px 12px;margin:12px 0}
    .kv dt{font-weight:700;color:var(--muted,#777)}
    .kv dd{margin:0}
    .sect{margin:16px 0}
    .video-wrapper{position:relative;padding-bottom:56.25%;height:0;border-radius:10px;overflow:hidden;box-shadow:0 2px 10px rgba(0,0,0,.12)}
    .video-wrapper iframe{position:absolute;inset:0;width:100%;height:100%;border:0}
    [data-theme="dark"] .kv dt{color:#bbb}
    [data-theme="dark"] .topic-wrap{color:#eaeaea}
    .wiki-links{display:flex;gap:8px;flex-wrap:wrap}
  </style>
</head>
<body>
  <!-- Header（沿用你的設計） -->
  <header class="site-header">
    <nav class="container nav">
      <a class="brand" href="../#top" aria-label="Home">Final Fantasy XIV Library</a>
      <div class="nav-right">
        <button id="themeToggle" class="icon-btn" aria-label="切換主題">🌙</button>
        <button id="langToggle" class="icon-btn" aria-label="切換語言">🌐 EN</button>
        <a class="icon-btn" href="https://www.youtube.com/@BELAUG" target="_blank" rel="noopener" aria-label="YouTube">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
               viewBox="0 0 24 24" class="yt-icon"><path
               d="M23.5 6.2s-.2-1.7-.8-2.5c-.8-.9-1.7-.9-2.1-1-3-.2-7.6-.2-7.6-.2h-.1s-4.6 0-7.6.2c-.4 0-1.3 0-2.1 1-.6.8-.8 2.5-.8 2.5S2 8.1 2 10v1.9c0 1.9.2 3.8.2 3.8s.2 1.7.8 2.5c.8.9 1.9.9 2.4 1 1.7.2 7.2.2 7.2.2s4.6 0 7.6-.2c.4 0 1.3 0 2.1-1 .6-.8.8-2.5.8-2.5s.2-1.9.2-3.8V10c0-1.9-.2-3.8-.2-3.8zM9.8 13.6V8.4l5.9 2.6-5.9 2.6z"/></svg>
        </a>
      </div>
    </nav>
  </header>

  <main class="topic-wrap" id="scope">
    <!-- 標題（會由 JS 注入三語） -->
    <div class="topic-head">
      <h1 class="topic-title" id="title">A New World to Explore</h1>
    </div>

    <!-- Meta 標籤（不翻譯的代碼可直接保留） -->
    <div class="topic-meta">
      <span class="badge">MSQ</span>
      <span class="badge">DT</span>
      <span class="badge">Patch 7.0</span>
    </div>

    <!-- 影片 -->
    <section class="sect">
      <div class="video-wrapper">
        <!-- ⭐ 換成你的影片 ID -->
        <iframe id="yt"
          src="https://www.youtube.com/embed/HMf2Ldtb36Y"
          title="A New World to Explore"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          allowfullscreen></iframe>
      </div>
    </section>

    <!-- 關鍵資訊（表格式） -->
    <section class="sect">
      <dl class="kv" id="facts">
        <!-- 由 JS 依語言填入 -->
      </dl>
    </section>

    <!-- 內容區（Overview / Steps / Rewards） -->
    <section class="sect" id="content">
      <!-- 由 JS 依語言填入 -->
    </section>

    <!-- 對應 wiki 連結（依語言顯示對應語系） -->
    <section class="sect">
      <div class="wiki-links" id="wikis"></div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container foot">
      <small>© <span id="year"></span> BELAUG · FFXIV Library</small>
      <a href="#top" class="backtop" aria-label="Back to top">↑</a>
    </div>
  </footer>

  <!-- 輕量 JS：主題切換 + 三語資料 + 注入 -->
  <script>
    // ====== 年份 ======
    document.getElementById('year').textContent = new Date().getFullYear();

    // ====== 主題切換（和首頁一致） ======
    const THEME_KEY = 'ffxiv-lib-theme';
    const themeToggle = document.getElementById('themeToggle');
    function applyTheme(mode){
      if(mode === 'dark'){
        document.documentElement.setAttribute('data-theme','dark');
        themeToggle.textContent = '☀️';
      }else{
        document.documentElement.removeAttribute('data-theme');
        themeToggle.textContent = '🌙';
      }
    }
    applyTheme(localStorage.getItem(THEME_KEY) || 'light');
    themeToggle?.addEventListener('click', ()=>{
      const cur = localStorage.getItem(THEME_KEY) || 'light';
      const next = cur === 'dark' ? 'light' : 'dark';
      localStorage.setItem(THEME_KEY, next);
      applyTheme(next);
    });

    // ====== 三語資料（這裡填一次，切換就會換） ======
    // ⭐ 只要改下面這個 data 物件，不用改 HTML 結構
    const data = {
      ytId: "HMf2Ldtb36Y", // 換成你的影片 ID
      title: {
        EN: "A New World to Explore",
        JP: "新たな世界へ",
        ZH: "新的世界在前方"
      },
      wiki: {
        EN: "https://ffxiv.consolegameswiki.com/wiki/A_New_World_to_Explore",
        JP: "", // 若有日文對應，填入
        ZH: ""  // 若有中文對應，填入
      },
      facts: {
        EN: [
          ["Type", "Main Scenario Quest"],
          ["Expansion", "Dawntrail (DT)"],
          ["Start NPC", "(Fill here)"],
          ["Location", "(Fill here)"],
          ["Requirements", "(Fill here)"]
        ],
        JP: [
          ["種類", "メインストーリー"],
          ["拡張", "黄金のレガシー（DT）"],
          ["開始NPC", "（入力）"],
          ["場所", "（入力）"],
          ["前提条件", "（入力）"]
        ],
        ZH: [
          ["類型", "主線任務"],
          ["資料片", "黃金的遺產（DT）"],
          ["起始 NPC", "（填寫）"],
          ["地點", "（填寫）"],
          ["前置條件", "（填寫）"]
        ]
      },
      content: {
        EN: {
          overviewTitle: "Overview",
          overviewHtml: `
            <p>Write a concise summary: objective, where to go, who to talk to, and tips.</p>
          `,
          stepsTitle: "Steps",
          stepsHtml: `
            <ol>
              <li>Talk to … at …</li>
              <li>Travel to … and interact …</li>
              <li>After the cutscene, report back to …</li>
            </ol>
          `,
          rewardsTitle: "Rewards",
          rewardsHtml: `<p>(Fill here)</p>`
        },
        JP: {
          overviewTitle: "概要",
          overviewHtml: `
            <p>目的、行き先、会話相手、注意点などを簡潔に。</p>
          `,
          stepsTitle: "手順",
          stepsHtml: `
            <ol>
              <li>……にいる……と話す</li>
              <li>……へ移動し、……を調べる</li>
              <li>カットシーン後、……へ報告</li>
            </ol>
          `,
          rewardsTitle: "報酬",
          rewardsHtml: `<p>（入力）</p>`
        },
        ZH: {
          overviewTitle: "概述",
          overviewHtml: `
            <p>簡單寫清楚目標、路線、對話對象與注意事項。</p>
          `,
          stepsTitle: "步驟",
          stepsHtml: `
            <ol>
              <li>前往……與……對話</li>
              <li>移動到……並互動……</li>
              <li>播片後回到……回報</li>
            </ol>
          `,
          rewardsTitle: "獎勵",
          rewardsHtml: `<p>（填寫）</p>`
        }
      }
    };

    // ====== 語言切換 ======
    const LANG_KEY = 'ffxiv-lib-lang';
    const langToggle = document.getElementById('langToggle');
    function getLang(){ return localStorage.getItem(LANG_KEY) || 'EN'; }
    function setLang(v){ localStorage.setItem(LANG_KEY, v); }

    // ====== 將資料注入頁面 ======
    const $ = (sel)=>document.querySelector(sel);
    function render(lang){
      // 1) 標題
      $('#title').textContent = data.title[lang] || data.title.EN || '';

      // 2) 影片（若你想不同語言對應不同影片，也可在這裡切）
      const yt = $('#yt');
      if (yt && data.ytId) {
        yt.src = `https://www.youtube.com/embed/${data.ytId}`;
        yt.title = data.title[lang] || 'Video';
      }

      // 3) Facts（kv 表）
      const facts = data.facts[lang] || data.facts.EN || [];
      const factsDl = $('#facts');
      factsDl.innerHTML = facts.map(([k,v]) => `<dt>${k}</dt><dd>${v}</dd>`).join('');

      // 4) 內容（Overview/Steps/Rewards）
      const c = data.content[lang] || data.content.EN;
      $('#content').innerHTML = `
        <h3>${c.overviewTitle}</h3>
        ${c.overviewHtml}
        <h3>${c.stepsTitle}</h3>
        ${c.stepsHtml}
        <h3>${c.rewardsTitle}</h3>
        ${c.rewardsHtml}
      `;

      // 5) Wiki 連結
      const w = data.wiki || {};
      const wBox = $('#wikis');
      const links = [];
      if (w.EN) links.push(`<a class="btn ghost" href="${w.EN}" target="_blank" rel="noopener">EN Wiki</a>`);
      if (w.JP) links.push(`<a class="btn ghost" href="${w.JP}" target="_blank" rel="noopener">JP Wiki</a>`);
      if (w.ZH) links.push(`<a class="btn ghost" href="${w.ZH}" target="_blank" rel="noopener">ZH Wiki</a>`);
      wBox.innerHTML = links.join('') || '<small style="color:var(--muted,#888)">No wiki links</small>';

      // 6) 語言按鈕顯示
      langToggle.textContent = `🌐 ${lang}`;
    }

    // 初始化
    const bootLang = getLang();
    render(bootLang);

    // 點擊循環 EN → JP → ZH → EN
    langToggle?.addEventListener('click', ()=>{
      const cur = getLang();
      const next = cur === 'EN' ? 'JP' : (cur === 'JP' ? 'ZH' : 'EN');
      setLang(next);
      render(next);
    });
  </script>
</body>
</html>
