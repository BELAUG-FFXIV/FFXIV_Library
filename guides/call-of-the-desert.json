<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Call of the Desert | BELAUG · FFXIV Library</title>
  <meta name="description" content="ARR 2.0 MSQ — Call of the Desert（砂都的委託）：故事概要、取得方式與任務解鎖。">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root { --bg:#fff8e6; --card:#fff; --fg:#222; --muted:#666; --border:#e5e1d8; --accent:#e11d48; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif;background:var(--bg);color:var(--fg)}
    .container{max-width:1080px;margin:0 auto;padding:0 16px}
    .site-header{border-bottom:1px solid var(--border);background:#fff9edb3;backdrop-filter:saturate(120%) blur(6px);position:sticky;top:0;z-index:10}
    .nav{display:flex;align-items:center;justify-content:space-between;height:60px}
    .left{display:flex;align-items:center;gap:12px}
    .home{border:1px solid var(--border);background:#fff;padding:4px 8px;border-radius:8px;text-decoration:none;color:var(--fg);font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex;align-items:center;gap:8px}
    .icon-btn{background:none;border:1px solid transparent;cursor:pointer;font-size:14px;padding:6px 10px;border-radius:8px}
    .icon-btn:hover{background:#fff;border-color:var(--border)}
    .main{padding:20px 0 40px}
    .grid{display:grid;grid-template-columns:1.1fr 1fr;gap:20px;align-items:start}
    @media (max-width:900px){
      .grid{grid-template-columns:1fr}
      .video-wrap{position:relative;padding-top:56.25%}
      .video-wrap iframe{position:absolute;inset:0;width:100%;height:100%}
    }
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px;border-bottom:1px solid var(--border);font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%;height:420px;border:0;display:block;border-radius:16px}
    .tabs{display:flex;gap:8px;padding:12px 12px 0;flex-wrap:wrap}
    .tab-btn{background:#fff;border:1px solid var(--border);color:var(--fg);border-radius:999px;padding:8px 14px;cursor:pointer;font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent);color:#fff;background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex;flex-direction:column;gap:10px}
    .stack .row{padding:12px 14px;border:1px dashed var(--border);border-radius:12px;background:#fffdf6}
    .row b{display:inline-block;min-width:130px}
    .muted{color:var(--muted)}
    .link{color:#0b60d8;text-decoration:none}
    .link:hover{text-decoration:underline}
    .story-wrap{position:relative}
    .story-content{max-height:360px;overflow:hidden;position:relative}
    .story-content::after{content:"";position:absolute;inset:auto 0 0 0;height:64px;background:linear-gradient(to top,var(--card),transparent)}
    .story-expanded{max-height:none!important}
    .story-expanded::after{display:none}
    .expand-btn{margin-top:8px;background:none;border:1px solid var(--border);padding:6px 10px;border-radius:8px;cursor:pointer;font-weight:600}
    @media (max-width:600px){ .story-content{max-height:260px} }
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">🏠 Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="切換語言">🌐 EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <!-- 左：影片 -->
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/TScnhvENx4c"
              title="Call of the Desert" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- 右：標題 + Tabs -->
      <section class="card">
        <div class="hd" id="pageTitle">Call of the Desert</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true"  data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Acquisition</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlockq">Unlock Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="followq">Follow-Up Quest</button>
        </div>
        <div class="bd">
          <div id="panel-story"   class="tab-panel active"></div>
          <div id="panel-acq"     class="tab-panel"></div>
          <div id="panel-unlockq" class="tab-panel"></div>
          <div id="panel-followq" class="tab-panel"></div>
        </div>
      </section>
    </div>
  </main>

<script>
const LANG_KEY = 'ffxiv-guide-lang';
const i18n = {
  EN:{
    langLabel:'EN',
    pageTitle:'Call of the Desert',
    tabs:{ story:'Story', acq:'Acquisition', unlockq:'Unlock Quest', followq:'Follow-Up Quest' },
    story:`<div class="story-wrap"><div class="story-content">
<p>After proving your worth in Gridania, Mother Miounne entrusts you with a new mission beyond the Twelveswood. The request comes from Ul’dah’s Adventurers’ Guild, and she bids you seek out its mistress, Momodi of the Quicksand. With a knowing smile, she warns that trouble often follows such summons—but she has no doubt you will prevail.</p>
<p>Leaving the forests behind, you step into the heat and bustle of Ul’dah. At the Quicksand, Momodi greets you with surprise and delight. She had been informed to expect an adventurer, but never imagined it would be you—the one Miounne herself praised as “the adventurer of the moment.” Flattered but not distracted, she quickly turns the talk to business. A new task awaits, one certain to draw you into the heart of Ul’dah’s struggles.</p>
</div><button class="expand-btn" data-more="Read more" data-less="Show less">Read more</button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>Quest Giver</b> Mother Miounne <small class="muted">(New Gridania, X:11.7, Y:13.5)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="fire-in-the-gloom.html">Fire in the Gloom</a>｜<span class="muted">タムタラの仄暗い底で</span>｜<span class="muted">幽暗深處的火焰</span></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="#">Into a Copper Hell</a>｜<span class="muted">カッパーベルで消える夢</span>｜<span class="muted">踏入銅鈴煉獄</span></div>
    </div>`
  },
  JP:{
    langLabel:'JP',
    pageTitle:'砂都で待つ仕事',
    tabs:{ story:'ストーリー', acq:'入手方法', unlockq:'開放クエスト', followq:'後続クエスト' },
    story:`<div class="story-wrap"><div class="story-content">
<p>グリダニアでの働きを終えたあなたに、ミューヌは次なる任務を託す。それは森を越え、ウルダハの冒険者ギルドから届いた要請だった。砂都の酒場「クイックサンド」を仕切るモモディを訪ねるようにと告げ、彼女は「きっと危険な依頼になる」と苦笑する。だが同時に、「あなたならば必ずやり遂げる」と信頼を込めて送り出した。</p>
<p>砂塵舞う砂都に到着すると、活気に満ちたクイックサンドでモモディが迎えてくれる。驚きと喜びを隠さぬ彼女は、「ミューヌから最高の冒険者と聞いていたが、それがまさかあなたとは」と目を見張る。だが挨拶も束の間、彼女は声を落とし、真剣な面持ちで切り出す。ウルダハの地において、あなたを待ち受けるのは避けられぬ試練だった。</p>
</div><button class="expand-btn" data-more="続きを読む" data-less="折りたたむ">続きを読む</button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>クエスト発行</b> ミューヌ <small class="muted">（グリダニア：新市街, X:11.7, Y:13.5）</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="fire-in-the-gloom.html">タムタラの仄暗い底で</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="#">カッパーベルで消える夢</a></div>
    </div>`
  },
  ZH:{
    langLabel:'ZH',
    pageTitle:'砂都的委託',
    tabs:{ story:'故事概要', acq:'取得方式', unlockq:'解鎖任務', followq:'後續任務' },
    story:`<div class="story-wrap"><div class="story-content">
<p>在 Gridania 展現了實力後，Miounne 將你託付給另一段旅程。這次的請求來自 Ul’dah 的冒險者公會。她囑咐你去找 Quicksand 的經營者 Momodi，並半開玩笑半認真地提醒：「這趟多半會把你扯進麻煩裡頭。」但她的眼神裡滿是信任──她相信你一定能應對。</p>
<p>穿越森林，踏入沙漠國度，你來到熙攘的 Ul’dah。當你在 Quicksand 中現身時，Momodi 驚喜地笑了出來。她早就收到消息會有冒險者前來，卻沒想到竟是你──那位被 Miounne 盛讚為「當下最受矚目的冒險者」。讚美只是一瞬，Momodi 很快收斂笑容，鄭重地把話題拉回正題：在這片黃沙之地，新的試煉正等著你。</p>
</div><button class="expand-btn" data-more="展開全文" data-less="收合內文">展開全文</button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>任務發布</b> 妙恩 <small class="muted">（新格里達尼亞, X:11.7, Y:13.5）</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="fire-in-the-gloom.html">幽暗深處的火焰</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="#">踏入銅鈴煉獄</a></div>
    </div>`
  }
};

const langToggle  = document.getElementById('langToggle');
const pageTitle   = document.getElementById('pageTitle');
const tabBtns     = [...document.querySelectorAll('.tab-btn')];
const panels = {
  story:  document.getElementById('panel-story'),
  acq:    document.getElementById('panel-acq'),
  unlockq:document.getElementById('panel-unlockq'),
  followq:document.getElementById('panel-followq')
};

function getLang(){ return localStorage.getItem(LANG_KEY) || 'EN'; }

function wireStoryToggler(root){
  const btn = root.querySelector('.expand-btn');
  const content = root.querySelector('.story-content');
  if(!btn || !content) return;
  const more = btn.getAttribute('data-more'), less = btn.getAttribute('data-less');
  btn.onclick = ()=>{
    const expanded = content.classList.toggle('story-expanded');
    btn.textContent = expanded ? less : more;
  };
}

function renderPanel(key, lang){
  const t = i18n[lang] || i18n.EN;
  Object.keys(panels).forEach(k => panels[k].classList.remove('active'));
  panels[key].classList.add('active');
  panels[key].innerHTML = t[key];
  if(key==='story'){ wireStoryToggler(panels[key]); }
}

function applyLang(lang){
  const t = i18n[lang] || i18n.EN;
  pageTitle.textContent = t.pageTitle;
  langToggle.textContent = `🌐 ${t.langLabel}`;
  tabBtns.forEach(btn => { btn.textContent = t.tabs[btn.dataset.tab]; });
  const activeBtn = tabBtns.find(b => b.getAttribute('aria-selected')==='true') || tabBtns[0];
  renderPanel(activeBtn.dataset.tab, lang);
}

tabBtns.forEach(btn=>{
  btn.addEventListener('click', ()=>{
    tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
    btn.setAttribute('aria-selected','true');
    renderPanel(btn.dataset.tab, getLang());
  });
});

langToggle.addEventListener('click', ()=>{
  const cur = getLang();
  const next = cur==='EN' ? 'JP' : (cur==='JP' ? 'ZH' : 'EN');
  localStorage.setItem(LANG_KEY, next);
  applyLang(next);
});

applyLang(getLang());
</script>
</body>
</html>
