<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Rock of Rancor | BELAUG Â· FFXIV Library</title>
  <meta name="description" content="MSQ â€“ Rock of Rancor (ARR Patch 2.0)">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root { --bg:#fff8e6; --card:#fff; --fg:#222; --muted:#666; --border:#e5e1d8; --accent:#e11d48; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif;background:var(--bg);color:var(--fg)}
    .container{max-width:1080px;margin:0 auto;padding:0 16px}
    .site-header{border-bottom:1px solid var(--border);background:#fff9edb3;backdrop-filter:saturate(120%) blur(6px);position:sticky;top:0;z-index:10}
    .nav{display:flex;align-items:center;justify-content:space-between;height:60px}
    .left{display:flex;align-items:center;gap:12px}
    .home{border:1px solid var(--border);background:#fff;padding:4px 8px;border-radius:8px;text-decoration:none;color:var(--fg);font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex;align-items:center;gap:8px}
    .icon-btn{background:none;border:none;cursor:pointer;font-size:14px;padding:6px 10px;border-radius:8px}
    .icon-btn:hover{background:#fff;border:1px solid var(--border)}
    .main{padding:20px 0 40px}
    .grid{display:grid;grid-template-columns:1.1fr 1fr;gap:20px;align-items:start}
    @media (max-width:900px){
      .grid{grid-template-columns:1fr}
      .video-wrap{position:relative;padding-top:56.25%}
      .video-wrap iframe{position:absolute;inset:0;width:100%;height:100%}
    }
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px;border-bottom:1px solid var(--border);font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%;height:420px;border:0;display:block;border-radius:16px}
    .tabs{display:flex;gap:8px;padding:12px 12px 0;flex-wrap:wrap}
    .tab-btn{background:#fff;border:1px solid var(--border);color:var(--fg);border-radius:999px;padding:8px 14px;cursor:pointer;font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent);color:#fff;background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex;flex-direction:column;gap:10px}
    .stack .row{padding:12px 14px;border:1px dashed var(--border);border-radius:12px;background:#fffdf6}
    .row b{display:inline-block;min-width:130px}
    .muted{color:var(--muted)}
    .link{color:#0b60d8;text-decoration:none}
    .link:hover{text-decoration:underline}
    /* å±•é–‹/æ”¶åˆ */
    .clamp{position:relative; max-height:360px; overflow:hidden}
    .clamp[data-collapsed="false"]{max-height:none}
    .clamp[data-collapsed="true"]::after{
      content:""; position:absolute; left:0; right:0; bottom:0; height:72px;
      background:linear-gradient(to bottom, rgba(255,255,255,0), var(--card)); pointer-events:none;
    }
    .expand-wrap{ margin-top:12px; }
    .expand-btn{
      display:inline-block; padding:8px 14px; border-radius:10px;
      background:var(--card); border:1px solid var(--border); cursor:pointer; font-weight:600;
    }
    .expand-btn:hover{ background:#fffef8; }
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">ğŸ  Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="åˆ‡æ›èªè¨€">ğŸŒ EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <!-- å·¦ï¼šå½±ç‰‡ -->
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/Fb3AcrKqUz8"
              title="Rock of Rancor" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- å³ï¼šæ¨™é¡Œ + Tabs -->
      <section class="card">
        <div class="hd" id="pageTitle">Rock of Rancor</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true"  data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Acquisition</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlockq">Unlock Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="followq">Follow-Up Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="comments">Comments</button>
        </div>
        <div class="bd">
          <div id="panel-story"   class="tab-panel active"></div>
          <div id="panel-acq"     class="tab-panel"></div>
          <div id="panel-unlockq" class="tab-panel"></div>
          <div id="panel-followq" class="tab-panel"></div>
          <div id="panel-comments" class="tab-panel">
            <div id="giscus_container" style="min-height:320px;"></div>
          </div>
        </div>
      </section>
    </div>
  </main>

<script>
const LANG_KEY = 'ffxiv-guide-lang';
const i18n = {
  EN:{
    langLabel:'EN',
    pageTitle:'Rock of Rancor',
    tabs:{ story:'Story', acq:'Acquisition', unlockq:'Unlock Quest', followq:'Follow-Up Quest', comments:'Comments' },
    readMore:'Show more', readLess:'Show less',
    story:`<div class="clamp" data-collapsed="true">
      <p>Following the string of mysterious deaths, Aideen shared another unsettling rumor: all the victims had been young, beautiful women. With a half-hearted joke, she warned that she might be next, before getting to the real concernâ€”a strange legend surrounding a crag southwest of Fallgourd Float.</p>
      <p>Locals whispered that after each death, the victimâ€™s rancor would seep into the rock, causing it to flash and emit eerie sounds. Though skeptical, Aideen proposed testing the rumor firsthand. She gave you a firesand stick and instructed you to hurl it at the stone to break off fragments for analysis.</p>
      <p>You traveled to the siteâ€”known as the Rock of Rancorâ€”braved its unsettling presence, and used the firesand to shatter part of it. Upon returning, Aideen examined the fragments. Beneath the grime, they turned out to be ordinary lightning crystals. The moaning and flashing? Just an elemental reaction. Disappointed, she admitted the phenomenon likely had nothing to do with the masked manâ€¦ or vengeful spirits.</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>Quest Giver</b> Aideen <small class="muted">(North Shroud, X:21.8, Y:26.7)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="ziz-is-so-ridiculous.html">Ziz Is So Ridiculous</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="power-of-deduction.html">Power of Deduction</a></div>
    </div>`
  },
  JP:{
    langLabel:'JP',
    pageTitle:'æ€¨å¿µå²©ã®è¬',
    tabs:{ story:'ã‚¹ãƒˆãƒ¼ãƒªãƒ¼', acq:'å…¥æ‰‹æ–¹æ³•', unlockq:'é–‹æ”¾ã‚¯ã‚¨ã‚¹ãƒˆ', followq:'å¾Œç¶šã‚¯ã‚¨ã‚¹ãƒˆ', comments:'ã‚³ãƒ¡ãƒ³ãƒˆ' },
    readMore:'å…¨æ–‡ã‚’è¡¨ç¤º', readLess:'æŠ˜ã‚ŠãŸãŸã‚€',
    story:`<div class="clamp" data-collapsed="true">
      <p>é€£ç¶šã™ã‚‹æ€ªæ­»äº‹ä»¶ã«ã¤ã„ã¦ã€Aideen ã¯ã•ã‚‰ã«æ°—ãŒã‹ã‚Šãªå™‚ã‚’å£ã«ã—ãŸã€‚ã©ã†ã‚„ã‚‰çŠ ç‰²è€…ã¯ã€ã„ãšã‚Œã‚‚è‹¥ãç¾ã—ã„å¥³æ€§ã ã£ãŸã¨ã„ã†ã€‚è‡ªã‚‰ã‚‚æ¨™çš„ã«ãªã‚‹ã®ã§ã¯ã¨å†—è«‡ã‚ã‹ã™å½¼å¥³ã ã£ãŸãŒã€ã™ãã«èª¿æŸ»ã®ææ¡ˆã¸ã¨åˆ‡ã‚Šæ›¿ãˆãŸã€‚</p>
      <p>Fallgourd Float ã®å—è¥¿ã«ã¯ã€Œæ€¨å¿µã®å²©ã€ã¨å‘¼ã°ã‚Œã‚‹å²©ãŒã‚ã‚Šã€æ­»è€…ãŒå‡ºã‚‹ãŸã³ã«ãã®å²©ãŒå…‰ã‚Šã€ã†ã‚ãå£°ã‚’ã‚ã’ã‚‹ã¨ã„ã†ä¸æ°—å‘³ãªå™‚ãŒã‚ã‚‹ã‚‰ã—ã„ã€‚çœŸå½ã‚’ç¢ºã‹ã‚ã‚‹ãŸã‚ã€Aideen ã¯ã‚ãªãŸã«ç«è–¬æ£’ã‚’æ‰‹æ¸¡ã—ã€å²©ã«æŠ•ã’ã¤ã‘ã¦ç ´ç‰‡ã‚’æŒã¡å¸°ã‚‹ã‚ˆã†ä¾é ¼ã—ãŸã€‚</p>
      <p>ç¾åœ°ã¸å‘ã‹ã„ã€å™‚ã®å²©ã«ç«è–¬æ£’ã‚’æŠ•ã’ã‚‹ã¨ã€ãã‚Œã¯å°ã•ãªçˆ†ç™ºã‚’èµ·ã“ã—ã¦ç •ã‘ãŸã€‚Fallgourd Float ã«æˆ»ã£ãŸã‚ãªãŸã‹ã‚‰ç ´ç‰‡ã‚’å—ã‘å–ã£ãŸ Aideen ã¯ã€è¡¨é¢ã®æ±šã‚Œã‚’è½ã¨ã—ãªãŒã‚‰è¦³å¯Ÿã—ãŸâ”€â”€ä¸­èº«ã¯ã€ã”ãæ™®é€šã®é›·å±æ€§ã‚¯ãƒªã‚¹ã‚¿ãƒ«ã ã£ãŸã€‚å…‰ã‚„éŸ³ã¯ã€é­”åŠ›ã®å…±é³´ã«ã‚ˆã‚‹ã‚‚ã®ã ã£ãŸã‚‰ã—ã„ã€‚</p>
      <p>ãŒã£ã‹ã‚Šã—ãŸæ§˜å­ã®å½¼å¥³ã¯ã€ã€Œä»®é¢ã®ç”·ã€ã¨ã®é–¢é€£æ€§ã‚‚éœŠçš„ãªæ€¨å¿µã‚‚ã€ã©ã†ã‚„ã‚‰å˜ãªã‚‹æ†¶æ¸¬ã ã£ãŸã‚ˆã†ã ã¨è‚©ã‚’è½ã¨ã—ãŸã€‚</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>ã‚¯ã‚¨ã‚¹ãƒˆç™ºè¡Œ</b> ã‚¢ã‚¤ãƒ‡ã‚£ãƒ¼ãƒ³ã€€é»’è¡£æ£®ï¼šåŒ—éƒ¨æ£®æ— <small class="muted">(X:21.8, Y:26.7)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="ziz-is-so-ridiculous.html">æ¡æ˜å ´ã®åˆ‡ã‚Šè£‚ãé­”</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="power-of-deduction.html">æ¨ç†ã¯è¸Šã‚‹</a></div>
    </div>`
  },
  ZH:{
    langLabel:'ZH',
    pageTitle:'æ€¨å²©ä¹‹è¬',
    tabs:{ story:'æ•…äº‹æ¦‚è¦', acq:'å–å¾—æ–¹å¼', unlockq:'è§£é–ä»»å‹™', followq:'å¾ŒçºŒä»»å‹™', comments:'ç•™è¨€' },
    readMore:'å±•é–‹å…¨æ–‡', readLess:'æ”¶åˆå…§å®¹',
    story:`<div class="clamp" data-collapsed="true">
      <p>éš¨è‘—èª¿æŸ¥æŒçºŒï¼ŒAideen åˆé€éœ²äº†å¦ä¸€å€‹æ¯›éª¨æ‚šç„¶çš„å‚³èï¼šæ‰€æœ‰æ­»è€…ä¼¼ä¹éƒ½æ˜¯å¹´è¼•è²Œç¾çš„å¥³æ€§ã€‚å¥¹è‡ªå˜²åœ°é–‹äº†å€‹ç©ç¬‘ï¼Œèªªè‡ªå·±å¾—å°å¿ƒé»ï¼Œæ¥è‘—è½‰å…¥æ­£é¡Œâ€”â€”ä¸€å¡Šä½æ–¼ Fallgourd Float è¥¿å—æ–¹çš„å¥‡å²©ã€‚</p>
      <p>ç•¶åœ°æµè¨€æŒ‡å‡ºï¼Œæ¯ç•¶ä¸€ä½å°‘å¥³é‡å®³ï¼Œå¥¹çš„æ€¨å¿µä¾¿æœƒæ»²å…¥é‚£å¡Šå·¨çŸ³ï¼Œä»¤å…¶é–ƒçˆå…‰èŠ’ä¸¦ç™¼å‡ºä½é³´ã€‚é›–ç„¶è½èµ·ä¾†è’èª•ï¼ŒAideen é‚„æ˜¯æ±ºå®šè¦ªè‡ªé©—è­‰é€™å‰‡å‚³è¨€ã€‚å¥¹äº¤çµ¦ä½ ä¸€æ ¹ç«ç ‚æ£’ï¼Œè«‹ä½ è¦ªè‡ªå‰å¾€è©²è™•ï¼Œå°‡å…¶æŠ•å‘å·¨çŸ³ä¸¦å¸¶å›ç¢ç‰‡ã€‚</p>
      <p>ä½ å‰å¾€é‚£å¡ŠçŸ³é ­ï¼Œç•¶åœ°äººç¨±ä¹‹ç‚º Rock of Rancorï¼ˆæ€¨å¿µä¹‹å²©ï¼‰ï¼Œå³ä¾¿æ°£æ°›è©­ç•°ï¼Œä½ ä»æœæ–·å‡ºæ‰‹ã€‚å·¨éŸ¿éå¾Œï¼Œä½ æ”¶é›†äº†ä¸€äº›ç¢è£‚çµæ™¶ï¼Œå›åˆ° Fallgourd Float äº¤çµ¦ Aideen æª¢è¦–ã€‚</p>
      <p>å¥¹æ“¦å»ç¢ç‰‡ä¸Šçš„å¡µåœŸï¼Œç™¼ç¾é‚£å…¶å¯¦åªæ˜¯æ™®é€šçš„é›·å±¬æ€§çµæ™¶ã€‚è‡³æ–¼é–ƒçˆèˆ‡ä½é³´ï¼Œä¸éæ˜¯é­”åŠ›åæ‡‰å°è‡´çš„è‡ªç„¶ç¾è±¡ã€‚å¥¹é —æ„Ÿå¤±æœ›åœ°æ‰¿èªï¼Œé€™ä¸€åˆ‡æ‡‰èˆ‡æˆ´é¢å…·çš„ç¥ç§˜äººç„¡é—œï¼Œä¹Ÿä¸¦éæ­»è€…æ€¨å¿µæ‰€è‡´ã€‚</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>ä»»å‹™ç™¼å¸ƒ</b> è‰¾æ±€ã€€é»‘è¡£æ£®æ—åŒ—éƒ¨ <small class="muted">(X:21.8, Y:26.7)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="ziz-is-so-ridiculous.html">æ½›ä¼æ–¼ç¤¦å ´çš„é­”å½±</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="power-of-deduction.html">æ¨ç†çš„åŠ›é‡</a></div>
    </div>`
  }
};

const langToggle  = document.getElementById('langToggle');
const pageTitle   = document.getElementById('pageTitle');
const tabBtns     = [...document.querySelectorAll('.tab-btn')];
const panels = {
  story:  document.getElementById('panel-story'),
  acq:    document.getElementById('panel-acq'),
  unlockq:document.getElementById('panel-unlockq'),
  followq:document.getElementById('panel-followq'),
  comments: document.getElementById('panel-comments')
};

function getLang(){ return localStorage.getItem(LANG_KEY) || 'EN'; }
function applyLang(lang){
  const t = i18n[lang] || i18n.EN;
  pageTitle.textContent = t.pageTitle;
  langToggle.textContent = `ğŸŒ ${t.langLabel}`;
  tabBtns.forEach(btn => { btn.textContent = t.tabs[btn.dataset.tab]; });
  const activeBtn = tabBtns.find(b => b.getAttribute('aria-selected')==='true') || tabBtns[0];
  renderPanel(activeBtn.dataset.tab, lang);
}

function wireClamp(panelEl, t){
  const clamp = panelEl.querySelector('.clamp');
  const btn = panelEl.querySelector('[data-role="expand"]');
  if(!clamp || !btn) return;
  function setLabel(){
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    btn.textContent = collapsed ? t.readMore : t.readLess;
  }
  setLabel();
  btn.addEventListener('click', ()=>{
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    clamp.setAttribute('data-collapsed', collapsed ? 'false' : 'true');
    setLabel();
  });
}

function renderPanel(key, lang){
  const t = i18n[lang] || i18n.EN;
  Object.keys(panels).forEach(k => panels[k].classList.remove('active'));
  panels[key].classList.add('active');
  if (key !== 'comments') panels[key].innerHTML = t[key];
  if (key === 'story') wireClamp(panels[key], t);
  if (key === 'comments') loadGiscusForCurrentLang();
}

tabBtns.forEach(btn=>{
  btn.addEventListener('click', ()=>{
    tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
    btn.setAttribute('aria-selected','true');
    renderPanel(btn.dataset.tab, getLang());
  });
});

langToggle.addEventListener('click', ()=>{
  const cur = getLang();
  const next = cur==='EN' ? 'JP' : (cur==='JP' ? 'ZH' : 'EN');
  localStorage.setItem(LANG_KEY, next);
  applyLang(next);
});

applyLang(getLang());

/* === Giscusï¼šComments åˆ†é  === */
const GISCUS_CFG = {
  repo: 'BELAUG-FFXIV/FFXIV_Library',
  repoId: 'R_kgDOPyh4Kw',
  category: 'General',
  categoryId: 'DIC_kwDOPyh4K84CwPjL',
  theme: 'preferred_color_scheme'
};
function uiLang(code){ return code==='JP' ? 'ja' : (code==='ZH' ? 'zh-TW' : 'en'); }
function loadGiscusForCurrentLang(){
  const mount = document.getElementById('giscus_container');
  if (!mount) return;
  mount.innerHTML = '';
  const langCode = getLang();
  const s = document.createElement('script');
  s.src = 'https://giscus.app/client.js';
  s.setAttribute('data-repo', GISCUS_CFG.repo);
  s.setAttribute('data-repo-id', GISCUS_CFG.repoId);
  s.setAttribute('data-category', GISCUS_CFG.category);
  s.setAttribute('data-category-id', GISCUS_CFG.categoryId);
  s.setAttribute('data-mapping', 'specific');
  s.setAttribute('data-term', location.pathname + 'ï½œ' + langCode);
  s.setAttribute('data-reactions-enabled', '1');
  s.setAttribute('data-emit-metadata', '0');
  s.setAttribute('data-input-position', 'bottom');
  s.setAttribute('data-lang', uiLang(langCode));
  s.setAttribute('data-theme', GISCUS_CFG.theme);
  s.setAttribute('crossorigin', 'anonymous');
  s.async = true;
  mount.appendChild(s);
}
</script>
</body>
</html>
