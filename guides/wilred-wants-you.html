<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wilred Wants You | BELAUG · FFXIV Library</title>
  <meta name="description" content="MSQ – Wilred Wants You (ARR Patch 2.0)">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root { --bg:#fff8e6; --card:#fff; --fg:#222; --muted:#666; --border:#e5e1d8; --accent:#e11d48; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif;background:var(--bg);color:var(--fg)}
    .container{max-width:1080px;margin:0 auto;padding:0 16px}
    .site-header{border-bottom:1px solid var(--border);background:#fff9edb3;backdrop-filter:saturate(120%) blur(6px);position:sticky;top:0;z-index:10}
    .nav{display:flex;align-items:center;justify-content:space-between;height:60px}
    .left{display:flex;align-items:center;gap:12px}
    .home{border:1px solid var(--border);background:#fff;padding:4px 8px;border-radius:8px;text-decoration:none;color:var(--fg);font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex;align-items:center;gap:8px}
    .icon-btn{background:none;border:none;cursor:pointer;font-size:14px;padding:6px 10px;border-radius:8px}
    .icon-btn:hover{background:#fff;border:1px solid var(--border)}
    .main{padding:20px 0 40px}
    .grid{display:grid;grid-template-columns:1.1fr 1fr;gap:20px;align-items:start}
    @media (max-width:900px){
      .grid{grid-template-columns:1fr}
      .video-wrap{position:relative;padding-top:56.25%}
      .video-wrap iframe{position:absolute;inset:0;width:100%;height:100%}
    }
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px;border-bottom:1px solid var(--border);font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%;height:420px;border:0;display:block;border-radius:16px}
    .tabs{display:flex;gap:8px;padding:12px 12px 0;flex-wrap:wrap}
    .tab-btn{background:#fff;border:1px solid var(--border);color:var(--fg);border-radius:999px;padding:8px 14px;cursor:pointer;font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent);color:#fff;background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex;flex-direction:column;gap:10px}
    .stack .row{padding:12px 14px;border:1px dashed var(--border);border-radius:12px;background:#fffdf6}
    .row b{display:inline-block;min-width:130px}
    .muted{color:var(--muted)}
    .link{color:#0b60d8;text-decoration:none}
    .link:hover{text-decoration:underline}
    /* 展開/收合 */
    .clamp{position:relative; max-height:360px; overflow:hidden}
    .clamp[data-collapsed="false"]{max-height:none}
    .clamp[data-collapsed="true"]::after{
      content:""; position:absolute; left:0; right:0; bottom:0; height:72px;
      background:linear-gradient(to bottom, rgba(255,255,255,0), var(--card)); pointer-events:none;
    }
    .expand-wrap{ margin-top:12px; }
    .expand-btn{
      display:inline-block; padding:8px 14px; border-radius:10px;
      background:var(--card); border:1px solid var(--border); cursor:pointer; font-weight:600;
    }
    .expand-btn:hover{ background:#fffef8; }
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">🏠 Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="切換語言">🌐 EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <!-- 左：影片 -->
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/Rq1ZmvqIeUQ"
              title="Wilred Wants You" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- 右：標題 + Tabs -->
      <section class="card">
        <div class="hd" id="pageTitle">Wilred Wants You</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true"  data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Acquisition</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlockq">Unlock Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="followq">Follow-Up Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="comments">Comments</button>
        </div>
        <div class="bd">
          <div id="panel-story"   class="tab-panel active"></div>
          <div id="panel-acq"     class="tab-panel"></div>
          <div id="panel-unlockq" class="tab-panel"></div>
          <div id="panel-followq" class="tab-panel"></div>
          <div id="panel-comments" class="tab-panel">
            <div id="giscus_container" style="min-height:320px;"></div>
          </div>
        </div>
      </section>
    </div>
  </main>

<script>
const LANG_KEY = 'ffxiv-guide-lang';
const i18n = {
  EN:{
    langLabel:'EN',
    pageTitle:'Wilred Wants You',
    tabs:{ story:'Story', acq:'Acquisition', unlockq:'Unlock Quest', followq:'Follow-Up Quest', comments:'Comments' },
    readMore:'Show more', readLess:'Show less',
    story:`<div class="clamp" data-collapsed="true">
      <p>Hremfing greets you and relays a message from Wilred—one of the fiery young leaders of Little Ala Mhigo—who is impressed you gained Gundobald’s trust and wishes to speak with you. Wilred waits at a craggy area north of the settlement.</p>
      <p>When you meet Wilred he thanks you for coming and makes plain his suspicion: he wonders whether you are an agent of the Empire or some other power. His suspicions explode into anger when he believes you meddle in their affairs. He tests you in combat, surprised by your strength, yet vows that nothing less than death will force him and his fellows to abandon their cause.</p>
      <p>Wilred declares that they will obtain the power needed to overthrow the Empire and reclaim their homeland. Troubled by this, you return to Gundobald and report the youth’s hostility and their intent. Gundobald is aghast that Wilred and his cronies would attack you, and fears that, left unchecked, their zeal could harm others and themselves. He exhorts patience and asks you to uncover the youths’ plans and bring word of anything you learn.</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>Quest Giver</b> Hremfing <small class="muted">(Southern Thanalan, X:16.9, Y:14.3)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="the-bear-and-the-young-uns-cares.html">The Bear and the Young’uns’ Cares</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="big-trouble-in-little-ala-mhigo.html">Big Trouble in Little Ala Mhigo</a></div>
    </div>`
  },
  JP:{
    langLabel:'JP',
    pageTitle:'ある青年の呼び出し',
    tabs:{ story:'ストーリー', acq:'入手方法', unlockq:'開放クエスト', followq:'後続クエスト', comments:'コメント' },
    readMore:'全文を表示', readLess:'折りたたむ',
    story:`<div class="clamp" data-collapsed="true">
      <p>ヘレムフィングはあなたを迎え、リトルアラミゴの若者たちの一人、ウィルレッドからの伝言を伝える。ウィルレッドは、あなたがガンドバルドの信頼を得たことに感銘を受けており、集落北方の険しい岩場で会おうと言っている。</p>
      <p>あなたがウィルレッドと落ち合うと、彼は率直に詰問する。帝国の手先か、あるいは別の勢力に仕えているのかと。問い詰められると彼は激昂し、仲間たちとともにあなたを排除しようと襲いかかる。だが、あなたの強さに驚きつつも、彼の決意は変わらない──いかなる脅しや鎮圧を受けても、死を以てしてしか闘志をへし折ることはできぬ、と。</p>
      <p>ウィルレッドは語る。帝国を打倒するための力を手にし、祖国を取り戻すのだと。これを受け、あなたはガンドバルドのもとへ戻り、若者たちの粗暴な行動と計画の片鱗を伝える。ガンドバルドは憂慮の表情を浮かべ、若者たちの激情が制御されねば、他者を傷つけかねないと警告する。忍耐の時が来ていると彼は諭し、何か掴んだら必ず知らせてほしいとあなたに頼む。</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>クエスト発行</b> フレムフィング　南ザナラーン <small class="muted">(X:16.9, Y:14.3)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="the-bear-and-the-young-uns-cares.html">密かな企み</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="big-trouble-in-little-ala-mhigo.html">若き血の暴走</a></div>
    </div>`
  },
  ZH:{
    langLabel:'ZH',
    pageTitle:'來自年輕人的呼喚',
    tabs:{ story:'故事概要', acq:'取得方式', unlockq:'解鎖任務', followq:'後續任務', comments:'留言' },
    readMore:'展開全文', readLess:'收合內容',
    story:`<div class="clamp" data-collapsed="true">
      <p>Hremfing 向你轉達 Wilred 的訊息：Wilred 身為 Little Ala Mhigo 的年輕領袖之一，對你能獲得 Gundobald 的信任感到讚賞，並約你到村莊北方的岩壑處相見。</p>
      <p>與 Wilred 見面時，他直言相問：你到底在打探什麼？是帝國派來的間諜，還是別有來歷？當他以為你在干涉他們之事時便勃然大怒，並與同黨對你動手。他在交手中發現你的實力，驚訝之餘仍堅稱，除非以死相逼，否則他與同伴絕不會放棄他們的鬥志。</p>
      <p>Wilred 表示，他們要取得足以推翻 Empire 的力量，藉此奪回故鄉。你將此事回報給 Gundobald，說明年輕人態度激進並可能採取危險行動。Gundobald 對 Wilred 等人竟會對你動手感到震驚，並擔心若任由其發展，年輕人的熱血會導致傷人或自傷的悲劇。他囑咐你持續關注並在取得任何線索時立即回報。</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>任務發布</b> 赫倫芬　薩納蘭南部 <small class="muted">(X:16.9, Y:14.3)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="the-bear-and-the-young-uns-cares.html">幕後的陰謀</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="big-trouble-in-little-ala-mhigo.html">失控的理想</a></div>
    </div>`
  }
};

const langToggle  = document.getElementById('langToggle');
const pageTitle   = document.getElementById('pageTitle');
const tabBtns     = [...document.querySelectorAll('.tab-btn')];
const panels = {
  story:  document.getElementById('panel-story'),
  acq:    document.getElementById('panel-acq'),
  unlockq:document.getElementById('panel-unlockq'),
  followq:document.getElementById('panel-followq'),
  comments: document.getElementById('panel-comments')
};

function getLang(){ return localStorage.getItem(LANG_KEY) || 'EN'; }
function applyLang(lang){
  const t = i18n[lang] || i18n.EN;
  pageTitle.textContent = t.pageTitle;
  langToggle.textContent = `🌐 ${t.langLabel}`;
  tabBtns.forEach(btn => { btn.textContent = t.tabs[btn.dataset.tab]; });
  const activeBtn = tabBtns.find(b => b.getAttribute('aria-selected')==='true') || tabBtns[0];
  renderPanel(activeBtn.dataset.tab, lang);
}

function wireClamp(panelEl, t){
  const clamp = panelEl.querySelector('.clamp');
  const btn = panelEl.querySelector('[data-role="expand"]');
  if(!clamp || !btn) return;
  function setLabel(){
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    btn.textContent = collapsed ? t.readMore : t.readLess;
  }
  setLabel();
  btn.addEventListener('click', ()=>{
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    clamp.setAttribute('data-collapsed', collapsed ? 'false' : 'true');
    setLabel();
  });
}

function renderPanel(key, lang){
  const t = i18n[lang] || i18n.EN;
  Object.keys(panels).forEach(k => panels[k].classList.remove('active'));
  panels[key].classList.add('active');
  if (key !== 'comments') panels[key].innerHTML = t[key];
  if (key === 'story') wireClamp(panels[key], t);
  if (key === 'comments') loadGiscusForCurrentLang();
}

tabBtns.forEach(btn=>{
  btn.addEventListener('click', ()=>{
    tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
    btn.setAttribute('aria-selected','true');
    renderPanel(btn.dataset.tab, getLang());
  });
});

langToggle.addEventListener('click', ()=>{
  const cur = getLang();
  const next = cur==='EN' ? 'JP' : (cur==='JP' ? 'ZH' : 'EN');
  localStorage.setItem(LANG_KEY, next);
  applyLang(next);
});

applyLang(getLang());

/* === Giscus：Comments 分頁 === */
const GISCUS_CFG = {
  repo: 'BELAUG-FFXIV/FFXIV_Library',
  repoId: 'R_kgDOPyh4Kw',
  category: 'General',
  categoryId: 'DIC_kwDOPyh4K84CwPjL',
  theme: 'preferred_color_scheme'
};
function uiLang(code){ return code==='JP' ? 'ja' : (code==='ZH' ? 'zh-TW' : 'en'); }
function loadGiscusForCurrentLang(){
  const mount = document.getElementById('giscus_container');
  if (!mount) return;
  mount.innerHTML = '';
  const langCode = getLang();
  const s = document.createElement('script');
  s.src = 'https://giscus.app/client.js';
  s.setAttribute('data-repo', GISCUS_CFG.repo);
  s.setAttribute('data-repo-id', GISCUS_CFG.repoId);
  s.setAttribute('data-category', GISCUS_CFG.category);
  s.setAttribute('data-category-id', GISCUS_CFG.categoryId);
  s.setAttribute('data-mapping', 'specific');
  s.setAttribute('data-term', location.pathname + '｜' + langCode);
  s.setAttribute('data-reactions-enabled', '1');
  s.setAttribute('data-emit-metadata', '0');
  s.setAttribute('data-input-position', 'bottom');
  s.setAttribute('data-lang', uiLang(langCode));
  s.setAttribute('data-theme', GISCUS_CFG.theme);
  s.setAttribute('crossorigin', 'anonymous');
  s.async = true;
  mount.appendChild(s);
}
</script>
</body>
</html>
