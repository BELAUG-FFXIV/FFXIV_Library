<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Give a Man a Drink | BELAUG Â· FFXIV Library</title>
  <meta name="description" content="MSQ â€“ Give a Man a Drink (ARR Patch 2.0)">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root { --bg:#fff8e6; --card:#fff; --fg:#222; --muted:#666; --border:#e5e1d8; --accent:#e11d48; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif;background:var(--bg);color:var(--fg)}
    .container{max-width:1080px;margin:0 auto;padding:0 16px}
    .site-header{border-bottom:1px solid var(--border);background:#fff9edb3;backdrop-filter:saturate(120%) blur(6px);position:sticky;top:0;z-index:10}
    .nav{display:flex;align-items:center;justify-content:space-between;height:60px}
    .left{display:flex;align-items:center;gap:12px}
    .home{border:1px solid var(--border);background:#fff;padding:4px 8px;border-radius:8px;text-decoration:none;color:var(--fg);font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex;align-items:center;gap:8px}
    .icon-btn{background:none;border:none;cursor:pointer;font-size:14px;padding:6px 10px;border-radius:8px}
    .icon-btn:hover{background:#fff;border:1px solid var(--border)}
    .main{padding:20px 0 40px}
    .grid{display:grid;grid-template-columns:1.1fr 1fr;gap:20px;align-items:start}
    @media (max-width:900px){
      .grid{grid-template-columns:1fr}
      .video-wrap{position:relative;padding-top:56.25%}
      .video-wrap iframe{position:absolute;inset:0;width:100%;height:100%}
    }
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px;border-bottom:1px solid var(--border);font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%;height:420px;border:0;display:block;border-radius:16px}
    .tabs{display:flex;gap:8px;padding:12px 12px 0;flex-wrap:wrap}
    .tab-btn{background:#fff;border:1px solid var(--border);color:var(--fg);border-radius:999px;padding:8px 14px;cursor:pointer;font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent);color:#fff;background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex;flex-direction:column;gap:10px}
    .stack .row{padding:12px 14px;border:1px dashed var(--border);border-radius:12px;background:#fffdf6}
    .row b{display:inline-block;min-width:130px}
    .muted{color:var(--muted)}
    .link{color:#0b60d8;text-decoration:none}
    .link:hover{text-decoration:underline}
    .clamp{position:relative; max-height:360px; overflow:hidden}
    .clamp[data-collapsed="false"]{max-height:none}
    .clamp[data-collapsed="true"]::after{
      content:""; position:absolute; left:0; right:0; bottom:0; height:72px;
      background:linear-gradient(to bottom, rgba(255,255,255,0), var(--card)); pointer-events:none;
    }
    .expand-wrap{ margin-top:12px; }
    .expand-btn{
      display:inline-block; padding:8px 14px; border-radius:10px;
      background:var(--card); border:1px solid var(--border); cursor:pointer; font-weight:600;
    }
    .expand-btn:hover{ background:#fffef8; }
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">ğŸ  Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="åˆ‡æ›èªè¨€">ğŸŒ EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <!-- å·¦ï¼šå½±ç‰‡ -->
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/XyfUKVz8lJY"
              title="Give a Man a Drink" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- å³ï¼šæ¨™é¡Œ + Tabs -->
      <section class="card">
        <div class="hd" id="pageTitle">Give a Man a Drink</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true"  data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Acquisition</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlockq">Unlock Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="followq">Follow-Up Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="comments">Comments</button>
        </div>
        <div class="bd">
          <div id="panel-story"   class="tab-panel active"></div>
          <div id="panel-acq"     class="tab-panel"></div>
          <div id="panel-unlockq" class="tab-panel"></div>
          <div id="panel-followq" class="tab-panel"></div>
          <div id="panel-comments" class="tab-panel">
            <div id="giscus_container" style="min-height:320px;"></div>
          </div>
        </div>
      </section>
    </div>
  </main>

<script>
const LANG_KEY = 'ffxiv-guide-lang';
const i18n = {
  EN:{
    langLabel:'EN',
    pageTitle:'Give a Man a Drink',
    tabs:{ story:'Story', acq:'Acquisition', unlockq:'Unlock Quest', followq:'Follow-Up Quest', comments:'Comments' },
    readMore:'Show more', readLess:'Show less',
    story:`<div class="clamp" data-collapsed="true">
      <p>Shamani Lohmani admits that all this talk of Bacchus wine has left him feeling nostalgic. He says there is much he misses about his days with the Company of Heroes, and after everything the captain has done for him, he cannot bear the thought of disappointing him.</p>
      <p>Still, he steadies himself and tells you not to fear. He swears he will find a suitable wine for the banquet, even if he needs time to think through a solution. Until then, he asks you for a favor.</p>
      <p>He explains that two years ago, at the lowest point of his despair, he wandered into Vylbrand as a drunken vagabond. He suspects he was searching for a place to dieâ€”and he came very close to finding one not far from where you stand now.</p>
      <p>There, a man named Drest took him in and nursed him back to health. Drest was also the one who gave him his first taste of Bacchus wine, the experience that helped him discover a new calling. Though Shamani says he is still only a novice at winemaking, he wants Drest to know that he is pursuing his dream.</p>
      <p>He places a bottle in your handsâ€”his own original creationâ€”and asks you to deliver it in his stead, saying he would be deeply grateful. Drest sometimes works at the Raincatcher Gully docks, and Shamani suggests that Rhitskylt might know where to find him.</p>
      <p>At the Raincatcher Gully docks, Rhitskylt identifies Drest as â€œthe hermit,â€ saying he throws him a few gil when an extra pair of hands is needed. Drest does not talk about himself, and Rhitskylt says he does not ask. With scars like that on a manâ€™s face, he says, it is best to leave well enough aloneâ€”yet if you truly mean to find him, you should head southwest to the Severed String.</p>
      <p>You find Drest there, and he greets you with suspicion, demanding to know what you want. When you produce the wine, he recoils, insisting he never asked for it, and demands to know who sent you. His words falter into pained, broken sounds, and he can only manage a groan.</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>Quest Giver</b> Shamani Lohmani <small class="muted">Eastern La Noscea (X:21.6, Y:21.1)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="it-wont-work.html">It Wonâ€™t Work</a></div>
      <div class="row">All classes and jobs (excluding limited jobs) (Level 33 or above)</div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="that-weight.html">That Weight</a></div>
    </div>`
  },
  JP:{
    langLabel:'JP',
    pageTitle:'å¯†æ—ã®ç”·',
    tabs:{ story:'ã‚¹ãƒˆãƒ¼ãƒªãƒ¼', acq:'å…¥æ‰‹æ–¹æ³•', unlockq:'é–‹æ”¾ã‚¯ã‚¨ã‚¹ãƒˆ', followq:'å¾Œç¶šã‚¯ã‚¨ã‚¹ãƒˆ', comments:'ã‚³ãƒ¡ãƒ³ãƒˆ' },
    readMore:'å…¨æ–‡ã‚’è¡¨ç¤º', readLess:'æŠ˜ã‚ŠãŸãŸã‚€',
    story:`<div class="clamp" data-collapsed="true">
      <p>ã‚·ãƒ£ãƒãƒ‹ãƒ»ãƒ­ãƒ¼ãƒãƒ‹ã¯ã€ãƒãƒƒã‚«ã‚¹é…’ã®è©±ã‚’ã—ã¦ã„ã‚‹ã†ã¡ã«å¦™ã«æ‡ã‹ã—ã•ãŒè¾¼ã¿ä¸Šã’ã¦ããŸã¨ã“ã¼ã—ã€è‹±é›„å›£ã¨å…±ã«éã”ã—ãŸæ—¥ã€…ã«æ‹ã—ã„ã‚‚ã®ãŒå¤šã„ã®ã ã¨è¨€ã†ã€‚ãã—ã¦ã€éšŠé•·ãŒè‡ªåˆ†ã«ã—ã¦ãã‚ŒãŸæ•°ã€…ã®ã“ã¨ã‚’æ€ãˆã°ã€æ±ºã—ã¦å¤±æœ›ã•ã›ãŸããªã„ã®ã ã¨ã‚‚ã€‚</p>
      <p>ãã‚Œã§ã‚‚å½¼ã¯æ°—ã‚’å–ã‚Šç›´ã—ã€å¿ƒé…ã¯ã„ã‚‰ãªã„ã¨ã‚ãªãŸã«å‘Šã’ã‚‹ã€‚å®´ã«ãµã•ã‚ã—ã„è‘¡è„é…’ã¯å¿…ãšè¦‹ã¤ã‘ã‚‹â€•â€•è§£æ±ºç­–ã‚’è€ƒãˆã‚‹æ™‚é–“ã¯å¿…è¦ã‹ã‚‚ã—ã‚Œãªã„ãŒã€ã¨èª“ã†ã€‚ãã—ã¦ã€ãã®é–“ã«ã²ã¨ã¤é ¼ã¿ãŒã‚ã‚‹ã®ã ã¨ç¶šã‘ã‚‹ã€‚</p>
      <p>å½¼ã¯ã€äºŒå¹´å‰ã€çµ¶æœ›ã®åº•ã§è‡ªåˆ†ãŒé…”ã„ã©ã‚Œã®æµã‚Œè€…ã¨ã—ã¦ãƒã‚¤ãƒ«ãƒ–ãƒ©ãƒ³ãƒ‰ã‚’ã•ã¾ã‚ˆã„æ­©ã„ã¦ã„ãŸã“ã¨ã‚’èªã‚‹ã€‚æ­»ã«å ´æ‰€ã‚’æ¢ã—ã¦ã„ãŸã®ã ã¨æ€ã†ã€ã¨å½¼ã¯è¨€ã„ã€å®Ÿéš›ã«ã“ã®è¿‘ãã§å±ã†ãå‘½ã‚’è½ã¨ã—ã‹ã‘ãŸã®ã ã¨æ˜ã‹ã™ã€‚</p>
      <p>ãã®ã¨ãå½¼ã‚’å—ã‘å…¥ã‚Œã€çœ‹ç—…ã—ã¦å‘½ã‚’ã¤ãªã„ã§ãã‚ŒãŸã®ãŒãƒ‰ãƒ¬ã‚¹ãƒˆã¨ã„ã†ç”·ã ã£ãŸã€‚ã•ã‚‰ã«ã€åˆã‚ã¦ãƒãƒƒã‚«ã‚¹é…’ã‚’å‘³ã‚ã‚ã›ã¦ãã‚ŒãŸã®ã‚‚ãƒ‰ãƒ¬ã‚¹ãƒˆã§ã‚ã‚Šã€ãã®ä¸€æ¯ãŒæ–°ãŸãªé“ã‚’è¦‹ã„ã ã™ãã£ã‹ã‘ã«ãªã£ãŸã®ã ã¨ã„ã†ã€‚ã‚·ãƒ£ãƒãƒ‹ãƒ»ãƒ­ãƒ¼ãƒãƒ‹ã¯ã€è‡ªåˆ†ã¯ã¾ã é†¸é€ ã®æŠ€ã§ã¯æœªç†Ÿã ãŒã€ãã‚Œã§ã‚‚å¤¢ã‚’è¿½ã£ã¦ã„ã‚‹ã“ã¨ã‚’å½¼ã«ä¼ãˆãŸã„ã®ã ã¨è©±ã™ã€‚</p>
      <p>å½¼ã¯ã‚ãªãŸã«ä¸€æœ¬ã®è‘¡è„é…’ã‚’è¨—ã™â€•â€•è‡ªã‚‰ç”Ÿã¿å‡ºã—ãŸç‹¬è‡ªã®é…’ã ã€‚ä»£ã‚ã‚Šã«å±Šã‘ã¦ã»ã—ã„ã€ã¨å½¼ã¯æ·±ãé¡˜ã„ã€æ„Ÿè¬ã™ã‚‹ã ã‚ã†ã¨ã‚‚è¨€ã†ã€‚ãƒ‰ãƒ¬ã‚¹ãƒˆã¯ãƒ¬ã‚¤ãƒ³ã‚­ãƒ£ãƒƒãƒãƒ£ãƒ¼ãƒ»ã‚¬ãƒªã®èˆ¹ç€å ´ã§åƒãã“ã¨ãŒã‚ã‚‹ã‚‰ã—ãã€å±…å ´æ‰€ã‚’çŸ¥ã‚‹ãªã‚‰ãƒªãƒ„ã‚­ãƒ«ãƒˆã ã‚ã†ã¨ç¤ºã™ã€‚</p>
      <p>ãƒ¬ã‚¤ãƒ³ã‚­ãƒ£ãƒƒãƒãƒ£ãƒ¼ãƒ»ã‚¬ãƒªã®èˆ¹ç€å ´ã§ãƒªãƒ„ã‚­ãƒ«ãƒˆã«å°‹ã­ã‚‹ã¨ã€ãƒ‰ãƒ¬ã‚¹ãƒˆã¯ã€Œéš è€…ã€ã ã¨è¨€ã„ã€æ‰‹ãŒè¶³ã‚Šãªã„ã¨ãã«å°‘ã—ã‚®ãƒ«ã‚’æ¸¡ã—ã¦åƒã‹ã›ã‚‹ã“ã¨ãŒã‚ã‚‹ã¨è©±ã™ã€‚æœ¬äººã¯è‡ªåˆ†ã®ã“ã¨ã‚’èªã‚‰ãšã€ã“ã¡ã‚‰ã‚‚è©®ç´¢ã—ãªã„â€•â€•ã‚ã‚Œã»ã©å‚·ã ã‚‰ã‘ã®é¡”ã‚’ã—ãŸç”·ã«ã¯ã€è§¦ã‚Œãªã„æ–¹ãŒã„ã„ã®ã ã¨å½¼ã¯è¨€ã†ã€‚ãã‚Œã§ã‚‚æ¢ã™æ°—ãªã‚‰ã€å—è¥¿ã®ã‚»ãƒ´ã‚¡ãƒ¼ãƒ‰ãƒ»ã‚¹ãƒˆãƒªãƒ³ã‚°ã¸å‘ã‹ãˆã¨æ•™ãˆã‚‹ã€‚</p>
      <p>ã‚ãªãŸãŒãã“ã§ãƒ‰ãƒ¬ã‚¹ãƒˆã‚’è¦‹ã¤ã‘ã‚‹ã¨ã€å½¼ã¯æ€¯ãˆãŸã‚ˆã†ã«ä½•ã®ç”¨ã ã¨å•ã„è¿”ã™ã€‚è‘¡è„é…’ã‚’è¦‹ã›ãŸç¬é–“ã€å½¼ã¯å¼·ãæ‹’ã¿ã€é ¼ã‚“ã§ã‚‚ã„ãªã„ã¨è¨€ã„å¼µã£ã¦èª°ã®å·®ã—é‡‘ã ã¨è©°ã‚å¯„ã‚‹ãŒã€è¨€è‘‰ã¯é€”åˆ‡ã‚Œã€æœ€å¾Œã¯ã†ã‚ãå£°ã ã‘ãŒæ¼ã‚Œã‚‹ã€‚</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>ã‚¯ã‚¨ã‚¹ãƒˆç™ºè¡Œ</b> ã‚·ãƒ£ãƒãƒ‹ãƒ»ãƒ­ãƒ¼ãƒãƒ‹ã€€<small class="muted">æ±ãƒ©ãƒã‚·ã‚¢ (X:21.6, Y:21.1)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="it-wont-work.html">å¤±ã‚ã‚ŒãŸä¼èª¬ã‚’è¨ªã­ã¦</a></div>
      <div class="row">ã™ã¹ã¦ï¼ˆãƒªãƒŸãƒ†ãƒƒãƒ‰ã‚¸ãƒ§ãƒ–ã‚’é™¤ãï¼‰Lv 33ï½</div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="that-weight.html">è€³ã«æ®‹ã‚‹ã¯èŸ²ã®éŸ³</a></div>
    </div>`
  },
  ZH:{
    langLabel:'ZH',
    pageTitle:'å¯†æ—ä¸­çš„ç”·äºº',
    tabs:{ story:'æ•…äº‹æ¦‚è¦', acq:'å–å¾—æ–¹å¼', unlockq:'è§£é–ä»»å‹™', followq:'å¾ŒçºŒä»»å‹™', comments:'ç•™è¨€' },
    readMore:'å±•é–‹å…¨æ–‡', readLess:'æ”¶åˆå…§å®¹',
    story:`<div class="clamp" data-collapsed="true">
      <p>Shamani Lohmani èªªï¼Œè«‡èµ· Bacchus wine è®“ä»–ä¸ç”±å¾—æ„Ÿåˆ°æ‡·å¿µã€‚ç¢ºå¯¦ï¼Œä»–å¾ˆæƒ³å¿µè‡ªå·±èˆ‡ Company of Heroes å…±åº¦çš„é‚£æ®µäººç”Ÿï¼›æƒ³åˆ° captain ç‚ºä»–åšéçš„ä¸€åˆ‡ï¼Œä»–ç„¡è«–å¦‚ä½•éƒ½ä¸é¡˜è®“å°æ–¹å¤±æœ›ã€‚</p>
      <p>ä½†ä»–å¾ˆå¿«åˆç©©ä½æƒ…ç·’ï¼Œè®“ä½ åˆ¥æ“”å¿ƒã€‚ä»–ç™¼èª“ä¸€å®šæœƒæ›¿å®´æœƒæ‰¾åˆ°åˆé©çš„é…’â€”â€”åªæ˜¯ä¹Ÿè¨±éœ€è¦ä¸€äº›æ™‚é–“ï¼Œæƒ³å‡ºçœŸæ­£å¯è¡Œçš„è¾¦æ³•ã€‚è€Œåœ¨ä»–æ€è€ƒå°ç­–çš„åŒæ™‚ï¼Œä»–å¸Œæœ›ä½ èƒ½å…ˆå¹«ä»–ä¸€å€‹å¿™ã€‚</p>
      <p>ä»–èªªå…©å¹´å‰ï¼Œè‡ªå·±åœ¨æœ€æ·±çš„çµ•æœ›è£¡ï¼Œä»¥é…©é…Šå¤§é†‰çš„æµæµªæ¼¢èº«åˆ†é—–é€² Vylbrandã€‚ä»–æ‡·ç–‘é‚£æ™‚çš„è‡ªå·±æ˜¯åœ¨æ‰¾ä¸€å€‹å¯ä»¥æ­»å»çš„åœ°æ–¹ï¼Œå› ç‚ºä»–å¹¾ä¹å°±åœ¨é›¢é€™è£¡ä¸é çš„åœ°æ–¹ï¼ŒçœŸçš„æ‰¾åˆ°äº†é‚£å€‹çµå±€ã€‚</p>
      <p>å°±åœ¨é‚£è£¡ï¼Œä¸€å€‹åå« Drest çš„ç”·äººæ”¶ç•™äº†ä»–ï¼Œä¸¦æŠŠä»–ç…§é¡§åˆ°æ¢å¾©å¥åº·ã€‚ä¹Ÿæ˜¯ Drest è®“ä»–ç¬¬ä¸€æ¬¡å“åš Bacchus wineâ€”â€”é‚£ä¸€å£æ»‹å‘³ï¼Œè®“ä»–åœ¨é»‘æš—ä¹‹ä¸­é‡æ–°çœ‹è¦‹æ–¹å‘ï¼Œæ‰¾åˆ°äº†æ–°çš„å¿—æ¥­ã€‚Shamani Lohmani èªªè‡ªå·±åœ¨é‡€é…’ä¹‹é“ä»åªæ˜¯æ–°æ‰‹ï¼Œä½†ä»–æƒ³è®“ Drest çŸ¥é“ï¼šä»–æ­£åœ¨è¿½é€è‡ªå·±çš„å¤¢ã€‚</p>
      <p>ä»–æŠŠä¸€ç“¶é…’äº¤åˆ°ä½ æ‰‹ä¸Šâ€”â€”é‚£æ˜¯ä»–è¦ªæ‰‹å‰µä½œã€å±¬æ–¼ä»–è‡ªå·±çš„åŸå‰µä½œå“â€”â€”ä¸¦è«‹ä½ ä»£ä»–é€å»ã€‚ä»–èªªè‡ªå·±æœƒéå¸¸æ„Ÿæ¿€ä½ é€™éº¼åšã€‚Drest æœ‰æ™‚æœƒåœ¨ Raincatcher Gully çš„ç¢¼é ­å¹«å¿™åšäº‹ï¼ŒShamani Lohmani èªç‚º Rhitskylt ä¹Ÿè¨±èƒ½å‘Šè¨´ä½ åœ¨å“ªè£¡æ‰¾åˆ°ä»–ã€‚</p>
      <p>ä½ åˆ° Raincatcher Gully çš„ç¢¼é ­è©¢å• Rhitskyltï¼Œä»–èªª Drest å°±æ˜¯ã€Œé‚£å€‹éš±å£«ã€ï¼Œéœ€è¦å¤šä¸€å€‹äººæ‰‹æ™‚ï¼Œä»–æœƒä¸Ÿå¹¾æš gil è«‹å°æ–¹ä¾†å¹«å¿™ã€‚Drest å¾ä¸è«‡è‡ªå·±çš„äº‹ï¼Œè€Œ Rhitskylt ä¹Ÿçµ•ä¸æœƒå»å•ã€‚ä»–èªªåƒé‚£æ¨£æ»¿è‡‰å‚·ç–¤çš„ç”·äººï¼Œæœ€å¥½å°±åˆ¥å¤šç®¡â€”â€”ä¸éå¦‚æœä½ çœŸçš„æƒ³æ‰¾åˆ°ä»–ï¼Œå°±å¾€è¥¿å—æ–¹å» The Severed Stringã€‚</p>
      <p>ä½ åœ¨ The Severed String æ‰¾åˆ° Drestï¼Œä»–ä¸€é–‹å£å°±å……æ»¿æˆ’å¿ƒï¼Œåå•ä½ åˆ°åº•æƒ³åšä»€éº¼ã€‚ç•¶ä½ æ‹¿å‡ºé‚£ç“¶é…’ï¼Œä»–ç«‹åˆ»æ…Œäº‚åœ°æ‹’çµ•ï¼Œèªªè‡ªå·±æ ¹æœ¬æ²’è¦é€™æ±è¥¿ï¼Œä¸¦æ€¥åˆ‡è¿½å•åˆ°åº•æ˜¯èª°æ´¾ä½ ä¾†çš„ã€‚ä»–çš„è©±èªæ–·æ–·çºŒçºŒï¼Œæœ€å¾Œåªå‰©ä¸‹ç—›è‹¦çš„å‘»åŸè²ã€‚</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>ä»»å‹™ç™¼å¸ƒ</b> å¤é¦¬å°¼ãƒ»æ´›é¦¬å°¼ã€€<small class="muted">æ‹‰è«¾è¥¿äºæ±éƒ¨ (X:21.6, Y:21.1)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="it-wont-work.html">å°‹è¨ªå¤±è½çš„å‚³èªª</a></div>
      <div class="row">æ‰€æœ‰è·æ¥­ï¼ˆä¸å«é™å®šè·ï¼‰ ç­‰ç´š 33 ä»¥ä¸Š</div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="that-weight.html">èŸ²é³´åœ¨è€³ã€é‡æ“”åœ¨å¿ƒ</a></div>
    </div>`
  }
};

const langToggle  = document.getElementById('langToggle');
const pageTitle   = document.getElementById('pageTitle');
const tabBtns     = [...document.querySelectorAll('.tab-btn')];
const panels = {
  story:  document.getElementById('panel-story'),
  acq:    document.getElementById('panel-acq'),
  unlockq:document.getElementById('panel-unlockq'),
  followq:document.getElementById('panel-followq'),
  comments: document.getElementById('panel-comments')
};

function getLang(){ return localStorage.getItem(LANG_KEY) || 'EN'; }
function applyLang(lang){
  const t = i18n[lang] || i18n.EN;
  pageTitle.textContent = t.pageTitle;
  langToggle.textContent = `ğŸŒ ${t.langLabel}`;
  tabBtns.forEach(btn => { btn.textContent = t.tabs[btn.dataset.tab]; });
  const activeBtn = tabBtns.find(b => b.getAttribute('aria-selected')==='true') || tabBtns[0];
  renderPanel(activeBtn.dataset.tab, lang);
}

function wireClamp(panelEl, t){
  const clamp = panelEl.querySelector('.clamp');
  const btn = panelEl.querySelector('[data-role="expand"]');
  if(!clamp || !btn) return;
  function setLabel(){
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    btn.textContent = collapsed ? t.readMore : t.readLess;
  }
  setLabel();
  btn.addEventListener('click', ()=>{
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    clamp.setAttribute('data-collapsed', collapsed ? 'false' : 'true');
    setLabel();
  });
}

function renderPanel(key, lang){
  const t = i18n[lang] || i18n.EN;
  Object.keys(panels).forEach(k => panels[k].classList.remove('active'));
  panels[key].classList.add('active');
  if (key !== 'comments') panels[key].innerHTML = t[key];
  if (key === 'story') wireClamp(panels[key], t);
  if (key === 'comments') loadGiscusForCurrentLang();
}

tabBtns.forEach(btn=>{
  btn.addEventListener('click', ()=>{
    tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
    btn.setAttribute('aria-selected','true');
    renderPanel(btn.dataset.tab, getLang());
  });
});

langToggle.addEventListener('click', ()=>{
  const cur = getLang();
  const next = cur==='EN' ? 'JP' : (cur==='JP' ? 'ZH' : 'EN');
  localStorage.setItem(LANG_KEY, next);
  applyLang(next);
});

applyLang(getLang());

const GISCUS_CFG = {
  repo: 'BELAUG-FFXIV/FFXIV_Library',
  repoId: 'R_kgDOPyh4Kw',
  category: 'General',
  categoryId: 'DIC_kwDOPyh4K84CwPjL',
  theme: 'preferred_color_scheme'
};
function uiLang(code){ return code==='JP' ? 'ja' : (code==='ZH' ? 'zh-TW' : 'en'); }
function loadGiscusForCurrentLang(){
  const mount = document.getElementById('giscus_container');
  if (!mount) return;
  mount.innerHTML = '';
  const langCode = getLang();
  const s = document.createElement('script');
  s.src = 'https://giscus.app/client.js';
  s.setAttribute('data-repo', GISCUS_CFG.repo);
  s.setAttribute('data-repo-id', GISCUS_CFG.repoId);
  s.setAttribute('data-category', GISCUS_CFG.category);
  s.setAttribute('data-category-id', GISCUS_CFG.categoryId);
  s.setAttribute('data-mapping', 'specific');
  s.setAttribute('data-term', location.pathname + 'ï½œ' + langCode);
  s.setAttribute('data-reactions-enabled', '1');
  s.setAttribute('data-emit-metadata', '0');
  s.setAttribute('data-input-position', 'bottom');
  s.setAttribute('data-lang', uiLang(langCode));
  s.setAttribute('data-theme', GISCUS_CFG.theme);
  s.setAttribute('crossorigin', 'anonymous');
  s.async = true;
  mount.appendChild(s);
}
</script>
</body>
</html>
