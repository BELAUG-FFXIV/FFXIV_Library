<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Highbridge Times | BELAUG Â· FFXIV Library</title>
  <meta name="description" content="MSQ â€“ Highbridge Times (ARR Patch 2.0)">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root { --bg:#fff8e6; --card:#fff; --fg:#222; --muted:#666; --border:#e5e1d8; --accent:#e11d48; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif;background:var(--bg);color:var(--fg)}
    .container{max-width:1080px;margin:0 auto;padding:0 16px}
    .site-header{border-bottom:1px solid var(--border);background:#fff9edb3;backdrop-filter:saturate(120%) blur(6px);position:sticky;top:0;z-index:10}
    .nav{display:flex;align-items:center;justify-content:space-between;height:60px}
    .left{display:flex;align-items:center;gap:12px}
    .home{border:1px solid var(--border);background:#fff;padding:4px 8px;border-radius:8px;text-decoration:none;color:var(--fg);font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex;align-items:center;gap:8px}
    .icon-btn{background:none;border:none;cursor:pointer;font-size:14px;padding:6px 10px;border-radius:8px}
    .icon-btn:hover{background:#fff;border:1px solid var(--border)}
    .main{padding:20px 0 40px}
    .grid{display:grid;grid-template-columns:1.1fr 1fr;gap:20px;align-items:start}
    @media (max-width:900px){
      .grid{grid-template-columns:1fr}
      .video-wrap{position:relative;padding-top:56.25%}
      .video-wrap iframe{position:absolute;inset:0;width:100%;height:100%}
    }
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px;border-bottom:1px solid var(--border);font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%;height:420px;border:0;display:block;border-radius:16px}
    .tabs{display:flex;gap:8px;padding:12px 12px 0;flex-wrap:wrap}
    .tab-btn{background:#fff;border:1px solid var(--border);color:var(--fg);border-radius:999px;padding:8px 14px;cursor:pointer;font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent);color:#fff;background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex;flex-direction:column;gap:10px}
    .stack .row{padding:12px 14px;border:1px dashed var(--border);border-radius:12px;background:#fffdf6}
    .row b{display:inline-block;min-width:130px}
    .muted{color:var(--muted)}
    .link{color:#0b60d8;text-decoration:none}
    .link:hover{text-decoration:underline}
    /* å±•é–‹/æ”¶åˆ */
    .clamp{position:relative; max-height:360px; overflow:hidden}
    .clamp[data-collapsed="false"]{max-height:none}
    .clamp[data-collapsed="true"]::after{
      content:""; position:absolute; left:0; right:0; bottom:0; height:72px;
      background:linear-gradient(to bottom, rgba(255,255,255,0), var(--card)); pointer-events:none;
    }
    .expand-wrap{ margin-top:12px; }
    .expand-btn{
      display:inline-block; padding:8px 14px; border-radius:10px;
      background:var(--card); border:1px solid var(--border); cursor:pointer; font-weight:600;
    }
    .expand-btn:hover{ background:#fffef8; }
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">ğŸ  Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="åˆ‡æ›èªè¨€">ğŸŒ EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <!-- å·¦ï¼šå½±ç‰‡ -->
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/8P-M6A5N6vU"
              title="Highbridge Times" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- å³ï¼šæ¨™é¡Œ + Tabs -->
      <section class="card">
        <div class="hd" id="pageTitle">Highbridge Times</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true"  data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Acquisition</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlockq">Unlock Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="followq">Follow-Up Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="comments">Comments</button>
        </div>
        <div class="bd">
          <div id="panel-story"   class="tab-panel active"></div>
          <div id="panel-acq"     class="tab-panel"></div>
          <div id="panel-unlockq" class="tab-panel"></div>
          <div id="panel-followq" class="tab-panel"></div>
          <div id="panel-comments" class="tab-panel">
            <div id="giscus_container" style="min-height:320px;"></div>
          </div>
        </div>
      </section>
    </div>
  </main>

<script>
const LANG_KEY = 'ffxiv-guide-lang';
const i18n = {
  EN:{
    langLabel:'EN',
    pageTitle:'Highbridge Times',
    tabs:{ story:'Story', acq:'Acquisition', unlockq:'Unlock Quest', followq:'Follow-Up Quest', comments:'Comments' },
    readMore:'Show more', readLess:'Show less',
    story:`<div class="clamp" data-collapsed="true">
      <p>At Highbridge, Hihibaru laments the decline of his once-hopeful trading post. The Order of Naldâ€™thalâ€™s excavations had promised prosperity, yet constant Qiqirn raids have driven travelers and pilgrims away. Desperate to survive, the merchant presses his wares upon you before reluctantly admitting he knows little of the masked man.</p>
      <p>Your search among the local merchants yields little more than rumor. Whispers speak of a figure cloaked in black, glimpsed not only near Highbridge but across Thanalan, always fleeting, always elusive.</p>
      <p>When you return, Hihibaruâ€™s frustration softens to sincerity. He confides that the raids have grown too frequent and too well-coordinated to be mere coincidence, and he suspects a hidden hand at work. Though self-interested by nature, he promises to watch for any sign of the masked strangerâ€”and to send word should he uncover the truth.</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>Quest Giver</b> Hihibaru <small class="muted">(Eastern Thanalan, X: 20.2 Y: 21.3)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="shadow-of-darkness.html">Shadow of Darkness</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="where-there-is-smoke.html">Where There Is Smoke</a></div>
    </div>`
  },
  JP:{
    langLabel:'JP',
    pageTitle:'æ©‹ä¸Šã®è¨¼è¨€',
    tabs:{ story:'ã‚¹ãƒˆãƒ¼ãƒªãƒ¼', acq:'å…¥æ‰‹æ–¹æ³•', unlockq:'é–‹æ”¾ã‚¯ã‚¨ã‚¹ãƒˆ', followq:'å¾Œç¶šã‚¯ã‚¨ã‚¹ãƒˆ', comments:'ã‚³ãƒ¡ãƒ³ãƒˆ' },
    readMore:'å…¨æ–‡ã‚’è¡¨ç¤º', readLess:'æŠ˜ã‚ŠãŸãŸã‚€',
    story:`<div class="clamp" data-collapsed="true">
      <p>ãƒã‚¤ãƒ–ãƒªãƒƒã‚¸ã«åˆ°ç€ã—ãŸã‚ãªãŸã‚’è¿ãˆãŸã®ã¯ã€å•†äººãƒ’ãƒ’ãƒãƒ«ã®å˜†ãã ã£ãŸã€‚ãƒŠãƒ«ã‚¶ãƒ«æ•™å›£ã«ã‚ˆã‚‹éºè·¡ã®ç™ºæ˜ã§å·¡ç¤¼è€…ãŒå¢—ãˆã€ç”ºãŒè³‘ã‚ã†ã¨å¤¢è¦‹ã¦ã„ãŸå½¼ã ãŒã€çµ¶ãˆé–“ãªã„ã‚­ã‚­ãƒ«ãƒ³æ—ã®è¥²æ’ƒã«ã‚ˆã£ã¦äººã€…ã¯é ã–ã‹ã£ã¦ã—ã¾ã£ãŸã®ã ã€‚å•†å£²ãŒç«‹ã¡è¡Œã‹ãšã€ã‚„ã‘æ°—å‘³ã«å•†å“ã‚’å‹§ã‚ã‚‹ãƒ’ãƒ’ãƒãƒ«ã ã£ãŸãŒã€ã‚„ãŒã¦ã€Œä»®é¢ã®ç”·ã€ã«ã¤ã„ã¦ã¯ä½•ã‚‚çŸ¥ã‚‰ã¬ã¨ç™½çŠ¶ã™ã‚‹ã€‚</p>
      <p>ä»–ã®å•†äººãŸã¡ã‚’è¨ªã­ã¦ã‚‚å¾—ã‚‰ã‚Œã‚‹ã®ã¯å™‚ã°ã‹ã‚Šã€‚é»’ã„ãƒ­ãƒ¼ãƒ–ã‚’ã¾ã¨ã„ã€å„åœ°ã§ç›®æ’ƒã•ã‚Œã‚‹è¬ã®äººç‰©â”€â”€ãƒã‚¤ãƒ–ãƒªãƒƒã‚¸ã®ã¿ãªã‚‰ãšã€ã‚¶ãƒŠãƒ©ãƒ¼ãƒ³å…¨åŸŸã«ç¾ã‚Œã‚‹ã¨ã„ã†ãŒã€æ­£ä½“ã‚’çŸ¥ã‚‹è€…ã¯ã„ãªã„ã€‚</p>
      <p>å†ã³ãƒ’ãƒ’ãƒãƒ«ã®ã‚‚ã¨ã«æˆ»ã‚‹ã¨ã€å½¼ã®æ…‹åº¦ã¯ã‚„ã‚„å’Œã‚‰ã„ã§ã„ãŸã€‚è¿‘é ƒã®ã‚­ã‚­ãƒ«ãƒ³æ—ã®è¥²æ’ƒãŒã‚ã¾ã‚Šã«ã‚‚é »ç¹ã§çµ±ç‡ãŒå–ã‚Œã¦ã„ã‚‹ã“ã¨ã‹ã‚‰ã€èƒŒå¾Œã«ä½•è€…ã‹ã®æŒ‡ç¤ºãŒã‚ã‚‹ã®ã§ã¯ã¨èªã‚‹ã€‚è‡ªåˆ†æœ¬ä½ã§ã¯ã‚ã‚‹ãŒæ‚ªäººã§ã¯ãªã„ã¨è‹¦ç¬‘ã—ã¤ã¤ã€ã€Œä»®é¢ã®ç”·ã€ã«é–¢ã™ã‚‹æƒ…å ±ãŒå…¥ã‚Œã°çœŸã£å…ˆã«çŸ¥ã‚‰ã›ã‚‹ã¨ç´„æŸã—ã¦ãã‚ŒãŸã€‚</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>ã‚¯ã‚¨ã‚¹ãƒˆç™ºè¡Œ</b> ãƒ’ãƒ’ãƒãƒ«ã€€æ±ã‚¶ãƒŠãƒ©ãƒ¼ãƒ³ <small class="muted">(X: 20.2 Y: 21.3)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="shadow-of-darkness.html">ä¸å‰ãªæ°—é…</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="where-there-is-smoke.html">é™½å‹•ã®ç‹¼ç…™</a></div>
    </div>`
  },
  ZH:{
    langLabel:'ZH',
    pageTitle:'æ©‹ä¸Šæµè¨€èˆ‡çœŸç›¸',
    tabs:{ story:'æ•…äº‹æ¦‚è¦', acq:'å–å¾—æ–¹å¼', unlockq:'è§£é–ä»»å‹™', followq:'å¾ŒçºŒä»»å‹™', comments:'ç•™è¨€' },
    readMore:'å±•é–‹å…¨æ–‡', readLess:'æ”¶åˆå…§å®¹',
    story:`<div class="clamp" data-collapsed="true">
      <p>åœ¨ Highbridgeï¼Œå•†äºº Hihibaru æ„Ÿå˜†æ˜”æ—¥çš„å¸Œæœ›åŒ–ç‚ºçµ•æœ›ã€‚æ›¾å›  Naldâ€™thal æ•™åœ˜çš„éºè·¡é–‹æŒ–è€ŒæœŸå¾…ç¹æ¦®ï¼Œå¦‚ä»Šå»å›  Qiqirn çš„ä¸æ–·è¥²æ“Šï¼Œä»¤æ—…äººèˆ‡ä¿¡å¾’é¿ä¹‹ä¸åŠã€‚ç‚ºäº†æ’éå›°å¢ƒï¼Œä»–ä¸€é‚Šè‹¦ç¬‘æ¨éŠ·å•†å“ï¼Œä¸€é‚Šå¦è¨€è‡ªå·±å°é‚£åæˆ´é¢å…·ä¹‹äººæ‰€çŸ¥ç”šå°‘ã€‚</p>
      <p>ä½ å‘å…¶ä»–å•†äººæ‰“æ¢æ¶ˆæ¯ï¼Œå¾—åˆ°çš„ä¹Ÿåªæ˜¯äº›é›¶æ•£å‚³èã€‚æœ‰äººåœ¨é»‘å¤œä¸­è¦‹éæŠ«è‘—é»‘è¢çš„ç”·å­ï¼Œæ“šèªªä»–ä¸åƒ…å‡ºç¾åœ¨ Highbridgeï¼Œä¹Ÿåœ¨ Thanalan å„åœ°ç•™ä¸‹è¹¤è·¡â€”â€”ç¥ç§˜è€Œé›£ä»¥æ‰æ‘¸ã€‚</p>
      <p>å›åˆ° Hihibaru èº«é‚Šï¼Œä»–çš„èªæ°£è½‰ç‚ºçœŸèª ã€‚ä»–æ‡·ç–‘è¿‘æœŸé »ç¹ä¸”æœ‰çµ„ç¹”çš„ Qiqirn è¥²æ“ŠèƒŒå¾Œå¦æœ‰é»‘æ‰‹æ“æ§ã€‚é›–èªªä»–å¤šåŠåªé¡§è‡ªèº«åˆ©ç›Šï¼Œå»ä»æ‰¿è«¾è‹¥å†ç™¼ç¾é—œæ–¼é‚£åé»‘è¡£ä¹‹å½±çš„ä»»ä½•æ¶ˆæ¯ï¼Œæœƒç¬¬ä¸€æ™‚é–“é€šçŸ¥ä½ ã€‚</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>ä»»å‹™ç™¼å¸ƒ</b> å¸Œå¸Œå·´é­¯ã€€è–©ç´è˜­æ±éƒ¨ <small class="muted">(X: 20.2 Y: 21.3)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="shadow-of-darkness.html">ä¸ç¥¥çš„æ°£æ¯</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="where-there-is-smoke.html">ç‹¼ç…™å››èµ·</a></div>
    </div>`
  }
};

const langToggle  = document.getElementById('langToggle');
const pageTitle   = document.getElementById('pageTitle');
const tabBtns     = [...document.querySelectorAll('.tab-btn')];
const panels = {
  story:  document.getElementById('panel-story'),
  acq:    document.getElementById('panel-acq'),
  unlockq:document.getElementById('panel-unlockq'),
  followq:document.getElementById('panel-followq'),
  comments: document.getElementById('panel-comments')
};

function getLang(){ return localStorage.getItem(LANG_KEY) || 'EN'; }
function applyLang(lang){
  const t = i18n[lang] || i18n.EN;
  pageTitle.textContent = t.pageTitle;
  langToggle.textContent = `ğŸŒ ${t.langLabel}`;
  tabBtns.forEach(btn => { btn.textContent = t.tabs[btn.dataset.tab]; });
  const activeBtn = tabBtns.find(b => b.getAttribute('aria-selected')==='true') || tabBtns[0];
  renderPanel(activeBtn.dataset.tab, lang);
}

function wireClamp(panelEl, t){
  const clamp = panelEl.querySelector('.clamp');
  const btn = panelEl.querySelector('[data-role="expand"]');
  if(!clamp || !btn) return;
  function setLabel(){
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    btn.textContent = collapsed ? t.readMore : t.readLess;
  }
  setLabel();
  btn.addEventListener('click', ()=>{
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    clamp.setAttribute('data-collapsed', collapsed ? 'false' : 'true');
    setLabel();
  });
}

function renderPanel(key, lang){
  const t = i18n[lang] || i18n.EN;
  Object.keys(panels).forEach(k => panels[k].classList.remove('active'));
  panels[key].classList.add('active');
  if (key !== 'comments') panels[key].innerHTML = t[key];
  if (key === 'story') wireClamp(panels[key], t);
  if (key === 'comments') loadGiscusForCurrentLang();
}

tabBtns.forEach(btn=>{
  btn.addEventListener('click', ()=>{
    tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
    btn.setAttribute('aria-selected','true');
    renderPanel(btn.dataset.tab, getLang());
  });
});

langToggle.addEventListener('click', ()=>{
  const cur = getLang();
  const next = cur==='EN' ? 'JP' : (cur==='JP' ? 'ZH' : 'EN');
  localStorage.setItem(LANG_KEY, next);
  applyLang(next);
});

applyLang(getLang());

/* === Giscusï¼šComments åˆ†é  === */
const GISCUS_CFG = {
  repo: 'BELAUG-FFXIV/FFXIV_Library',
  repoId: 'R_kgDOPyh4Kw',
  category: 'General',
  categoryId: 'DIC_kwDOPyh4K84CwPjL',
  theme: 'preferred_color_scheme'
};
function uiLang(code){ return code==='JP' ? 'ja' : (code==='ZH' ? 'zh-TW' : 'en'); }
function loadGiscusForCurrentLang(){
  const mount = document.getElementById('giscus_container');
  if (!mount) return;
  mount.innerHTML = '';
  const langCode = getLang();
  const s = document.createElement('script');
  s.src = 'https://giscus.app/client.js';
  s.setAttribute('data-repo', GISCUS_CFG.repo);
  s.setAttribute('data-repo-id', GISCUS_CFG.repoId);
  s.setAttribute('data-category', GISCUS_CFG.category);
  s.setAttribute('data-category-id', GISCUS_CFG.categoryId);
  s.setAttribute('data-mapping', 'specific');
  s.setAttribute('data-term', location.pathname + 'ï½œ' + langCode);
  s.setAttribute('data-reactions-enabled', '1');
  s.setAttribute('data-emit-metadata', '0');
  s.setAttribute('data-input-position', 'bottom');
  s.setAttribute('data-lang', uiLang(langCode));
  s.setAttribute('data-theme', GISCUS_CFG.theme);
  s.setAttribute('crossorigin', 'anonymous');
  s.async = true;
  mount.appendChild(s);
}
</script>
</body>
</html>
