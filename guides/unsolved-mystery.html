<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Unsolved Mystery | BELAUG Â· FFXIV Library</title>
  <meta name="description" content="MSQ â€“ Unsolved Mystery (ARR Patch 2.0)">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root { --bg:#fff8e6; --card:#fff; --fg:#222; --muted:#666; --border:#e5e1d8; --accent:#e11d48; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif;background:var(--bg);color:var(--fg)}
    .container{max-width:1080px;margin:0 auto;padding:0 16px}
    .site-header{border-bottom:1px solid var(--border);background:#fff9edb3;backdrop-filter:saturate(120%) blur(6px);position:sticky;top:0;z-index:10}
    .nav{display:flex;align-items:center;justify-content:space-between;height:60px}
    .left{display:flex;align-items:center;gap:12px}
    .home{border:1px solid var(--border);background:#fff;padding:4px 8px;border-radius:8px;text-decoration:none;color:var(--fg);font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex;align-items:center;gap:8px}
    .icon-btn{background:none;border:none;cursor:pointer;font-size:14px;padding:6px 10px;border-radius:8px}
    .icon-btn:hover{background:#fff;border:1px solid var(--border)}
    .main{padding:20px 0 40px}
    .grid{display:grid;grid-template-columns:1.1fr 1fr;gap:20px;align-items:start}
    @media (max-width:900px){
      .grid{grid-template-columns:1fr}
      .video-wrap{position:relative;padding-top:56.25%}
      .video-wrap iframe{position:absolute;inset:0;width:100%;height:100%}
    }
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px;border-bottom:1px solid var(--border);font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%;height:420px;border:0;display:block;border-radius:16px}
    .tabs{display:flex;gap:8px;padding:12px 12px 0;flex-wrap:wrap}
    .tab-btn{background:#fff;border:1px solid var(--border);color:var(--fg);border-radius:999px;padding:8px 14px;cursor:pointer;font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent);color:#fff;background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex;flex-direction:column;gap:10px}
    .stack .row{padding:12px 14px;border:1px dashed var(--border);border-radius:12px;background:#fffdf6}
    .row b{display:inline-block;min-width:130px}
    .muted{color:var(--muted)}
    .link{color:#0b60d8;text-decoration:none}
    .link:hover{text-decoration:underline}

    /* ==== Story å±•é–‹ / æ”¶åˆ ==== */
    .clamp{ position:relative; max-height:360px; overflow:hidden; }
    .clamp[data-collapsed="false"]{ max-height:none; }
    .clamp[data-collapsed="true"]::after{
      content:""; position:absolute; left:0; right:0; bottom:0; height:72px;
      background:linear-gradient(to bottom, rgba(255,255,255,0), var(--card));
      pointer-events:none;
    }
    .expand-wrap{ margin-top:12px; }
    .expand-btn{
      display:inline-block; padding:8px 14px; border-radius:10px;
      background:var(--card); border:1px solid var(--border); cursor:pointer;
      font-weight:600;
    }
    .expand-btn:hover{ background:#fffef8; }
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">ğŸ  Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="åˆ‡æ›èªè¨€">ğŸŒ EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <!-- å·¦ï¼šå½±ç‰‡ -->
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/clpH-XOtziA"
              title="Unsolved Mystery" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- å³ï¼šæ¨™é¡Œ + Tabs -->
      <section class="card">
        <div class="hd" id="pageTitle">Unsolved Mystery</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true"  data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Acquisition</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlockq">Unlock Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="followq">Follow-Up Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="comments">Comments</button>
        </div>
        <div class="bd">
          <div id="panel-story"     class="tab-panel active"></div>
          <div id="panel-acq"       class="tab-panel"></div>
          <div id="panel-unlockq"   class="tab-panel"></div>
          <div id="panel-followq"   class="tab-panel"></div>
          <div id="panel-comments"  class="tab-panel">
            <div id="giscus_container" style="min-height:320px;"></div>
          </div>
        </div>
      </section>
    </div>
  </main>

<script>
const LANG_KEY = 'ffxiv-guide-lang';
const i18n = {
  EN:{
    langLabel:'EN',
    pageTitle:'Unsolved Mystery',
    tabs:{ story:'Story', acq:'Acquisition', unlockq:'Unlock Quest', followq:'Follow-Up Quest', comments:'Comments' },
    readMore:'Show more', readLess:'Show less',
    story:`<div class="clamp" data-collapsed="true">
      <p>At Camp Drybone, you meet Isembard, the de facto leader who watches over the people here. He greets you gravely, explaining that Minfilia has named the Amaljâ€™aa as the culprits behind the recent disappearances. Much harm has already been dealt to these lands by their hands, and though the Immortal Flames burn where they may, their light cannot reach all places at once.</p>
      <p>He tells you of brutal murders at the Church of Saint Adama Landamaâ€”innocents slain as they came only to pay their respects to the dead. The poor souls deserve a proper burial, yet Isembard cannot risk it himself, uncertain whether the Amaljâ€™aa still linger nearby.</p>
      <p>He asks you, in confidence, to recover the bodies on the eastern road. If the Twelve are willing, you may even uncover what the Amaljâ€™aa truly seek in this region.</p>
      <p>You go, brave the danger, and return with the remains. Isembard thanks you sincerely, saying that you have performed a noble deed and that the souls may now find peace. Yet he cannot hide his concern: your report confirms the Amaljâ€™aaâ€™s presence. Ordinary raiding parties could not account for so many missing people; there must be another hand in play. The mystery deepens, and your investigation must continue.</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>Quest Giver</b> Isembard <small class="muted">(Eastern Thanalan, X:13.9, Y:23.6)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="a-wild-rose-by-any-other-name.html">A Wild Rose by Any Other Name</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="what-poor-people-think.html">What Poor People Think</a></div>
    </div>`
  },
  JP:{
    langLabel:'JP',
    pageTitle:'å¹²ã‹ã‚‰ã³ãŸéª¨',
    tabs:{ story:'ã‚¹ãƒˆãƒ¼ãƒªãƒ¼', acq:'å…¥æ‰‹æ–¹æ³•', unlockq:'é–‹æ”¾ã‚¯ã‚¨ã‚¹ãƒˆ', followq:'å¾Œç¶šã‚¯ã‚¨ã‚¹ãƒˆ', comments:'ã‚³ãƒ¡ãƒ³ãƒˆ' },
    readMore:'å…¨æ–‡ã‚’è¡¨ç¤º', readLess:'æŠ˜ã‚ŠãŸãŸã‚€',
    story:`<div class="clamp" data-collapsed="true">
      <p>ã‚­ãƒ£ãƒ³ãƒ—ãƒ»ãƒ‰ãƒ©ã‚¤ãƒœãƒ¼ãƒ³ã§ã€ã‚ãªãŸã¯äººã€…ã®ã¾ã¨ã‚å½¹ã§ã‚ã‚‹ã‚¤ã‚»ãƒ³ãƒãƒ¼ãƒ‰ã¨å‡ºä¼šã†ã€‚å½¼ã¯å³ã—ã„é¢æŒã¡ã§ã€æœ€è¿‘ã®å¤±è¸ªäº‹ä»¶ã®èƒŒå¾Œã«ã‚¢ãƒãƒ«ã‚¸ãƒ£æ—ãŒã„ã‚‹ã¨ãƒŸãƒ³ãƒ•ã‚£ãƒªã‚¢ãŒåæŒ‡ã—ã—ãŸã“ã¨ã‚’ä¼ãˆã‚‹ã€‚ã‚¤ãƒ¢ãƒ¼ã‚¿ãƒ«ãƒ»ãƒ•ãƒ¬ã‚¤ãƒ ã‚ºãŒå„åœ°ã§ç«ã‚’ç¯ã—ã¦ã‚‚ã€ãã®å…‰ã¯ã™ã¹ã¦ã®å ´æ‰€ã‚’å®ˆã‚Œã‚‹ã‚ã‘ã§ã¯ãªã„ã€‚</p>
      <p>å½¼ã¯è–ã‚¢ãƒ€ãƒãƒ»ãƒ©ãƒ³ãƒ€ãƒç¤¼æ‹å ‚ã§èµ·ããŸæƒ¨æ®ºã‚’èªã‚‹â”€â”€æ­»è€…ã«ç¥ˆã‚Šã‚’æ§ã’ã«æ¥ãŸã ã‘ã®ç„¡è¾œã®äººã€…ãŒå‘½ã‚’è½ã¨ã—ãŸã®ã ã€‚æœ¬æ¥ãªã‚‰å½¼è‡ªèº«ãŒéºä½“ã‚’åŸ‹è‘¬ã—ãŸã„ãŒã€ã‚¢ãƒãƒ«ã‚¸ãƒ£æ—ãŒã¾ã æ½œã‚“ã§ã„ã‚‹ã‹ã‚‚ã—ã‚Œãšèº«å‹•ããŒå–ã‚Œãªã„ã¨ã„ã†ã€‚</p>
      <p>æ±ã®é“ã«æ¨ªãŸã‚ã‚‹éºä½“ã‚’å›åã—ã¦ã»ã—ã„ã€ã¨å½¼ã¯é ¼ã‚€ã€‚åäºŒç¥ãŒå°ããªã‚‰ã€ã“ã®åœ°ã§ã‚¢ãƒãƒ«ã‚¸ãƒ£æ—ãŒä½•ã‚’æ±‚ã‚ã¦ã„ã‚‹ã®ã‹ã‚‚è¦‹ãˆã¦ãã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã€‚</p>
      <p>ã‚ãªãŸã¯å±é™ºã‚’å†’ã—ã¦éºéª¸ã‚’å›åã—ã€æˆ»ã£ã¦ãã‚‹ã€‚ã‚¤ã‚»ãƒ³ãƒãƒ¼ãƒ‰ã¯æ·±ãæ„Ÿè¬ã—ã€ã“ã‚Œã§é­‚ãŒå®‰ã‚‰ãã‚’å¾—ã‚‰ã‚Œã‚‹ã¨èªã‚‹ã€‚ã—ã‹ã—åŒæ™‚ã«æ†‚ã„ã‚’éš ã›ãªã„ã€‚å ±å‘Šã«ã‚ˆã‚Šã‚¢ãƒãƒ«ã‚¸ãƒ£æ—ã®å­˜åœ¨ãŒç¢ºå®šã—ãŸãŒã€æ™®é€šã®è¥²æ’ƒéšŠã§ã¯èª¬æ˜ã§ããªã„è¦æ¨¡ã®å¤±è¸ªã ã€‚è£ã«åˆ¥ã®æ‰‹ãŒã‚ã‚‹ã«é•ã„ãªã„â”€â”€è¬ã¯æ·±ã¾ã‚‹ã°ã‹ã‚Šã ã€‚</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>ã‚¯ã‚¨ã‚¹ãƒˆç™ºè¡Œ</b> ã‚¤ã‚»ãƒ³ãƒãƒ¼ãƒ‰ <small class="muted">ï¼ˆæ±ã‚¶ãƒŠãƒ©ãƒ¼ãƒ³, X:13.9, Y:23.6ï¼‰</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="a-wild-rose-by-any-other-name.html">ã‚­ãƒ£ãƒ³ãƒ—ãƒ»ãƒ‰ãƒ©ã‚¤ãƒœãƒ¼ãƒ³ã¸</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="what-poor-people-think.html">è²§ã—ãè€…ã®è€ƒãˆ</a></div>
    </div>`
  },
  ZH:{
    langLabel:'ZH',
    pageTitle:'ç¥ç¥•æ¯éª¸',
    tabs:{ story:'æ•…äº‹æ¦‚è¦', acq:'å–å¾—æ–¹å¼', unlockq:'è§£é–ä»»å‹™', followq:'å¾ŒçºŒä»»å‹™', comments:'ç•™è¨€' },
    readMore:'å±•é–‹å…¨æ–‡', readLess:'æ”¶åˆå…§å®¹',
    story:`<div class="clamp" data-collapsed="true">
      <p>åœ¨ Camp Dryboneï¼Œä½ é‡è¦‹äº†ç•¶åœ°å¯¦éš›ç…§é¡§å±…æ°‘çš„ Isembardã€‚ä»–ç¥æƒ…åš´è‚…åœ°å‘Šè¨´ä½ ï¼šMinfilia å·²ç¶“æŒ‡èª Amaljâ€™aa æ˜¯è¿‘æœŸå¤±è¹¤æ¡ˆçš„å…ƒå…‡ã€‚é€™ç‰‡åœŸåœ°æ—©å·²å› ä»–å€‘çš„æš´è¡Œè€Œéé«”é±—å‚·ï¼ŒImmortal Flames é›–åœ¨å„åœ°ç‡ƒç‡’å®ˆè­·ï¼Œå»ç„¡æ³•åŒæ™‚åº‡è­·æ‰€æœ‰è§’è½ã€‚</p>
      <p>ä»–æåˆ°åœ¨ Church of Saint Adama Landama ç™¼ç”Ÿçš„æ…˜æ¡ˆâ”€â”€é‚£äº›åªæ˜¯å‰ä¾†ç¥­æ‹œäº¡è€…çš„ç„¡è¾œä¹‹äººï¼Œå»æ…˜é­æ®ºå®³ã€‚Isembard åŸæƒ³è¦ªè‡ªåŸ‹è‘¬éºé«”ï¼Œå»æ“”å¿ƒ Amaljâ€™aa ä»åœ¨é™„è¿‘å¾˜å¾Šè€Œå‹•å½ˆä¸å¾—ã€‚</p>
      <p>ä»–è«‹æ±‚ä½ ä»£ä»–æ”¶æ®®æ±å´é“è·¯ä¸Šçš„äº¡è€…éºéª¸ï¼›è‹¥åäºŒç¥å‚æ†ï¼Œæˆ–è¨±é‚„èƒ½ç™¼ç¾ Amaljâ€™aa åœ¨æ­¤åœ°çœŸæ­£çš„åœ–è¬€ã€‚</p>
      <p>ä½ è¸ä¸Šå±éšªçš„è·¯é€”ï¼ŒæˆåŠŸå¸¶å›éºéª¸ã€‚Isembard ç”±è¡·æ„Ÿè¬ï¼Œèªªä½ å®Œæˆäº†ä¸€ä»¶å´‡é«˜çš„å–„è¡Œï¼Œä½¿äº¡éˆå¾—ä»¥å®‰æ¯ã€‚ä½†ä»–çš„æ†‚æ…®æ›´æ·±äº†ï¼šä½ çš„å›å ±è­‰å¯¦ Amaljâ€™aa ç¢ºå¯¦å­˜åœ¨ï¼Œè€Œåƒ…æ†‘ä¸€èˆ¬è¥²æ“ŠéšŠï¼Œç„¡æ³•è§£é‡‹å¦‚æ­¤é¾å¤§çš„å¤±è¹¤æ•¸é‡ã€‚é€™èƒŒå¾Œå¿…å®šæœ‰å¦ä¸€éš»æ‰‹åœ¨æ“ç¸±â”€â”€è¬åœ˜æ„ˆåŠ æ·±æ²‰ï¼Œä½ çš„èª¿æŸ¥ä»é ˆç¹¼çºŒã€‚</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>ä»»å‹™ç™¼å¸ƒ</b> ä¼Šæ£®å·´å¾· <small class="muted">ï¼ˆè–©ç´è˜­æ±éƒ¨, X:13.9, Y:23.6ï¼‰</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="a-wild-rose-by-any-other-name.html">é‡è–”è–‡ä¹‹èª“</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="what-poor-people-think.html">è²§æ°‘çš„å¿ƒè²</a></div>
    </div>`
  }
};

const langToggle  = document.getElementById('langToggle');
const pageTitle   = document.getElementById('pageTitle');
const tabBtns     = [...document.querySelectorAll('.tab-btn')];
const panels = {
  story:  document.getElementById('panel-story'),
  acq:    document.getElementById('panel-acq'),
  unlockq:document.getElementById('panel-unlockq'),
  followq:document.getElementById('panel-followq'),
  comments:document.getElementById('panel-comments')
};

function getLang(){ return localStorage.getItem(LANG_KEY) || 'EN'; }

function applyLang(lang){
  const t = i18n[lang] || i18n.EN;
  pageTitle.textContent = t.pageTitle;
  langToggle.textContent = `ğŸŒ ${t.langLabel}`;
  tabBtns.forEach(btn => { btn.textContent = t.tabs[btn.dataset.tab]; });
  const activeBtn = tabBtns.find(b => b.getAttribute('aria-selected')==='true') || tabBtns[0];
  renderPanel(activeBtn.dataset.tab, lang);
}

function wireClamp(panelEl, t){
  const clamp = panelEl.querySelector('.clamp');
  const btn = panelEl.querySelector('[data-role="expand"]');
  if(!clamp || !btn) return;
  const setLabel = ()=>{
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    btn.textContent = collapsed ? t.readMore : t.readLess;
  };
  setLabel();
  btn.addEventListener('click', ()=>{
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    clamp.setAttribute('data-collapsed', collapsed ? 'false' : 'true');
    setLabel();
  });
}

function renderPanel(key, lang){
  const t = i18n[lang] || i18n.EN;
  Object.keys(panels).forEach(k => panels[k].classList.remove('active'));
  panels[key].classList.add('active');
  if (key !== 'comments') panels[key].innerHTML = t[key];
  if (key === 'story') wireClamp(panels[key], t);
  if (key === 'comments') loadGiscusForCurrentLang();
}

tabBtns.forEach(btn=>{
  btn.addEventListener('click', ()=>{
    tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
    btn.setAttribute('aria-selected','true');
    renderPanel(btn.dataset.tab, getLang());
  });
});

langToggle.addEventListener('click', ()=>{
  const cur = getLang();
  const next = cur==='EN' ? 'JP' : (cur==='JP' ? 'ZH' : 'EN');
  localStorage.setItem(LANG_KEY, next);
  applyLang(next);
});

applyLang(getLang());

/* === Giscusï¼šComments åˆ†é ï¼ˆèˆ‡å…¶ä»–é ä¸€è‡´ï¼‰ === */
const GISCUS_CFG = {
  repo: 'belaug-ffxiv/FFXIV_Library',
  repoId: 'R_kgD0Pyh4Kw',
  category: 'General',
  categoryId: 'DIC_kwD0Pyh4K84CwPjL',
  theme: 'preferred_color_scheme'
};
function uiLang(code){ return code==='JP' ? 'ja' : (code==='ZH' ? 'zh-TW' : 'en'); }
function loadGiscusForCurrentLang(){
  const mount = document.getElementById('giscus_container');
  if (!mount) return;
  mount.innerHTML = '';
  const langCode = getLang();
  const s = document.createElement('script');
  s.src = 'https://giscus.app/client.js';
  s.setAttribute('data-repo', GISCUS_CFG.repo);
  s.setAttribute('data-repo-id', GISCUS_CFG.repoId);
  s.setAttribute('data-category', GISCUS_CFG.category);
  s.setAttribute('data-category-id', GISCUS_CFG.categoryId);
  s.setAttribute('data-mapping', 'specific');
  s.setAttribute('data-term', location.pathname + 'ï½œ' + langCode);
  s.setAttribute('data-reactions-enabled', '1');
  s.setAttribute('data-emit-metadata', '0');
  s.setAttribute('data-input-position', 'bottom');
  s.setAttribute('data-lang', uiLang(langCode));
  s.setAttribute('data-theme', GISCUS_CFG.theme);
  s.setAttribute('crossorigin', 'anonymous');
  s.async = true;
  mount.appendChild(s);
}
</script>
</body>
</html>
