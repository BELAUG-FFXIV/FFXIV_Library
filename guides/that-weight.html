<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>That Weight | BELAUG Â· FFXIV Library</title>
  <meta name="description" content="MSQ â€“ That Weight (ARR Patch 2.0)">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root { --bg:#fff8e6; --card:#fff; --fg:#222; --muted:#666; --border:#e5e1d8; --accent:#e11d48; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif;background:var(--bg);color:var(--fg)}
    .container{max-width:1080px;margin:0 auto;padding:0 16px}
    .site-header{border-bottom:1px solid var(--border);background:#fff9edb3;backdrop-filter:saturate(120%) blur(6px);position:sticky;top:0;z-index:10}
    .nav{display:flex;align-items:center;justify-content:space-between;height:60px}
    .left{display:flex;align-items:center;gap:12px}
    .home{border:1px solid var(--border);background:#fff;padding:4px 8px;border-radius:8px;text-decoration:none;color:var(--fg);font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex;align-items:center;gap:8px}
    .icon-btn{background:none;border:none;cursor:pointer;font-size:14px;padding:6px 10px;border-radius:8px}
    .icon-btn:hover{background:#fff;border:1px solid var(--border)}
    .main{padding:20px 0 40px}
    .grid{display:grid;grid-template-columns:1.1fr 1fr;gap:20px;align-items:start}
    @media (max-width:900px){
      .grid{grid-template-columns:1fr}
      .video-wrap{position:relative;padding-top:56.25%}
      .video-wrap iframe{position:absolute;inset:0;width:100%;height:100%}
    }
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px;border-bottom:1px solid var(--border);font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%;height:420px;border:0;display:block;border-radius:16px}
    .tabs{display:flex;gap:8px;padding:12px 12px 0;flex-wrap:wrap}
    .tab-btn{background:#fff;border:1px solid var(--border);color:var(--fg);border-radius:999px;padding:8px 14px;cursor:pointer;font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent);color:#fff;background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex;flex-direction:column;gap:10px}
    .stack .row{padding:12px 14px;border:1px dashed var(--border);border-radius:12px;background:#fffdf6}
    .row b{display:inline-block;min-width:130px}
    .muted{color:var(--muted)}
    .link{color:#0b60d8;text-decoration:none}
    .link:hover{text-decoration:underline}
    .clamp{position:relative; max-height:360px; overflow:hidden}
    .clamp[data-collapsed="false"]{max-height:none}
    .clamp[data-collapsed="true"]::after{
      content:""; position:absolute; left:0; right:0; bottom:0; height:72px;
      background:linear-gradient(to bottom, rgba(255,255,255,0), var(--card)); pointer-events:none;
    }
    .expand-wrap{ margin-top:12px; }
    .expand-btn{
      display:inline-block; padding:8px 14px; border-radius:10px;
      background:var(--card); border:1px solid var(--border); cursor:pointer; font-weight:600;
    }
    .expand-btn:hover{ background:#fffef8; }
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">ğŸ  Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="åˆ‡æ›èªè¨€">ğŸŒ EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/0LF5MXWwevI"
              title="That Weight" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <section class="card">
        <div class="hd" id="pageTitle">That Weight</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true"  data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Acquisition</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlockq">Unlock Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="followq">Follow-Up Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="comments">Comments</button>
        </div>
        <div class="bd">
          <div id="panel-story"   class="tab-panel active"></div>
          <div id="panel-acq"     class="tab-panel"></div>
          <div id="panel-unlockq" class="tab-panel"></div>
          <div id="panel-followq" class="tab-panel"></div>
          <div id="panel-comments" class="tab-panel">
            <div id="giscus_container" style="min-height:320px;"></div>
          </div>
        </div>
      </section>
    </div>
  </main>

<script>
const LANG_KEY = 'ffxiv-guide-lang';
const i18n = {
  EN:{
    langLabel:'EN',
    pageTitle:'That Weight',
    tabs:{ story:'Story', acq:'Acquisition', unlockq:'Unlock Quest', followq:'Follow-Up Quest', comments:'Comments' },
    readMore:'Show more', readLess:'Show less',
    story:`<div class="clamp" data-collapsed="true">
      <p>You find Drest at the Severed String, trembling and disoriented, muttering about sleepless nights. The incessant buzzing of midges haunts him, keeping him awake. He protests that he never wished to harm anyone, that he will not fight anymoreâ€”he just wants the noise to stop.</p>
      <p>You drive off the swarming insects, and at last his shaking subsides. Drest looks at you with a mixture of gratitude and guilt. He confesses that he and his comrades were on a reconnaissance mission when the Maelstrom ambushed them. They tried to escape, but none survived save him. â€œEven after what we did to your countryâ€¦â€ he murmurs.</p>
      <p>He insists he is not even Garleanâ€”his homeland, too, was conquered by the Empire. Now stranded and broken, he does not wish to die in a foreign jungle. He only wants to go home.</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>Quest Giver</b> Drest <small class="muted">(Eastern La Noscea, X:14.0, Y:30.3)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="give-a-man-a-drink.html">Give a Man a Drink</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="battle-scars.html">Battle Scars</a></div>
    </div>`
  },
  JP:{
    langLabel:'JP',
    pageTitle:'è€³ã«æ®‹ã‚‹ã¯èŸ²ã®éŸ³',
    tabs:{ story:'ã‚¹ãƒˆãƒ¼ãƒªãƒ¼', acq:'å…¥æ‰‹æ–¹æ³•', unlockq:'é–‹æ”¾ã‚¯ã‚¨ã‚¹ãƒˆ', followq:'å¾Œç¶šã‚¯ã‚¨ã‚¹ãƒˆ', comments:'ã‚³ãƒ¡ãƒ³ãƒˆ' },
    readMore:'å…¨æ–‡ã‚’è¡¨ç¤º', readLess:'æŠ˜ã‚ŠãŸãŸã‚€',
    story:`<div class="clamp" data-collapsed="true">
      <p>ã‚»ãƒ´ã‚¡ãƒ¼ãƒ‰ãƒ»ã‚¹ãƒˆãƒªãƒ³ã‚°ã«ã¦ã€ãƒ‰ãƒ¬ã‚¹ãƒˆã¯æ†”æ‚´ã—ãã£ã¦ã„ãŸã€‚ã€Œçœ ã‚Œãªã„â€¦â€¦çœ ã‚‰ã›ã¦ãã‚Œãªã„â€¦â€¦ãƒ–ãƒ¨ã®ç¾½éŸ³ãŒé ­ã‹ã‚‰é›¢ã‚Œãªã„â€¦â€¦ã€ã¨ã†ã‚è¨€ã®ã‚ˆã†ã«å‘Ÿãã€æ€¯ãˆã€éœ‡ãˆã¦ã„ã‚‹ã€‚ã€Œèª°ã‚‚å‚·ã¤ã‘ãŸããªã‹ã£ãŸâ€¦â€¦æˆ¦ã„ãŸããªã„â€¦â€¦ãŸã ã“ã®ç¾½éŸ³ã‚’æ­¢ã‚ã¦ãã‚Œâ€¦â€¦ãƒ–ãƒ¨ã‚’è¿½ã„æ‰•ã£ã¦ãã‚Œâ€¦â€¦ã€ã¨æ‡‡é¡˜ã™ã‚‹ã€‚</p>
      <p>å›ãŒãƒ–ãƒ¨ã‚’æ‰•ã„ã®ã‘ã‚‹ã¨ã€ã‚ˆã†ã‚„ãå½¼ã¯è½ã¡ç€ãã‚’å–ã‚Šæˆ»ã—ã€ã‹ã™ã‚ŒãŸå£°ã§ç¤¼ã‚’è¿°ã¹ã‚‹ã€‚ã€Œå›ã¯åŠ©ã‘ã¦ãã‚ŒãŸâ€¦â€¦ã‚ã‚“ãªã“ã¨ã‚’ã—ãŸä¿ºãŸã¡ã«â€¦â€¦ã€ãã—ã¦å½¼ã¯èªã‚Šå‡ºã™ã€‚è‡ªåˆ†ãŸã¡ã¯åµå¯Ÿä»»å‹™ã®æœ€ä¸­ã€é»’æ¸¦å›£ã«å¥‡è¥²ã•ã‚Œã€å¿…æ­»ã«é€ƒã’ãŸãŒç”Ÿãæ®‹ã£ãŸã®ã¯è‡ªåˆ†ã²ã¨ã‚Šã ã£ãŸã“ã¨ã‚’ã€‚</p>
      <p>ã€Œä¿ºã¯ã‚¬ãƒ¬ãƒãƒ¼ãƒ«äººã§ã™ã‚‰ãªã„â€¦â€¦ã‚ã®å¸å›½ã«ä¿ºãŸã¡ã®åœŸåœ°ã‚‚å¥ªã‚ã‚ŒãŸã‚“ã â€¦â€¦å›ãŸã¡ã¨åŒã˜ã‚ˆã†ã«â€¦â€¦ã€ã¨åéœ²ã—ã€ã€Œã“ã‚“ãªä¸–ç•Œã®è£å´ã®å¯†æ—ã§æ­»ã«ãŸããªã„â€¦â€¦ãŸã â€¦â€¦å®¶ã«å¸°ã‚ŠãŸã„ã ã‘ãªã‚“ã â€¦â€¦ã€ã¨å—šå’½ã™ã‚‹ã®ã ã£ãŸã€‚</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>ã‚¯ã‚¨ã‚¹ãƒˆç™ºè¡Œ</b> ãƒ‰ãƒ¬ã‚¹ãƒˆã€€æ±ãƒ©ãƒã‚·ã‚¢ <small class="muted">(X:14.0, Y:30.3)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="give-a-man-a-drink.html">å¯†æ—ã®ç”·</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="battle-scars.html">å‹æƒ…ã®æœ¨ã®å®Ÿ</a></div>
    </div>`
  },
  ZH:{
    langLabel:'ZH',
    pageTitle:'èŸ²é³´åœ¨è€³ã€é‡æ“”åœ¨å¿ƒ',
    tabs:{ story:'æ•…äº‹æ¦‚è¦', acq:'å–å¾—æ–¹å¼', unlockq:'è§£é–ä»»å‹™', followq:'å¾ŒçºŒä»»å‹™', comments:'ç•™è¨€' },
    readMore:'å±•é–‹å…¨æ–‡', readLess:'æ”¶åˆå…§å®¹',
    story:`<div class="clamp" data-collapsed="true">
      <p>åœ¨ Severed Stringï¼Œä½ ç™¼ç¾ Drest ç¥æƒ…æ†”æ‚´ï¼Œèªç„¡å€«æ¬¡åœ°å–ƒå–ƒè‡ªèªï¼šã€Œç¡ä¸è‘—â€¦â€¦ç‰ å€‘ä¸è®“æˆ‘ç¡â€¦â€¦é‚£å—¡å—¡è²â€¦â€¦ä¸€ç›´åœ¨éŸ¿â€¦â€¦ã€ä»–æ‡‡æ±‚é“ï¼šã€Œæˆ‘å¾ä¾†ä¸æƒ³å‚·å®³ä»»ä½•äººâ€¦â€¦æˆ‘ä¸æƒ³å†æˆ°é¬¥â€¦â€¦æ±‚æ±‚ä½ ï¼ŒæŠŠç‰ å€‘è¶•èµ°ï¼Œè®“é€™è²éŸ³åœä¸‹ä¾†â€¦â€¦ã€</p>
      <p>ä½ é©…æ•£äº†ç…©äººçš„èšŠèŸ²ï¼ŒDrest çš„é¡«æŠ–çµ‚æ–¼å¹³æ¯ã€‚ä»–çœ‹è‘—ä½ ï¼Œæ„Ÿæ¿€èˆ‡æ„§ç–šäº¤ç¹”ï¼Œä½è²é“è¬ï¼šã€Œå³ä¾¿æˆ‘å’ŒåŒä¼´å°ä½ å€‘çš„åœ‹å®¶åšéé‚£äº›äº‹â€¦â€¦ä½ ä»å¹«äº†æˆ‘â€¦â€¦ã€éš¨å³åéœ²çœŸç›¸ï¼šä»–å’ŒåŒä¼´åŸåœ¨åŸ·è¡Œåµå¯Ÿä»»å‹™æ™‚ï¼Œé­åˆ° Maelstrom çš„çªè¥²ï¼Œé›–æ¥µåŠ›é€ƒäº¡ï¼Œå»åªå‰©ä»–ä¸€äººæ´»ä¸‹ä¾†ã€‚</p>
      <p>ã€Œæˆ‘ç”šè‡³ä¸æ˜¯ Garleanâ€¦â€¦å¸åœ‹ä¹Ÿå¾æœäº†æˆ‘çš„å®¶é„‰ï¼Œå°±åƒä»–å€‘è©¦åœ–å¾æœä½ å€‘ä¸€æ¨£â€¦â€¦ã€ä»–å“½å’½è‘—èªªï¼šã€Œæˆ‘ä¸æƒ³åœ¨ä¸–ç•Œå¦ä¸€ç«¯çš„å¢æ—è£¡æ­»å»â€¦â€¦æˆ‘åªæƒ³å›å®¶â€¦â€¦ã€</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>ä»»å‹™ç™¼å¸ƒ</b> å¾·é›·æ–¯ç‰¹ã€€æ‹‰è«¾è¥¿äºæ±éƒ¨ <small class="muted">(X:14.0, Y:30.3)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="give-a-man-a-drink.html">å¯†æ—ä¸­çš„ç”·äºº</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="battle-scars.html">å‚·ç—•å­•è‚²çš„å‹èª¼</a></div>
    </div>`
  }
};

const langToggle  = document.getElementById('langToggle');
const pageTitle   = document.getElementById('pageTitle');
const tabBtns     = [...document.querySelectorAll('.tab-btn')];
const panels = {
  story:  document.getElementById('panel-story'),
  acq:    document.getElementById('panel-acq'),
  unlockq:document.getElementById('panel-unlockq'),
  followq:document.getElementById('panel-followq'),
  comments: document.getElementById('panel-comments')
};

function getLang(){ return localStorage.getItem(LANG_KEY) || 'EN'; }
function applyLang(lang){
  const t = i18n[lang] || i18n.EN;
  pageTitle.textContent = t.pageTitle;
  langToggle.textContent = `ğŸŒ ${t.langLabel}`;
  tabBtns.forEach(btn => { btn.textContent = t.tabs[btn.dataset.tab]; });
  const activeBtn = tabBtns.find(b => b.getAttribute('aria-selected')==='true') || tabBtns[0];
  renderPanel(activeBtn.dataset.tab, lang);
}

function wireClamp(panelEl, t){
  const clamp = panelEl.querySelector('.clamp');
  const btn = panelEl.querySelector('[data-role="expand"]');
  if(!clamp || !btn) return;
  function setLabel(){
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    btn.textContent = collapsed ? t.readMore : t.readLess;
  }
  setLabel();
  btn.addEventListener('click', ()=>{
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    clamp.setAttribute('data-collapsed', collapsed ? 'false' : 'true');
    setLabel();
  });
}

function renderPanel(key, lang){
  const t = i18n[lang] || i18n.EN;
  Object.keys(panels).forEach(k => panels[k].classList.remove('active'));
  panels[key].classList.add('active');
  if (key !== 'comments') panels[key].innerHTML = t[key];
  if (key === 'story') wireClamp(panels[key], t);
  if (key === 'comments') loadGiscusForCurrentLang();
}

tabBtns.forEach(btn=>{
  btn.addEventListener('click', ()=>{
    tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
    btn.setAttribute('aria-selected','true');
    renderPanel(btn.dataset.tab, getLang());
  });
});

langToggle.addEventListener('click', ()=>{
  const cur = getLang();
  const next = cur==='EN' ? 'JP' : (cur==='JP' ? 'ZH' : 'EN');
  localStorage.setItem(LANG_KEY, next);
  applyLang(next);
});

applyLang(getLang());

/* === Giscus Comments === */
const GISCUS_CFG = {
  repo: 'BELAUG-FFXIV/FFXIV_Library',
  repoId: 'R_kgDOPyh4Kw',
  category: 'General',
  categoryId: 'DIC_kwDOPyh4K84CwPjL',
  theme: 'preferred_color_scheme'
};
function uiLang(code){ return code==='JP' ? 'ja' : (code==='ZH' ? 'zh-TW' : 'en'); }
function loadGiscusForCurrentLang(){
  const mount = document.getElementById('giscus_container');
  if (!mount) return;
  mount.innerHTML = '';
  const langCode = getLang();
  const s = document.createElement('script');
  s.src = 'https://giscus.app/client.js';
  s.setAttribute('data-repo', GISCUS_CFG.repo);
  s.setAttribute('data-repo-id', GISCUS_CFG.repoId);
  s.setAttribute('data-category', GISCUS_CFG.category);
  s.setAttribute('data-category-id', GISCUS_CFG.categoryId);
  s.setAttribute('data-mapping', 'specific');
  s.setAttribute('data-term', location.pathname + 'ï½œ' + langCode);
  s.setAttribute('data-reactions-enabled', '1');
  s.setAttribute('data-emit-metadata', '0');
  s.setAttribute('data-input-position', 'bottom');
  s.setAttribute('data-lang', uiLang(langCode));
  s.setAttribute('data-theme', GISCUS_CFG.theme);
  s.setAttribute('crossorigin', 'anonymous');
  s.async = true;
  mount.appendChild(s);
}
</script>
</body>
</html>
