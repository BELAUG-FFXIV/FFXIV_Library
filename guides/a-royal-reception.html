<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>A Royal Reception | BELAUG · FFXIV Library</title>
  <meta name="description" content="ARR 2.0 MSQ — A Royal Reception（皇宮盛宴）：故事概要、取得方式與任務銜接。">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root { --bg:#fff8e6; --card:#fff; --fg:#222; --muted:#666; --border:#e5e1d8; --accent:#e11d48; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif;background:var(--bg);color:var(--fg)}
    .container{max-width:1080px;margin:0 auto;padding:0 16px}
    .site-header{border-bottom:1px solid var(--border);background:#fff9edb3;backdrop-filter:saturate(120%) blur(6px);position:sticky;top:0;z-index:10}
    .nav{display:flex;align-items:center;justify-content:space-between;height:60px}
    .left{display:flex;align-items:center;gap:12px}
    .home{border:1px solid var(--border);background:#fff;padding:4px 8px;border-radius:8px;text-decoration:none;color:var(--fg);font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex;align-items:center;gap:8px}
    .icon-btn{background:none;border:1px solid transparent;cursor:pointer;font-size:14px;padding:6px 10px;border-radius:8px}
    .icon-btn:hover{background:#fff;border-color:var(--border)}
    .main{padding:20px 0 40px}
    .grid{display:grid;grid-template-columns:1.1fr 1fr;gap:20px;align-items:start}
    @media (max-width:900px){
      .grid{grid-template-columns:1fr}
      .video-wrap{position:relative;padding-top:56.25%}
      .video-wrap iframe{position:absolute;inset:0;width:100%;height:100%}
    }
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px;border-bottom:1px solid var(--border);font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%;height:420px;border:0;display:block;border-radius:16px}
    .tabs{display:flex;gap:8px;padding:12px 12px 0;flex-wrap:wrap}
    .tab-btn{background:#fff;border:1px solid var(--border);color:var(--fg);border-radius:999px;padding:8px 14px;cursor:pointer;font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent);color:#fff;background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex;flex-direction:column;gap:10px}
    .stack .row{padding:12px 14px;border:1px dashed var(--border);border-radius:12px;background:#fffdf6}
    .row b{display:inline-block;min-width:130px}
    .muted{color:var(--muted)}
    .link{color:#0b60d8;text-decoration:none}
    .link:hover{text-decoration:underline}
    /* Story clamp + button */
    .story-wrap{position:relative}
    .story-content{max-height:360px;overflow:hidden;position:relative}
    .story-content::after{content:"";position:absolute;inset:auto 0 0 0;height:64px;background:linear-gradient(to top,var(--card),transparent)}
    .story-expanded{max-height:none!important}
    .story-expanded::after{display:none}
    .expand-btn{margin-top:8px;background:none;border:1px solid var(--border);padding:6px 10px;border-radius:8px;cursor:pointer;font-weight:600}
    @media (max-width:600px){ .story-content{max-height:260px} }
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">🏠 Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="切換語言">🌐 EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <!-- 左：影片 -->
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/cndO1B2pUd8"
              title="A Royal Reception" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- 右：標題 + Tabs -->
      <section class="card">
        <div class="hd" id="pageTitle">A Royal Reception</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true"  data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Acquisition</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlockq">Unlock Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="followq">Follow-Up Quest</button>
        </div>
        <div class="bd">
          <div id="panel-story"   class="tab-panel active"></div>
          <div id="panel-acq"     class="tab-panel"></div>
          <div id="panel-unlockq" class="tab-panel"></div>
          <div id="panel-followq" class="tab-panel"></div>
        </div>
      </section>
    </div>
  </main>

<script>
const LANG_KEY = 'ffxiv-guide-lang';
const i18n = {
  EN:{
    langLabel:'EN',
    pageTitle:'A Royal Reception',
    tabs:{ story:'Story', acq:'Acquisition', unlockq:'Unlock Quest', followq:'Follow-Up Quest' },
    story:`<div class="story-wrap"><div class="story-content">
      <p>This is it—your grand debut amidst the high society of Ul’dah. Momodi urges you onward, reminding you to wear the ceremonial earrings before Bartholomew will admit you to the Fragrant Chamber. With every step through the Royal Promenade, the weight of expectation presses heavier, but you steady yourself.</p>
      <p>Inside, the air is rich with perfume and whispers. At Raubahn’s call, the hall rises to greet Sultana Nanamo Ul Namo. She speaks with quiet authority, declaring you Ul’dah’s champion before nobles and Syndicate members alike. The feast begins, yet Raubahn draws you aside, his voice low, his words grave. He speaks of children starving beyond these gilded halls, of the Sultana’s power shackled by the Syndicate’s greed. And then, with piercing eyes, he asks of your visions—dreams of the Crystal. His tale carries you back to Carteneau, to the Warriors of Light whose names the realm has forgotten, and he warns that the fate of Eorzea may now rest upon you.</p>
      <p>The vision seizes you. In a blaze of memory not your own, you stand amidst fire and ruin at the Battle of Carteneau. Generals cry out orders, adventurers bleed for hope, and Bahamut looms, reborn in fury. Louisoix’s last stand fades into blinding light, and then all dissolves. You awaken later at the Hourglass, Momodi watching over you with worried eyes. Though she teases you for fainting mid-banquet, she delivers Raubahn’s message: when you are ready, you are to seek him at the Hall of Flames. The Sultana has recognized you as her champion—now Ul’dah itself waits to see what you will do.</p>
    </div><button class="expand-btn" data-i18n="expand">Read more</button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>Quest Giver</b> Momodi <small class="muted">(Ul’dah - Steps of Nald, X:11.6, Y:9.6)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="a-matter-of-tradition.html">A Matter of Tradition</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="the-uldahn-envoy.html
">The Ul’dahn Envoy</a></div>
    </div>`
  },
  JP:{
    langLabel:'JP',
    pageTitle:'王宮の晩餐会',
    tabs:{ story:'ストーリー', acq:'入手方法', unlockq:'開放クエスト', followq:'後続クエスト' },
    story:`<div class="story-wrap"><div class="story-content">
      <p>ついに、ウルダハ上流社会への華やかな登場の時が訪れる。モモディはあなたに「儀礼の耳飾りを忘れるな」と念を押し、バルソロミューの案内で「芳香の間」へと向かうよう告げる。ロイヤルプロムナードを進むたび、視線と期待の重みがのしかかるが、あなたは気を引き締めて扉をくぐる。</p>
      <p>中では、香の匂いと囁きが満ちる。ラウバーンの呼び声により、ナナモ・ウル・ナモ女王陛下が迎えられ、あなたは「ウルダハの勇士」として賓客たちの前に紹介される。饗宴が始まるが、ラウバーンはあなたを脇に呼び、低い声で語る。飢えに苦しむ民、シンジケートの強欲に縛られた女王。その憂いを打ち明けた後、彼はあなたの目を見据え、問いかける──クリスタルの夢を見てはいないか、と。語りはカルテノーの戦いへと遡り、光の戦士たちの名も姿も失われた記憶に触れながら、「今やエオルゼアの運命は、あなたの双肩にかかっている」と警告する。</p>
      <p>その瞬間、幻視に囚われる。燃え盛るカルテノーの戦場、将軍たちが叫び、冒険者たちが命を懸け、そしてバハムートが天に解き放たれる。ルイゾワの最後の祈りは光に呑まれ、視界が白く弾ける──気がつけば、宿屋「アワーグラス」の寝台に横たわり、モモディが心配そうに覗き込んでいた。彼女は冗談めかして「宴の途中で倒れるなんて」とからかいながらも、ラウバーンからの伝言を伝える。体調が整ったら炎の間へ来い、と。女王が認めた勇士として、今度はウルダハ全体があなたの行動を待っている。</p>
    </div><button class="expand-btn" data-i18n="expand">続きを読む</button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>クエスト発行</b> モモディ <small class="muted">（ウルダハ：ナル回廊, X:11.6, Y:9.6）</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="a-matter-of-tradition.html">晩餐会に備えて</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="the-uldahn-envoy.html
">海都と森都と</a></div>
    </div>`
  },
  ZH:{
    langLabel:'ZH',
    pageTitle:'皇宮盛宴',
    tabs:{ story:'故事概要', acq:'取得方式', unlockq:'解鎖任務', followq:'後續任務' },
    story:`<div class="story-wrap"><div class="story-content">
      <p>這就是關鍵時刻──你即將踏入 Ul’dah 的上流社會。Momodi 叮囑你務必佩戴上儀式耳環，否則 Bartholomew 不會放你進入「Fragrant Chamber」。你穿過 Royal Promenade，每一步都感受到目光與期待，但你仍昂首向前。</p>
      <p>殿堂之中香氣瀰漫，低語四起。隨著 Raubahn 的宣告，Sultana Nanamo Ul Namo 現身，並在眾多貴族與 Syndicate 成員面前，稱你為 Ul’dah 的勇士。宴會開始，但 Raubahn 喚你至一旁，他的語氣沉重而誠懇。他訴說著城牆之外飢餓的孩童，以及 Sultana 的權力如何被 Syndicate 的貪婪所束縛。隨後，他直視著你，詢問你是否曾夢見過水晶──那些幻象將你拉回五年前的 Carteneau，那場光之戰士們名字被抹去、卻依舊用鮮血守護大地的戰役。他警告你，Hydaelyn 的力量已交付於你，而整個 Eorzea 的命運可能繫於你的雙手。</p>
      <p>你被幻視吞沒。烈焰與廢墟之中，Carteneau 戰場再現。將領們發出指令，冒險者以生命為代價，天空中，Bahamut 震碎牢籠重現天際。Louisoix 的最後祈禱化作刺眼的白光，一切隨之消散。當你甦醒時，已身處 Hourglass，Momodi 在一旁守候。她半是調侃半是擔憂，告訴你在宴會中暈倒可真是「出盡了風頭」。最後，她傳達 Raubahn 的訊息：當你恢復之後，請前往 Hall of Flames。Sultana 已將你視作勇士，如今，Ul’dah 也在等待你的選擇。</p>
    </div><button class="expand-btn" data-i18n="expand">展開全文</button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>任務發布</b> 莫莫迪 <small class="muted">（烏爾達哈 - 納爾回廊, X:11.6, Y:9.6）</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="a-matter-of-tradition.html">備宴的傳統</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="the-uldahn-envoy.html
">烏爾達哈的使節</a></div>
    </div>`
  }
};

const langToggle  = document.getElementById('langToggle');
const pageTitle   = document.getElementById('pageTitle');
const tabBtns     = [...document.querySelectorAll('.tab-btn')];
const panels = {
  story:  document.getElementById('panel-story'),
  acq:    document.getElementById('panel-acq'),
  unlockq:document.getElementById('panel-unlockq'),
  followq:document.getElementById('panel-followq')
};

function getLang(){ return localStorage.getItem(LANG_KEY) || 'EN'; }
function setLang(lang){ localStorage.setItem(LANG_KEY, lang); }
function applyLang(lang){
  const t = i18n[lang] || i18n.EN;
  pageTitle.textContent = t.pageTitle;
  langToggle.textContent = `🌐 ${t.langLabel}`;
  tabBtns.forEach(btn => { btn.textContent = t.tabs[btn.dataset.tab]; });
  const activeBtn = tabBtns.find(b => b.getAttribute('aria-selected')==='true') || tabBtns[0];
  renderPanel(activeBtn.dataset.tab, lang);
}

function renderPanel(key, lang){
  const t = i18n[lang] || i18n.EN;
  Object.keys(panels).forEach(k => panels[k].classList.remove('active'));
  panels[key].classList.add('active');
  panels[key].innerHTML = t[key];
  if (key === 'story') makeStoryCollapsible(panels[key], lang);
}

function makeStoryCollapsible(panel, lang){
  const wrap = panel.querySelector('.story-wrap');
  if(!wrap) return;
  const content = wrap.querySelector('.story-content');
  const btn = wrap.querySelector('.expand-btn');
  const MAX = window.matchMedia('(max-width:600px)').matches ? 260 : 360;
  const needClamp = content.scrollHeight > MAX + 8;
  if(needClamp){
    btn.style.display = 'inline-block';
    btn.textContent = label(lang, true);
    btn.onclick = ()=>{
      content.classList.toggle('story-expanded');
      const expanded = content.classList.contains('story-expanded');
      btn.textContent = label(lang, !expanded);
    };
  }else{
    content.classList.add('story-expanded');
    btn.style.display = 'none';
  }
}
function label(lang, expand){
  if(lang==='EN') return expand ? 'Read more' : 'Show less';
  if(lang==='JP') return expand ? '続きを読む' : '折りたたむ';
  return expand ? '展開全文' : '收合內容';
}

tabBtns.forEach(btn=>{
  btn.addEventListener('click', ()=>{
    tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
    btn.setAttribute('aria-selected','true');
    renderPanel(btn.dataset.tab, getLang());
  });
});

langToggle.addEventListener('click', ()=>{
  const cur = getLang();
  const next = cur==='EN' ? 'JP' : (cur==='JP' ? 'ZH' : 'EN');
  setLang(next);
  applyLang(next);
});

applyLang(getLang());
</script>
</body>
</html>
