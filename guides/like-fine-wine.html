<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Like Fine Wine | BELAUG · FFXIV Library</title>
  <meta name="description" content="MSQ – Like Fine Wine (ARR Patch 2.0)">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root { --bg:#fff8e6; --card:#fff; --fg:#222; --muted:#666; --border:#e5e1d8; --accent:#e11d48; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif;background:var(--bg);color:var(--fg)}
    .container{max-width:1080px;margin:0 auto;padding:0 16px}
    .site-header{border-bottom:1px solid var(--border);background:#fff9edb3;backdrop-filter:saturate(120%) blur(6px);position:sticky;top:0;z-index:10}
    .nav{display:flex;align-items:center;justify-content:space-between;height:60px}
    .left{display:flex;align-items:center;gap:12px}
    .home{border:1px solid var(--border);background:#fff;padding:4px 8px;border-radius:8px;text-decoration:none;color:var(--fg);font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex;align-items:center;gap:8px}
    .icon-btn{background:none;border:none;cursor:pointer;font-size:14px;padding:6px 10px;border-radius:8px}
    .icon-btn:hover{background:#fff;border:1px solid var(--border)}
    .main{padding:20px 0 40px}
    .grid{display:grid;grid-template-columns:1.1fr 1fr;gap:20px;align-items:start}
    @media (max-width:900px){
      .grid{grid-template-columns:1fr}
      .video-wrap{position:relative;padding-top:56.25%}
      .video-wrap iframe{position:absolute;inset:0;width:100%;height:100%}
    }
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px;border-bottom:1px solid var(--border);font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%;height:420px;border:0;display:block;border-radius:16px}
    .tabs{display:flex;gap:8px;padding:12px 12px 0;flex-wrap:wrap}
    .tab-btn{background:#fff;border:1px solid var(--border);color:var(--fg);border-radius:999px;padding:8px 14px;cursor:pointer;font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent);color:#fff;background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex;flex-direction:column;gap:10px}
    .stack .row{padding:12px 14px;border:1px dashed var(--border);border-radius:12px;background:#fffdf6}
    .row b{display:inline-block;min-width:130px}
    .muted{color:var(--muted)}
    .link{color:#0b60d8;text-decoration:none}
    .link:hover{text-decoration:underline}
    /* 展開/收合 */
    .clamp{position:relative;max-height:360px;overflow:hidden}
    .clamp[data-collapsed="false"]{max-height:none}
    .clamp[data-collapsed="true"]::after{
      content:"";position:absolute;left:0;right:0;bottom:0;height:72px;
      background:linear-gradient(to bottom, rgba(255,255,255,0), var(--card));pointer-events:none;
    }
    .expand-wrap{margin-top:12px}
    .expand-btn{display:inline-block;padding:8px 14px;border-radius:10px;background:var(--card);border:1px solid var(--border);cursor:pointer;font-weight:600}
    .expand-btn:hover{background:#fffef8}
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">🏠 Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="切換語言">🌐 EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <!-- 左：影片 -->
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/dUHIq8wR8pM"
              title="Like Fine Wine" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- 右：標題 + Tabs -->
      <section class="card">
        <div class="hd" id="pageTitle">Like Fine Wine</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true"  data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Acquisition</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlockq">Unlock Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="followq">Follow-Up Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="comments">Comments</button>
        </div>
        <div class="bd">
          <div id="panel-story"   class="tab-panel active"></div>
          <div id="panel-acq"     class="tab-panel"></div>
          <div id="panel-unlockq" class="tab-panel"></div>
          <div id="panel-followq" class="tab-panel"></div>
          <div id="panel-comments" class="tab-panel">
            <div id="giscus_container" style="min-height:320px;"></div>
          </div>
        </div>
      </section>
    </div>
  </main>

<script>
const LANG_KEY = 'ffxiv-guide-lang';
const i18n = {
  EN:{
    langLabel:'EN',
    pageTitle:'Like Fine Wine',
    tabs:{ story:'Story', acq:'Acquisition', unlockq:'Unlock Quest', followq:'Follow-Up Quest', comments:'Comments' },
    readMore:'Show more', readLess:'Show less',
    story:`<div class="clamp" data-collapsed="true">
      <p>Teteroon proudly declares that he has made good firewater for Buscarron—“good firewater for good Buscarron.” He tells you to deliver it, but also to tell Buscarron not to drink it yet, to put it away for one year so it will reach its best flavor. With a sigh, he says he hopes Buscarron will be happy and asks you to give him many, many thankies. He dreams of opening a big shop someday, the biggest in Eorzea, making many sparklies—all thanks to good Buscarron. Afterward, he murmurs that he misses Buscarron, must work hard, and make many shinies before going to see him again.</p>
      <p>When you return to the Druthers, Buscarron thanks you for bringing Teteroon’s belongings. Seeing the bottle, he’s surprised—“for me?” It’s Qiqirn firewater, and he realizes Teteroon remembered his fondness for it. Emotion overcomes him for a moment. When told to keep it for a year, he nods, agreeing it’s worth the wait, the aroma and body unlike any other drink he knows. Smiling, he says it will be a long year and invites you to return then, to share the bottle together.</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>Quest Giver</b> Teteroon, Upper La Noscea <small class="muted">(X:14.7, Y:24.4)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="microbrewing.html">Microbrewing</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="sylphish-concerns.html">Sylphish Concerns</a></div>
    </div>`
  },
  JP:{
    langLabel:'JP',
    pageTitle:'熟成される友情',
    tabs:{ story:'ストーリー', acq:'入手方法', unlockq:'開放クエスト', followq:'後続クエスト', comments:'コメント' },
    readMore:'全文を表示', readLess:'折りたたむ',
    story:`<div class="clamp" data-collapsed="true">
      <p>ティテルーンは誇らしげに言った。「ティテルーン、ブスカロンのために火酒を作った！　いい火酒、いいブスカロンのため！」ただし、すぐには飲まないように伝えてほしいと続ける。「一年置くといちばんおいしくなる。」ため息をつきながら、「ブスカロンが喜んでくれるといい」と言い、多くの「サンキィ」を託す。いつかエオルゼアでいちばん大きな店を開き、たくさんのきらきらを作るのだと夢を語る。「すべてはいいブスカロンのおかげ。」そのあと、彼は小さくつぶやいた。「ティテルーン、ブスカロンが恋しい。もっと働かないと。たくさんきらきら作って、また会いに行く！」</p>
      <p>ドライザーズに戻ると、ブスカロンはあなたに感謝し、瓶を見て驚く。「これは……俺に？」すぐに気づく。「キキルンの火酒か……ティテルーン、覚えていたのか。」彼の声が少し震えた。「誰だ、玉ねぎを切ってるのは……」一年寝かせろという言葉にうなずき、「それが一番だ」と笑う。「香りも味わいも他にない。この一年は長くなりそうだな。一年後、また来てくれ。そのとき一緒にこの酒をあけよう。」</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>クエスト発行</b> テテルン　高地ラノシア <small class="muted">(X:14.7, Y:24.4)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="microbrewing.html">テテルンのふるまい酒</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="sylphish-concerns.html">木立を縫う者</a></div>
    </div>`
  },
  ZH:{
    langLabel:'ZH',
    pageTitle:'歷久彌新的情誼',
    tabs:{ story:'故事概要', acq:'取得方式', unlockq:'解鎖任務', followq:'後續任務', comments:'留言' },
    readMore:'展開全文', readLess:'收合內容',
    story:`<div class="clamp" data-collapsed="true">
      <p>Teteroon 自豪地表示他為 Buscarron 釀好了火酒——「好火酒，給好 Buscarron。」但他叮囑你要傳話：先別喝，放上一年才能達到最好的風味。他輕嘆一口氣，希望 Buscarron 能開心，並請你代他向 Buscarron 表達「many, many thankies」。他夢想有一天能開一家大店——Eorzea 最大的店，製造許多閃亮亮的寶物——這一切都要感謝好 Buscarron。之後他輕聲自語，說自己很想念 Buscarron，必須更加努力，做出更多閃亮的東西，再親自去見他。</p>
      <p>當你回到 Druthers，Buscarron 收下瓶子後感到驚訝：「給我的？」他立刻認出那是 Qiqirn 火酒，想到 Teteroon 仍記得自己對這酒的喜愛，情緒一時湧上心頭。聽到要放上一年的囑託時，他點點頭，說那樣確實最好，香氣與風味無可比擬。他笑著說：「這一年可要漫長了啊。一年後再來吧，到時候我們一起打開這瓶酒。」</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>任務發布</b> 特特倫　拉諾西亞高地 <small class="muted">(X:14.7, Y:24.4)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="microbrewing.html">特特倫的自釀好酒</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="sylphish-concerns.html">林影間的憂慮</a></div>
    </div>`
  }
};

const langToggle  = document.getElementById('langToggle');
const pageTitle   = document.getElementById('pageTitle');
const tabBtns     = [...document.querySelectorAll('.tab-btn')];
const panels = {
  story:  document.getElementById('panel-story'),
  acq:    document.getElementById('panel-acq'),
  unlockq:document.getElementById('panel-unlockq'),
  followq:document.getElementById('panel-followq'),
  comments: document.getElementById('panel-comments')
};

function getLang(){ return localStorage.getItem(LANG_KEY) || 'EN'; }
function applyLang(lang){
  const t = i18n[lang] || i18n.EN;
  pageTitle.textContent = t.pageTitle;
  langToggle.textContent = `🌐 ${t.langLabel}`;
  tabBtns.forEach(btn => { btn.textContent = t.tabs[btn.dataset.tab]; });
  const activeBtn = tabBtns.find(b => b.getAttribute('aria-selected')==='true') || tabBtns[0];
  renderPanel(activeBtn.dataset.tab, lang);
}

function wireClamp(panelEl, t){
  const clamp = panelEl.querySelector('.clamp');
  const btn = panelEl.querySelector('[data-role="expand"]');
  if(!clamp || !btn) return;
  function setLabel(){
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    btn.textContent = collapsed ? t.readMore : t.readLess;
  }
  setLabel();
  btn.addEventListener('click', ()=>{
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    clamp.setAttribute('data-collapsed', collapsed ? 'false' : 'true');
    setLabel();
  });
}

function renderPanel(key, lang){
  const t = i18n[lang] || i18n.EN;
  Object.keys(panels).forEach(k => panels[k].classList.remove('active'));
  panels[key].classList.add('active');
  if (key !== 'comments') panels[key].innerHTML = t[key];
  if (key === 'story') wireClamp(panels[key], t);
  if (key === 'comments') loadGiscusForCurrentLang();
}

tabBtns.forEach(btn=>{
  btn.addEventListener('click', ()=>{
    tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
    btn.setAttribute('aria-selected','true');
    renderPanel(btn.dataset.tab, getLang());
  });
});

langToggle.addEventListener('click', ()=>{
  const cur = getLang();
  const next = cur==='EN' ? 'JP' : (cur==='JP' ? 'ZH' : 'EN');
  localStorage.setItem(LANG_KEY, next);
  applyLang(next);
});

applyLang(getLang());

/* === Giscus：Comments 分頁 === */
const GISCUS_CFG = {
  repo: 'BELAUG-FFXIV/FFXIV_Library',
  repoId: 'R_kgDOPyh4Kw',
  category: 'General',
  categoryId: 'DIC_kwDOPyh4K84CwPjL',
  theme: 'preferred_color_scheme'
};
function uiLang(code){ return code==='JP' ? 'ja' : (code==='ZH' ? 'zh-TW' : 'en'); }
function loadGiscusForCurrentLang(){
  const mount = document.getElementById('giscus_container');
  if (!mount) return;
  mount.innerHTML = '';
  const langCode = getLang();
  const s = document.createElement('script');
  s.src = 'https://giscus.app/client.js';
  s.setAttribute('data-repo', GISCUS_CFG.repo);
  s.setAttribute('data-repo-id', GISCUS_CFG.repoId);
  s.setAttribute('data-category', GISCUS_CFG.category);
  s.setAttribute('data-category-id', GISCUS_CFG.categoryId);
  s.setAttribute('data-mapping', 'specific');
  s.setAttribute('data-term', location.pathname + '｜' + langCode);
  s.setAttribute('data-reactions-enabled', '1');
  s.setAttribute('data-emit-metadata', '0');
  s.setAttribute('data-input-position', 'bottom');
  s.setAttribute('data-lang', uiLang(langCode));
  s.setAttribute('data-theme', GISCUS_CFG.theme);
  s.setAttribute('crossorigin', 'anonymous');
  s.async = true;
  mount.appendChild(s);
}
</script>
</body>
</html>
