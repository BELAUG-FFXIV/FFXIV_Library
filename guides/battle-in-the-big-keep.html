<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Battle in the Big Keep | BELAUG Â· FFXIV Library</title>
  <meta name="description" content="FFXIV ARR 2.5 Trial â€” Battle in the Big Keepï¼ˆçœŸã‚®ãƒ«ã‚¬ãƒ¡ãƒƒã‚·ãƒ¥è¨æ»…æˆ¦ / åœ¨å¤§åŸå¡ä¸­è¿æˆ° Gilgameshï¼‰ï¼šæ•…äº‹æ¦‚è¦ã€éœ€æ±‚æ¢ä»¶ã€è§£é–ä»»å‹™èˆ‡å¾ŒçºŒä»»å‹™ï¼Œé™„å½±ç‰‡ã€‚">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root { --bg:#fff8e6; --card:#ffffff; --fg:#222; --muted:#666; --border:#e5e1d8; --accent:#e11d48; }
    *{box-sizing:border-box}
    body{margin:0; font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif; background:var(--bg); color:var(--fg);}
    .container{max-width:1080px; margin:0 auto; padding:0 16px}
    .site-header{border-bottom:1px solid var(--border); background:#fff9edb3; backdrop-filter:saturate(120%) blur(6px); position:sticky; top:0; z-index:10}
    .nav{display:flex; align-items:center; justify-content:space-between; height:60px}
    .left{display:flex; align-items:center; gap:12px}
    .home{border:1px solid var(--border); background:#fff; padding:4px 8px; border-radius:8px; text-decoration:none; color:var(--fg); font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex; align-items:center; gap:8px}
    .icon-btn{background:none; border:none; cursor:pointer; font-size:14px; padding:6px 10px; border-radius:8px}
    .icon-btn:hover{background:#fff; border:1px solid var(--border)}
    .main{padding:20px 0 40px}
    .grid{display:grid; grid-template-columns:1.1fr 1fr; gap:20px; align-items:start;}
    @media (max-width:900px){ .grid{grid-template-columns:1fr} .video-wrap{position:relative; padding-top:56.25%} .video-wrap iframe{position:absolute; inset:0; width:100%; height:100%} }
    .card{background:var(--card); border:1px solid var(--border); border-radius:16px; box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px; border-bottom:1px solid var(--border); font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%; height:420px; border:0; display:block; border-radius:16px}
    .tabs{display:flex; gap:8px; padding:12px 12px 0; flex-wrap:wrap}
    .tab-btn{background:#fff; border:1px solid var(--border); color:var(--fg); border-radius:999px; padding:8px 14px; cursor:pointer; font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent); color:#fff; background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex; flex-direction:column; gap:10px}
    .stack .row{padding:12px 14px; border:1px dashed var(--border); border-radius:12px; background:#fffdf6}
    .link{color:#0b60d8; text-decoration:none}
    .link:hover{text-decoration:underline}
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">ğŸ  Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="åˆ‡æ›èªè¨€">ğŸŒ EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <!-- å·¦ï¼šå½±ç‰‡ -->
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/__HooO2cB-8" title="Battle in the Big Keep" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- å³ï¼šæ¨™é¡Œ + Tabs -->
      <section class="card">
        <div class="hd" id="pageTitle">Battle in the Big Keep</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true" data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="req">Requirements</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Unlock Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlock">Follow-Up Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="comments">Comments</button>
        </div>
        <div class="bd">
          <div id="panel-story" class="tab-panel active"></div>
          <div id="panel-acq" class="tab-panel"></div>
          <div id="panel-req" class="tab-panel"></div>
          <div id="panel-unlock" class="tab-panel"></div>
          <div id="panel-comments" class="tab-panel">
            <div id="giscus_container" style="min-height:320px;"></div>
          </div>
        </div>
      </section>
    </div>
  </main>

  <script>
    const LANG_KEY = 'ffxiv-guide-lang';

    const i18n = {
      EN:{
        langLabel:'EN',
        pageTitle:'Battle in the Big Keep',
        tabs:{story:'Story', req:'Requirements', acq:'Unlock Quest', unlock:'Follow-Up Quest', comments:'Comments'},
        story:`<p>How many realms has he traversed, and how many rivals has he felled? Gilgamesh journeys ever onward in his unending quest for the strongest of swords. But the road is long and lonesome, and a painted roosterâ”€loyal and noble as the bird may beâ”€can bring a man only so much comfort in the darkest and most trying of times. So it was that Gilgamesh turned to the heavens, pleading to be reunited with a long-lost companion. Be it by fortune or fate, his prayers were heard, and the stage for the final confrontation is set. To the victor goes the Treaty-Blade!</p>`,
        req:`<div class="stack">
          <div class="row"><strong>Players:</strong> 1â€“8 players (2 Tanks, 2 Healers, 4 DPS)</div>
          <div class="row"><strong>Class/Job:</strong> Disciples of War or Magic</div>
          <div class="row">â€» Limited jobs can participate only in a preformed party meeting party size requirements or an unrestricted party, and if duty rules allow.</div>
          <div class="row"><strong>Level:</strong> 50</div>
          <div class="row">â€» Level will be synced upon entry.</div>
          <div class="row"><strong>Average Item Level:</strong> 90</div>
          <div class="row">â€» While synced, all item stats are adjusted.</div>
          <div class="row">â€» Role and item level restrictions are lifted for parties meeting minimum size requirements.</div>
        </div>`,
        acq:`<div class="stack">
          <div class="row"><a class="link" href="her-last-vow.html">Her Last Vow</a></div>
        </div>`,
        unlock:`<div class="stack">
          <div class="row"><a class="link" href="a-gentleman-falls-rather-than-flies.html">A Gentleman Falls, Rather than Flies</a></div>
        </div>`
      },

      JP:{
        langLabel:'JP',
        pageTitle:'çœŸã‚®ãƒ«ã‚¬ãƒ¡ãƒƒã‚·ãƒ¥è¨æ»…æˆ¦',
        tabs:{story:'ã‚¹ãƒˆãƒ¼ãƒªãƒ¼', req:'å¿…è¦æ¡ä»¶', acq:'é–‹æ”¾ã‚¯ã‚¨ã‚¹ãƒˆ', unlock:'å¾Œç¶šã‚¯ã‚¨ã‚¹ãƒˆ', comments:'ã‚³ãƒ¡ãƒ³ãƒˆ'},
        story:`<p>æµã‚Œæµã‚Œã¦ã‚¨ã‚ªãƒ«ã‚¼ã‚¢ã€‚å¯‚ã‚ŒãŸå¤åŸã«ä½‡ã‚€ã¯ã€å™‚ã®å‰£è±ªã€ã‚®ãƒ«ã‚¬ãƒ¡ãƒƒã‚·ãƒ¥ã€‚å¥½æ•µæ‰‹ã¨ã®æ±ºç€ã¤ã‘ã‚“ã¨ã€æ¥­ç‰©ã‚’æ‰‹ã«ä»ç‹ç«‹ã¡ã€‚ã—ã‹ã—ã¦ã€å¿ƒã¯æºã‚Œå‹•ãã€‚å‹ã‚’æ±‚ã‚ã¦ã‚†ã‚‰ã‚†ã‚‰ã¨ã€‚å¿ƒã«ç©ºã„ãŸå¤§ããªç©´ã¯ã€ãƒ‹ãƒ¯ãƒˆãƒªã ã‘ã§ã¯åŸ‹ã‚ã‚‰ã‚Œã¬ã€‚é¡˜ã„ãŒç¥ã‚’å‘¼ã¶ãªã‚‰ã°ã€å‹ã‚’å‘¼ã‚“ã§ã‚‚è‰¯ã„ã¯ãšã ã€‚å…‰ã¨ã¨ã‚‚ã«èˆã„é™ã‚ŠãŸã‚‹ã¯ã€ãã®åã‚‚å‹ç¥ã€Œã‚¨ãƒ³ã‚­ãƒ‰ã‚¦ã€ã€‚å¤§å¾©æ´»ã®å¤§è¦ªå‹ã€‚èƒŒä¸­ã‚’é ã‘ã‚Šã‚ƒã€ç™¾äººåŠ›ï¼ã€€åå‹è² ã®å§‹ã¾ã‚Šã«ã”ã–ã„ã¾ã™ã€‚</p>`,
        req:`<div class="stack">
          <div class="row"><strong>ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æ•°ï¼š</strong>1ï½8äººï¼ˆã‚¿ãƒ³ã‚¯2ï¼ãƒ’ãƒ¼ãƒ©ãƒ¼2ï¼DPS4ï¼‰</div>
          <div class="row"><strong>ã‚¯ãƒ©ã‚¹ï¼ã‚¸ãƒ§ãƒ–ï¼š</strong>ãƒ•ã‚¡ã‚¤ã‚¿ãƒ¼ï¼ã‚½ãƒ¼ã‚µãƒ©ãƒ¼</div>
          <div class="row">â€» ãƒªãƒŸãƒ†ãƒƒãƒ‰ã‚¸ãƒ§ãƒ–ã¯ã€è¦å®šäººæ•°ã®äº‹å‰çµæˆãƒ‘ãƒ¼ãƒ†ã‚£ã¾ãŸã¯åˆ¶é™è§£é™¤ãƒ‘ãƒ¼ãƒ†ã‚£ã‹ã¤è¦å®šãŒè¨±å¯ã™ã‚‹å ´åˆã®ã¿å‚åŠ å¯ã€‚</div>
          <div class="row"><strong>ãƒ¬ãƒ™ãƒ«ï¼š</strong>50</div>
          <div class="row">â€» ã‚³ãƒ³ãƒ†ãƒ³ãƒ„çªå…¥æ™‚ã«ãƒ¬ãƒ™ãƒ«ã‚·ãƒ³ã‚¯ã•ã‚Œã¾ã™ã€‚</div>
          <div class="row"><strong>å¹³å‡ã‚¢ã‚¤ãƒ†ãƒ ãƒ¬ãƒ™ãƒ«ï¼š</strong>90</div>
          <div class="row">â€» ã‚·ãƒ³ã‚¯ä¸­ã¯å…¨è£…å‚™ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒèª¿æ•´ã•ã‚Œã¾ã™ã€‚</div>
          <div class="row">â€» æœ€ä½äººæ•°ã‚’æº€ãŸã™ãƒ‘ãƒ¼ãƒ†ã‚£ã§ã¯ãƒ­ãƒ¼ãƒ«ï¼ILåˆ¶é™ãŒè§£é™¤ã•ã‚Œã¾ã™ã€‚</div>
        </div>`,
        acq:`<div class="stack">
          <div class="row"><a class="link" href="her-last-vow.html">äº‹ä»¶ã¯ç ‚å¡µã«æ¶ˆã‚†</a></div>
        </div>`,
        unlock:`<div class="stack">
          <div class="row"><a class="link" href="a-gentleman-falls-rather-than-flies.html">äº‹ä»¶å±‹ã‚’æ¢ã›</a></div>
        </div>`
      },

      ZH:{
        langLabel:'ZH-TW',
        pageTitle:'åœ¨å¤§åŸå¡ä¸­è¿æˆ° Gilgamesh',
        tabs:{story:'æ•…äº‹æ¦‚è¦', req:'éœ€æ±‚æ¢ä»¶', acq:'è§£é–ä»»å‹™', unlock:'å¾ŒçºŒä»»å‹™', comments:'ç•™è¨€'},
        story:`<p>ä»–ç©¶ç«Ÿè¸éå¤šå°‘ä¸–ç•Œï¼Œåˆæ–¬è½å¤šå°‘å‹æ•µï¼ŸGilgamesh ç‚ºäº†è¿½æ±‚æœ€å¼·ä¹‹åŠï¼Œä»åœ¨ç„¡ç›¡çš„æ—…é€”ä¸­ä¸æ–·å‰è¡Œã€‚ç„¶è€Œé“è·¯æ¼«é•·è€Œå¯‚å¯ï¼Œå³ä½¿èº«æ—æœ‰ä¸€éš»å¿ èª åˆé«˜è²´çš„å½©ç¹ªå…¬é›ï¼Œåœ¨æœ€é»‘æš—ã€æœ€è‰±é›£çš„æ™‚åˆ»ï¼Œèƒ½å¸¶ä¾†çš„å®‰æ…°çµ‚ç©¶æœ‰é™ã€‚æ–¼æ˜¯ Gilgamesh ä»°æœ›è’¼ç©¹ï¼Œç¥ˆæ±‚èƒ½èˆ‡å¤±æ•£å·²ä¹…çš„åŒä¼´é‡é€¢ã€‚ç„¡è«–æ˜¯å¹¸é‹æˆ–å‘½é‹ï¼Œä»–çš„ç¥ˆç¦±çµ‚æ–¼è¢«è½è¦‹ï¼Œæœ€çµ‚æ±ºæˆ°çš„èˆå°ä¹Ÿå·²å°±ç·’â€”â€”å‹è€…å°‡å¥ªå¾— Treaty-Bladeï¼</p>`,
        req:`<div class="stack">
          <div class="row"><strong>äººæ•¸ï¼š</strong>1â€“8 äººï¼ˆ2 å¦å…‹ï¼2 æ²»ç™‚ï¼4 è¼¸å‡ºï¼‰</div>
          <div class="row"><strong>è·æ¥­ï¼š</strong>æˆ°é¬¥è·æ¥­ï¼é­”æ³•è·æ¥­</div>
          <div class="row">â€» é™å®šè·æ¥­åƒ…èƒ½åœ¨äº‹å…ˆçµ„æˆç¬¦åˆäººæ•¸æ¢ä»¶çš„éšŠä¼ï¼Œæˆ–ä»¥ç„¡é™åˆ¶è¦å‰‡åƒåŠ ï¼Œä¸”éœ€ç¬¦åˆä»»å‹™è¦å‰‡å…è¨±çš„æƒ…æ³ã€‚</div>
          <div class="row"><strong>ç­‰ç´šï¼š</strong>50</div>
          <div class="row">â€» é€²å…¥ä»»å‹™æ™‚å°‡è‡ªå‹•é€²è¡Œç­‰ç´šåŒæ­¥ã€‚</div>
          <div class="row"><strong>å¹³å‡è£å‚™å“ç´šï¼š</strong>90</div>
          <div class="row">â€» åŒæ­¥æ™‚ï¼Œæ‰€æœ‰è£å‚™æ•¸å€¼å°‡è‡ªå‹•èª¿æ•´ã€‚</div>
          <div class="row">â€» ç•¶éšŠä¼åƒ…é”æœ€ä½äººæ•¸æ™‚ï¼Œè§’è‰²å®šä½èˆ‡è£å‚™å“ç´šé™åˆ¶å°‡è§£é™¤ã€‚</div>
        </div>`,
        acq:`<div class="stack">
          <div class="row"><a class="link" href="her-last-vow.html">å¥¹æœ€å¾Œçš„èª“ç´„ï¼Œéš¨é¢¨è€Œé€</a></div>
        </div>`,
        unlock:`<div class="stack">
          <div class="row"><a class="link" href="a-gentleman-falls-rather-than-flies.html">å°±ç®—æ‘”ä¸‹ä¾†ä¹Ÿå¾—åƒå€‹ç´³å£«</a></div>
        </div>`
      }
    };

    const langToggle = document.getElementById('langToggle');
    const pageTitle  = document.getElementById('pageTitle');
    const tabBtns    = [...document.querySelectorAll('.tab-btn')];
    const panels = {
      story : document.getElementById('panel-story'),
      acq   : document.getElementById('panel-acq'),
      req   : document.getElementById('panel-req'),
      unlock: document.getElementById('panel-unlock'),
      comments: document.getElementById('panel-comments')
    };

    function getLang(){ return localStorage.getItem(LANG_KEY) || 'EN'; }
    function applyLang(lang){
      const t = i18n[lang] || i18n.EN;
      pageTitle.textContent = t.pageTitle;
      langToggle.textContent = `ğŸŒ ${t.langLabel}`;
      tabBtns.forEach(btn => { btn.textContent = t.tabs[btn.dataset.tab]; });
      const activeBtn = tabBtns.find(b=>b.getAttribute('aria-selected')==='true') || tabBtns[0];
      renderPanel(activeBtn.dataset.tab, lang);
      if (activeBtn && activeBtn.dataset.tab === 'comments') loadGiscusForCurrentLang();
    }

    function renderPanel(key, lang){
      const t = i18n[lang] || i18n.EN;
      Object.keys(panels).forEach(k => panels[k].classList.remove('active'));
      panels[key].classList.add('active');
      if (key !== 'comments') {
        panels[key].innerHTML = t[key];
      } else {
        loadGiscusForCurrentLang();
      }
    }

    tabBtns.forEach(btn=>{
      btn.addEventListener('click',()=>{
        tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
        btn.setAttribute('aria-selected','true');
        renderPanel(btn.dataset.tab, getLang());
      });
    });

    langToggle.addEventListener('click',()=>{
      const cur=getLang();
      const next=cur==='EN'?'JP':(cur==='JP'?'ZH':'EN');
      localStorage.setItem(LANG_KEY,next);
      applyLang(next);
    });

    applyLang(getLang());

    const GISCUS_CFG = {
      repo: 'BELAUG-FFXIV/FFXIV_Library',
      repoId: 'R_kgDOPyh4Kw',
      category: 'General',
      categoryId: 'DIC_kwDOPyh4K84CwPjL',
      theme: 'preferred_color_scheme'
    };
    function uiLang(code){ return code==='JP' ? 'ja' : (code==='ZH' ? 'zh-TW' : 'en'); }
    function loadGiscusForCurrentLang(){
      const mount = document.getElementById('giscus_container');
      if (!mount) return;
      mount.innerHTML = '';
      const langCode = getLang();
      const s = document.createElement('script');
      s.src = 'https://giscus.app/client.js';
      s.setAttribute('data-repo', GISCUS_CFG.repo);
      s.setAttribute('data-repo-id', GISCUS_CFG.repoId);
      s.setAttribute('data-category', GISCUS_CFG.category);
      s.setAttribute('data-category-id', GISCUS_CFG.categoryId);
      s.setAttribute('data-mapping', 'specific');
      s.setAttribute('data-term', location.pathname + 'ï½œ' + langCode);
      s.setAttribute('data-reactions-enabled', '1');
      s.setAttribute('data-emit-metadata', '0');
      s.setAttribute('data-input-position', 'bottom');
      s.setAttribute('data-lang', uiLang(langCode));
      s.setAttribute('data-theme', GISCUS_CFG.theme);
      s.setAttribute('crossorigin', 'anonymous');
      s.async = true;
      mount.appendChild(s);
    }
  </script>
</body>
</html>
