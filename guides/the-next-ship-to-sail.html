<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The Next Ship to Sail | BELAUG Â· FFXIV Library</title>
  <meta name="description" content="MSQ â€“ The Next Ship to Sail (EW Patch 6.0)">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root { --bg:#fff8e6; --card:#fff; --fg:#222; --muted:#666; --border:#e5e1d8; --accent:#e11d48; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif;background:var(--bg);color:var(--fg)}
    .container{max-width:1080px;margin:0 auto;padding:0 16px}
    .site-header{border-bottom:1px solid var(--border);background:#fff9edb3;backdrop-filter:saturate(120%) blur(6px);position:sticky;top:0;z-index:10}
    .nav{display:flex;align-items:center;justify-content:space-between;height:60px}
    .left{display:flex;align-items:center;gap:12px}
    .home{border:1px solid var(--border);background:#fff;padding:4px 8px;border-radius:8px;text-decoration:none;color:var(--fg);font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex;align-items:center;gap:8px}
    .icon-btn{background:none;border:none;cursor:pointer;font-size:14px;padding:6px 10px;border-radius:8px}
    .icon-btn:hover{background:#fff;border:1px solid var(--border)}
    .main{padding:20px 0 40px}
    .grid{display:grid;grid-template-columns:1.1fr 1fr;gap:20px;align-items:start}
    @media (max-width:900px){
      .grid{grid-template-columns:1fr}
      .video-wrap{position:relative;padding-top:56.25%}
      .video-wrap iframe{position:absolute;inset:0;width:100%;height:100%}
    }
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px;border-bottom:1px solid var(--border);font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%;height:420px;border:0;display:block;border-radius:16px}
    .tabs{display:flex;gap:8px;padding:12px 12px 0;flex-wrap:wrap}
    .tab-btn{background:#fff;border:1px solid var(--border);color:var(--fg);border-radius:999px;padding:8px 14px;cursor:pointer;font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent);color:#fff;background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex;flex-direction:column;gap:10px}
    .stack .row{padding:12px 14px;border:1px dashed var(--border);border-radius:12px;background:#fffdf6}
    .row b{display:inline-block;min-width:130px}
    .muted{color:var(--muted)}
    .link{color:#0b60d8;text-decoration:none}
    .link:hover{text-decoration:underline}

    /* å±•é–‹/æ”¶åˆï¼ˆStory clampï¼‰ */
    .clamp{position:relative; max-height:360px; overflow:hidden}
    .clamp[data-collapsed="false"]{max-height:none}
    .clamp[data-collapsed="true"]::after{
      content:""; position:absolute; left:0; right:0; bottom:0; height:72px;
      background:linear-gradient(to bottom, rgba(255,255,255,0), var(--card)); pointer-events:none;
    }
    .expand-wrap{ margin-top:12px; }
    .expand-btn{
      display:inline-block; padding:8px 14px; border-radius:10px;
      background:var(--card); border:1px solid var(--border); cursor:pointer; font-weight:600;
    }
    .expand-btn:hover{ background:#fffef8; }
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">ğŸ  Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="åˆ‡æ›èªè¨€">ğŸŒ EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <!-- å·¦ï¼šå½±ç‰‡ -->
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/KxJD8RkFfZ8"
              title="The Next Ship to Sail" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- å³ï¼šæ¨™é¡Œ + Tabs -->
      <section class="card">
        <div class="hd" id="pageTitle">The Next Ship to Sail</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true"  data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Acquisition</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlockq">Unlock Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="followq">Follow-Up Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="comments">Comments</button>
        </div>
        <div class="bd">
          <div id="panel-story"   class="tab-panel active"></div>
          <div id="panel-acq"     class="tab-panel"></div>
          <div id="panel-unlockq" class="tab-panel"></div>
          <div id="panel-followq" class="tab-panel"></div>
          <div id="panel-comments" class="tab-panel">
            <div id="giscus_container" style="min-height:320px;"></div>
          </div>
        </div>
      </section>
    </div>
  </main>

<script>
const LANG_KEY = 'ffxiv-guide-lang';
const i18n = {
  EN:{
    langLabel:'EN',
    pageTitle:'The Next Ship to Sail',
    tabs:{ story:'Story', acq:'Acquisition', unlockq:'Unlock Quest', followq:'Follow-Up Quest', comments:'Comments' },
    readMore:'Show more', readLess:'Show less',
    story:`<div class="clamp" data-collapsed="true">
      <p>At Dawnâ€™s Respite, Alphinaud calls the Scions together to reassess the situation. The Telophoroi have constructed towers across the world, corrupting innocents for primal summonings.</p>
      <p>Even Garlemald has fallen into silence, its people transformed into thralls building a twisted edifice. Concerned by the growing threat, the Scions resolve to travel to Sharlayan, posing as associates of the Students of Baldesion. As the ship prepares to leave Limsa Lominsa, Tataru bids them farewell.</p>
      <p>Onboard, Thancred recalls his meeting with Louisoix, and Hydaelyn appears to the Warrior of Light, revealing her nature as a primal and the burden she now bears. As Sharlayan comes into view, emotions stirâ€”nostalgia, apprehension, and determination. Upon arrival in Sharlayan, the group undergoes strict immigration procedures. One by one, they are approvedâ€”Alphinaud and Alisaie drawing wary attention, Estinien nearly rejected. Krile steps in to vouch for them all. With entry granted, the Scions step into Sharlayan, a city of knowledge and secrecy, where answers may lie hidden behind paper and pride.</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>Quest Giver</b> Alphinaud <small class="muted">(The Rising Stones, X:6.0, Y:5.9)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="#">Death Unto Dawn</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="#">Old Sharlayan, New to You</a></div>
    </div>`
  },
  JP:{
    langLabel:'JP',
    pageTitle:'ã‚„ãŒã¦æµã‚Œã¯æµ·ã¸ã¨æ³¨ã',
    tabs:{ story:'ã‚¹ãƒˆãƒ¼ãƒªãƒ¼', acq:'å…¥æ‰‹æ–¹æ³•', unlockq:'é–‹æ”¾ã‚¯ã‚¨ã‚¹ãƒˆ', followq:'å¾Œç¶šã‚¯ã‚¨ã‚¹ãƒˆ', comments:'ã‚³ãƒ¡ãƒ³ãƒˆ' },
    readMore:'å…¨æ–‡ã‚’è¡¨ç¤º', readLess:'æŠ˜ã‚ŠãŸãŸã‚€',
    story:`<div class="clamp" data-collapsed="true">
      <p>ã€Œãƒ‰ãƒ¼ãƒ³ã‚ºãƒ»ãƒ¬ã‚¹ãƒˆã€ã«é›†ã£ãŸã‚¢ãƒ«ãƒ•ã‚£ãƒãŸã¡ã¯ã€ä¸–ç•Œä¸­ã«å‡ºç¾ã—ãŸã€Œå¡”ã€ã®è„…å¨ã«ã¤ã„ã¦å†ç¢ºèªã™ã‚‹ã€‚ãƒ†ãƒ­ãƒ•ã‚©ãƒ­ã‚¤ã«ã‚ˆã£ã¦é€ ã‚‰ã‚ŒãŸãã®æ§‹é€ ç‰©ã¯ã€äººã€…ã®ä¿¡ä»°ã‚’æ­ªã‚ã¦è›®ç¥ã‚’å¬å–šã—ã€å¤šãã®ç½ªãªãè€…ãŸã¡ã‚’è™œã«ã—ã¦ããŸã€‚ã‚¬ãƒ¬ãƒãƒ«ãƒ‰ã§ã¯æˆ¦ã®å£°ã‚‚ãªããªã‚Šã€ä½æ°‘ãŸã¡ã¯ç„¡è¨€ã®ã¾ã¾å·¨å¤§ãªå¡”ã‚’ç¯‰ãã€‚</p>
      <p>çµ‚æœ«ã¸ã®å±æ©ŸãŒè¿«ã‚‹ä¸­ã€ä¸€è¡Œã¯ã€Œãƒãƒ«ãƒ‡ã‚·ã‚ªãƒ³å§”å“¡ä¼šã®å”åŠ›è€…ã€ã¨ã—ã¦ã‚·ãƒ£ãƒ¼ãƒ¬ã‚¢ãƒ³ã¸å‘ã‹ã†ã“ã¨ã‚’æ±ºæ„ã™ã‚‹ã€‚ãƒªãƒ ã‚µãƒ»ãƒ­ãƒŸãƒ³ã‚µã‹ã‚‰ã®èˆ¹å‡ºã«éš›ã—ã¦ã€ã‚¿ã‚¿ãƒ«ãŒåˆ¥ã‚Œã‚’æƒœã—ã‚€ã€‚èˆªæµ·ä¸­ã€ã‚µãƒ³ã‚¯ãƒ¬ãƒƒãƒ‰ã¯ãƒ«ã‚¤ã‚¾ãƒ¯ã¨ã®å‡ºä¼šã„ã‚’æ€ã„å‡ºã—ã€ã‚¨ã‚¹ãƒ†ã‚£ãƒ‹ã‚¢ãƒ³ã¨ã‚¢ãƒ«ãƒ•ã‚£ãƒã®é–“ã«ã¯ãã“ã¡ãªã„ãªãŒã‚‰ã‚‚å¿ƒãŒé€šã†ã€‚ãã‚“ãªä¸­ã€ãƒã‚¤ãƒ‡ãƒªãƒ³ãŒå†’é™ºè€…ã«èªã‚Šã‹ã‘ã‚‹ã€‚</p>
      <p>è‡ªèº«ãŒè›®ç¥ã§ã‚ã‚‹ã“ã¨ã€åŠ›ã‚’å¤±ã„ã¤ã¤ã‚ã‚‹ã“ã¨ã€ãã—ã¦çµ‚æœ«ã®ç½å„ãŒè¿«ã£ã¦ã„ã‚‹ã“ã¨ã€‚ãã®è¨€è‘‰ã¯æµ·ã®å½¼æ–¹ã«æ¶ˆãˆã¦ã„ãã€‚ã‚„ãŒã¦èˆ¹ã¯ã‚·ãƒ£ãƒ¼ãƒ¬ã‚¢ãƒ³ã«åˆ°ç€ã™ã‚‹ã€‚å³æ ¼ãªå…¥å›½å¯©æŸ»ãŒå§‹ã¾ã‚Šã€ã²ã¨ã‚Šãšã¤æ‰‹ç¶šãã‚’å—ã‘ã‚‹ä»²é–“ãŸã¡ã€‚ã‚¢ãƒ«ãƒ•ã‚£ãƒã¨ã‚¢ãƒªã‚¼ãƒ¼ã¯çˆ¶ã®åã«è¨€åŠã•ã‚Œã€ã‚¨ã‚¹ãƒ†ã‚£ãƒ‹ã‚¢ãƒ³ã¯æ‹’å¦ã•ã‚Œã‹ã‘ã‚‹ãŒã€ã‚¯ãƒ«ãƒ«ã®æ”¯æ´ã§å…¨å“¡ãŒç„¡äº‹ã«å…¥å›½ã‚’æœãŸã™ã€‚ã“ã†ã—ã¦ä¸€è¡Œã¯ã€çµ‚æœ«ã®çœŸå®Ÿã«è¿«ã‚‹ã¹ãã€çŸ¥ã®éƒ½ã«è¶³ã‚’è¸ã¿å…¥ã‚Œã‚‹ã®ã ã£ãŸã€‚</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>ã‚¯ã‚¨ã‚¹ãƒˆç™ºè¡Œ</b> ã‚¢ãƒ«ãƒ•ã‚£ãƒ <small class="muted">ï¼ˆãƒ¢ãƒ¼ãƒ‰ã‚¥ãƒŠï¼šçŸ³ã®å®¶, X:6.0, Y:5.9ï¼‰</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="#">é»æ˜ã®æ­»é—˜</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="#">ã‚ªãƒ¼ãƒ«ãƒ‰ãƒ»ã‚·ãƒ£ãƒ¼ãƒ¬ã‚¢ãƒ³</a></div>
    </div>`
  },
  ZH:{
    langLabel:'ZH',
    pageTitle:'èˆªå‘å¤§æµ·çš„æ™‚åˆ»',
    tabs:{ story:'æ•…äº‹æ¦‚è¦', acq:'å–å¾—æ–¹å¼', unlockq:'è§£é–ä»»å‹™', followq:'å¾ŒçºŒä»»å‹™', comments:'ç•™è¨€' },
    readMore:'å±•é–‹å…¨æ–‡', readLess:'æ”¶åˆå…§å®¹',
    story:`<div class="clamp" data-collapsed="true">
      <p>Alphinaud åœ¨ Dawnâ€™s Respite å¬é›†çœ¾äººï¼Œé‡æ–°ç›¤é» Telophoroi çš„å¨è„…ã€‚ä»–å€‘åœ¨ä¸–ç•Œå„åœ°ç¯‰èµ·é«˜å¡”ï¼Œå°‡ç„¡è¾œä¹‹äººæ‰­æ›²ç‚ºåŸåˆå¬å–šçš„ç¥­å“ã€‚Garlemald å¦‚ä»Šé™·å…¥è©­ç•°çš„æ²‰é»˜ï¼Œå±…æ°‘åŒ–ç‚ºæ²‰é»˜çš„å¥´åƒ•ï¼Œç‚ºæƒ¡å¤¢èˆ¬çš„æ§‹é€ ç‰©ç„¡è¨€ç¯‰å¡”ã€‚é¢å°é€æ¼¸é€¼è¿‘çš„ç½å„ï¼ŒScions æ±ºå®šå‰å¾€ Sharlayanï¼Œä»¥ Baldesion å”æœƒå”åŠ›è€…çš„èº«åˆ†æ¢å°‹çœŸç›¸ã€‚å•Ÿèˆªå‰ï¼ŒTataru ç‚ºçœ¾äººé€è¡Œã€‚</p>
      <p>èˆªç¨‹ä¸­ï¼ŒThancred å›æ†¶èµ·åˆæ¬¡èˆ‡ Louisoix ç›¸é‡çš„ç‰‡æ®µï¼ŒEstinien èˆ‡ Alphinaud ä¹Ÿåœ¨å°·å°¬èˆ‡èª¿ä¾ƒé–“é€æ¼¸å»ºç«‹èµ·æ–°çš„é»˜å¥‘ã€‚å¿½ç„¶é–“ï¼ŒHydaelyn çš„è²éŸ³éŸ¿èµ·ï¼Œå° Warrior of Light å‚³é”è‡ªèº«ä½œç‚ºåŸåˆå­˜åœ¨çš„çœŸç›¸ã€é€æ¼¸è¡°é€€çš„åŠ›é‡ï¼Œä»¥åŠå³å°‡åˆ°ä¾†çš„ Final Daysã€‚èªç•¢ï¼Œå¥¹çš„è²éŸ³éš¨é¢¨è€Œé€ã€‚</p>
      <p>ä¸€è¡ŒäººæŠµé” Sharlayanï¼Œè¿ä¾†åš´æ ¼çš„å…¥å¢ƒå¯©æŸ¥ã€‚Alisaie èˆ‡ Alphinaud é¢å°å®¶æ—é¢¨æ³¢ï¼ŒEstinien æ›´å·®é»è¢«æ‹’ï¼Œæ‰€å¹¸åœ¨ Krile å‡ºé¢æ“”ä¿ä¸‹å…¨å“¡é †åˆ©é€šé—œã€‚ç©¿è¶Šæ¸¯å£ï¼Œä»–å€‘çµ‚æ–¼è¸ä¸Šé€™ç‰‡å……æ»¿æ™ºæ…§èˆ‡æˆ’å¿ƒçš„åœŸåœ°â”€â”€Sharlayanï¼Œé€šå¾€çœŸç›¸çš„èµ·é»ã€‚</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>ä»»å‹™ç™¼å¸ƒ</b> é˜¿çˆ¾è²è«¾ <small class="muted">ï¼ˆçŸ³ä¹‹å®¶, X:6.0, Y:5.9ï¼‰</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="#">é»æ˜ä¹‹æˆ°</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="#">å¤è–©é›·å®‰ï¼Œæ–°ç¯‡ç« </a></div>
    </div>`
  }
};

const langToggle  = document.getElementById('langToggle');
const pageTitle   = document.getElementById('pageTitle');
const tabBtns     = [...document.querySelectorAll('.tab-btn')];
const panels = {
  story:  document.getElementById('panel-story'),
  acq:    document.getElementById('panel-acq'),
  unlockq:document.getElementById('panel-unlockq'),
  followq:document.getElementById('panel-followq'),
  comments: document.getElementById('panel-comments')
};

function getLang(){ return localStorage.getItem(LANG_KEY) || 'EN'; }
function applyLang(lang){
  const t = i18n[lang] || i18n.EN;
  pageTitle.textContent = t.pageTitle;
  langToggle.textContent = `ğŸŒ ${t.langLabel}`;
  tabBtns.forEach(btn => { btn.textContent = t.tabs[btn.dataset.tab]; });
  const activeBtn = tabBtns.find(b => b.getAttribute('aria-selected')==='true') || tabBtns[0];
  renderPanel(activeBtn.dataset.tab, lang);
}

function wireClamp(panelEl, t){
  const clamp = panelEl.querySelector('.clamp');
  const btn = panelEl.querySelector('[data-role="expand"]');
  if(!clamp || !btn) return;
  function setLabel(){
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    btn.textContent = collapsed ? t.readMore : t.readLess;
  }
  setLabel();
  btn.addEventListener('click', ()=>{
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    clamp.setAttribute('data-collapsed', collapsed ? 'false' : 'true');
    setLabel();
  });
}

function renderPanel(key, lang){
  const t = i18n[lang] || i18n.EN;
  Object.keys(panels).forEach(k => panels[k].classList.remove('active'));
  panels[key].classList.add('active');
  if (key !== 'comments') panels[key].innerHTML = t[key];
  if (key === 'story') wireClamp(panels[key], t);
  if (key === 'comments') loadGiscusForCurrentLang();
}

tabBtns.forEach(btn=>{
  btn.addEventListener('click', ()=>{
    tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
    btn.setAttribute('aria-selected','true');
    renderPanel(btn.dataset.tab, getLang());
  });
});

langToggle.addEventListener('click', ()=>{
  const cur = getLang();
  const next = cur==='EN' ? 'JP' : (cur==='JP' ? 'ZH' : 'EN');
  localStorage.setItem(LANG_KEY, next);
  applyLang(next);
});

applyLang(getLang());

/* === Giscusï¼šComments åˆ†é ï¼ˆèˆ‡å¤šèªè‡ªå‹•åˆ‡æ›ï¼‰ === */
const GISCUS_CFG = {
      repo: 'BELAUG-FFXIV/FFXIV_Library',
      repoId: 'R_kgDOPyh4Kw',
      category: 'General',
      categoryId: 'DIC_kwDOPyh4K84CwPjL',
      theme: 'preferred_color_scheme'
};
function uiLang(code){ return code==='JP' ? 'ja' : (code==='ZH' ? 'zh-TW' : 'en'); }
function loadGiscusForCurrentLang(){
  const mount = document.getElementById('giscus_container');
  if (!mount) return;
  mount.innerHTML = '';
  const langCode = getLang();
  const s = document.createElement('script');
  s.src = 'https://giscus.app/client.js';
  s.setAttribute('data-repo', GISCUS_CFG.repo);
  s.setAttribute('data-repo-id', GISCUS_CFG.repoId);
  s.setAttribute('data-category', GISCUS_CFG.category);
  s.setAttribute('data-category-id', GISCUS_CFG.categoryId);
  s.setAttribute('data-mapping', 'specific');
  s.setAttribute('data-term', location.pathname + 'ï½œ' + langCode);
  s.setAttribute('data-reactions-enabled', '1');
  s.setAttribute('data-emit-metadata', '0');
  s.setAttribute('data-input-position', 'bottom');
  s.setAttribute('data-lang', uiLang(langCode));
  s.setAttribute('data-theme', GISCUS_CFG.theme);
  s.setAttribute('crossorigin', 'anonymous');
  s.async = true;
  mount.appendChild(s);
}
</script>
</body>
</html>
