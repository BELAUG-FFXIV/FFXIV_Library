<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The Rose and the Unicorn | BELAUG Â· FFXIV Library</title>
  <meta name="description" content="MSQ â€“ The Rose and the Unicorn (ARR Patch 2.0)">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root { --bg:#fff8e6; --card:#fff; --fg:#222; --muted:#666; --border:#e5e1d8; --accent:#e11d48; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif;background:var(--bg);color:var(--fg)}
    .container{max-width:1080px;margin:0 auto;padding:0 16px}
    .site-header{border-bottom:1px solid var(--border);background:#fff9edb3;backdrop-filter:saturate(120%) blur(6px);position:sticky;top:0;z-index:10}
    .nav{display:flex;align-items:center;justify-content:space-between;height:60px}
    .left{display:flex;align-items:center;gap:12px}
    .home{border:1px solid var(--border);background:#fff;padding:4px 8px;border-radius:8px;text-decoration:none;color:var(--fg);font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex;align-items:center;gap:8px}
    .icon-btn{background:none;border:none;cursor:pointer;font-size:14px;padding:6px 10px;border-radius:8px}
    .icon-btn:hover{background:#fff;border:1px solid var(--border)}
    .main{padding:20px 0 40px}
    .grid{display:grid;grid-template-columns:1.1fr 1fr;gap:20px;align-items:start}
    @media (max-width:900px){
      .grid{grid-template-columns:1fr}
      .video-wrap{position:relative;padding-top:56.25%}
      .video-wrap iframe{position:absolute;inset:0;width:100%;height:100%}
    }
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px;border-bottom:1px solid var(--border);font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%;height:420px;border:0;display:block;border-radius:16px}
    .tabs{display:flex;gap:8px;padding:12px 12px 0;flex-wrap:wrap}
    .tab-btn{background:#fff;border:1px solid var(--border);color:var(--fg);border-radius:999px;padding:8px 14px;cursor:pointer;font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent);color:#fff;background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex;flex-direction:column;gap:10px}
    .stack .row{padding:12px 14px;border:1px dashed var(--border);border-radius:12px;background:#fffdf6}
    .row b{display:inline-block;min-width:130px}
    .muted{color:var(--muted)}
    .link{color:#0b60d8;text-decoration:none}
    .link:hover{text-decoration:underline}
    .clamp{position:relative; max-height:360px; overflow:hidden}
    .clamp[data-collapsed="false"]{max-height:none}
    .clamp[data-collapsed="true"]::after{
      content:""; position:absolute; left:0; right:0; bottom:0; height:72px;
      background:linear-gradient(to bottom, rgba(255,255,255,0), var(--card)); pointer-events:none;
    }
    .expand-wrap{ margin-top:12px; }
    .expand-btn{
      display:inline-block; padding:8px 14px; border-radius:10px;
      background:var(--card); border:1px solid var(--border); cursor:pointer; font-weight:600;
    }
    .expand-btn:hover{ background:#fffef8; }
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">ğŸ  Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="åˆ‡æ›èªè¨€">ğŸŒ EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <!-- å·¦ï¼šå½±ç‰‡ -->
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/uU2fPgxZ7JA"
              title="The Rose and the Unicorn" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- å³ï¼šæ¨™é¡Œ + Tabs -->
      <section class="card">
        <div class="hd" id="pageTitle">The Rose and the Unicorn</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true"  data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Acquisition</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlockq">Unlock Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="followq">Follow-Up Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="comments">Comments</button>
        </div>
        <div class="bd">
          <div id="panel-story"   class="tab-panel active"></div>
          <div id="panel-acq"     class="tab-panel"></div>
          <div id="panel-unlockq" class="tab-panel"></div>
          <div id="panel-followq" class="tab-panel"></div>
          <div id="panel-comments" class="tab-panel">
            <div id="giscus_container" style="min-height:320px;"></div>
          </div>
        </div>
      </section>
    </div>
  </main>

<script>
const LANG_KEY = 'ffxiv-guide-lang';
const i18n = {
  EN:{
    langLabel:'EN',
    pageTitle:'The Rose and the Unicorn',
    tabs:{ story:'Story', acq:'Acquisition', unlockq:'Unlock Quest', followq:'Follow-Up Quest', comments:'Comments' },
    readMore:'Show more', readLess:'Show less',
    story:`<div class="clamp" data-collapsed="true">
      <p>Carrilaut draws you in close and speaks in a low voice, making it clear this is meant for you alone. Lord Francel, he insists, is no hereticâ€”only a good, righteous man, wholly dedicated to the cause. He says he knows this for a fact, having served House Haillenarte for years before the Calamity.</p>
      <p>You are told to go to Skyfire Locks and warn Francel of the storm that is coming. The inquisitors, Carrilaut warns, are ruthless, and they will spare him no mercy.</p>
      <p>To prove you are a friend, you are given a sign: speak to him of an edelweiss, and he will know you for one of his own. With that final instruction, Carrilaut sends you on your way.</p>
      <p>When you find Francel, he studies you and asks if you have something to say. Several strange phrases present themselvesâ€”talk of â€œthe bearers of the white lily,â€ â€œthe wild rose,â€ even a bold jest about an edelweissâ€”alongside the option to say nothing at all.</p>
      <p>If you speak of the white lily, Francel answers at once that you have come to the wrong place, for House Haillenarte bears the rose. He suggests you might seek Gridania instead, saying he has heard an ancient Duskwight house there was said to use the white lily as its sigil, and the exchange goes no further.</p>
      <p>Elsewhere in Coerthas, you are received at Camp Dragonhead by Haurchefant, who greets you as a well-traveled adventurer and tells you to be at easeâ€”he is not one to stand on formality. He says plainly that he would gladly welcome many more brave souls like you, but asks what has brought you here.</p>
      <p>He voices his hope that, if there is any justice in this world, the charges at hand will receive no serious consideration. Then he recalls that your letter mentioned a pressing matter for which you required assistance, and asks what it might be.</p>
      <p>When you speak of the Enterpriseâ€”last seen above Coerthas before the Calamity five years agoâ€”Haurchefant admits it may be difficult to find eyewitnesses. Ishgard did not participate in the Battle of Carteneau, he explains, and they were embroiled in their own internal conflicts at the time.</p>
      <p>Even so, he promises to make inquiries on your behalf and share what he learns in the future. Until then, he bids you enjoy the hospitality of Camp Dragonhead, and says he will see that you are afforded every courtesy as a guest of House Fortemps.</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>Quest Giver</b> Carrilaut <small class="muted">Coerthas Central Highlands (X:24.7, Y:28.8)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="three-for-three.html">Three for Three</a></div>
      <div class="row">All classes and jobs (excluding limited jobs) (Level 36 or above)</div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="the-talk-of-coerthas.html">The Talk of Coerthas</a></div>
    </div>`
  },
  JP:{
    langLabel:'JP',
    pageTitle:'ã‚¢ã‚¤ãƒ³ãƒãƒ«ãƒˆå®¶ã®å—é›£',
    tabs:{ story:'ã‚¹ãƒˆãƒ¼ãƒªãƒ¼', acq:'å…¥æ‰‹æ–¹æ³•', unlockq:'é–‹æ”¾ã‚¯ã‚¨ã‚¹ãƒˆ', followq:'å¾Œç¶šã‚¯ã‚¨ã‚¹ãƒˆ', comments:'ã‚³ãƒ¡ãƒ³ãƒˆ' },
    readMore:'å…¨æ–‡ã‚’è¡¨ç¤º', readLess:'æŠ˜ã‚ŠãŸãŸã‚€',
    story:`<div class="clamp" data-collapsed="true">
      <p>ã‚«ãƒªãƒ­ãƒ¼ã¯ã‚ãªãŸã‚’æ‰‹æ‹›ãã—ã€è€³æ‰“ã¡ã™ã‚‹ã‚ˆã†ã«èªã‚Šã‹ã‘ã‚‹ã€‚ã“ã‚Œã¯ã‚ãªãŸã ã‘ã«èã‹ã›ã‚‹è©±ã ã¨è¨€ã„ã€ãƒ•ãƒ©ãƒ³ã‚»ãƒ«å¿ã¯ç•°ç«¯è€…ãªã©ã§ã¯ãªãã€æ­£ã—ãæ¸…å»‰ã§ã€ãŸã ã²ãŸã™ã‚‰ã«å¤§ç¾©ã«èº«ã‚’æ§ã’ã‚‹äººç‰©ã ã¨æ–­è¨€ã™ã‚‹ã€‚ç¬¬ä¸ƒéœŠç½ä»¥å‰ã€é•·ãã‚¢ã‚¤ãƒ³ãƒãƒ«ãƒˆå®¶ã«ä»•ãˆã¦ã„ãŸã‹ã‚‰ã“ãã€ãã‚ŒãŒã‚ã‹ã‚‹ã®ã ã¨ã‚‚ã€‚</p>
      <p>ã‚ãªãŸã«æ±‚ã‚ã‚‰ã‚Œã‚‹ã®ã¯ã€ã‚¢ãƒ¼ãƒˆãƒœãƒ«ã‚°ç ¦ç¾¤ã¸å‘ã‹ã„ã€è¿«ã‚Šæ¥ã‚‹åµã‚’ãƒ•ãƒ©ãƒ³ã‚»ãƒ«å¿ã¸è­¦å‘Šã™ã‚‹ã“ã¨ã ã€‚å¯©å•å®˜ãŸã¡ã¯å®¹èµ¦ãŒãªãã€å½¼ã«æ…ˆæ‚²ã‚’ä¸ãˆã‚‹ã“ã¨ã¯ãªã„â€•â€•ã‚«ãƒªãƒ­ãƒ¼ã¯ãã†è¨€ã£ã¦ã€å±æ©Ÿã®åˆ‡è¿«ã‚’ä¼ãˆã‚‹ã€‚</p>
      <p>ãã—ã¦åˆè¨€è‘‰ã‚’æˆã‘ã‚‹ã€‚ã€Œè–„é›ªè‰ã€ã®åã‚’å‘Šã’ã‚Œã°ã€ã‚ãªãŸã‚’å‘³æ–¹ã¨çŸ¥ã‚‹ã¯ãšã ã¨ã€‚è¨€ã†ã¹ãã“ã¨ã‚’èƒ¸ã«åˆ»ã¿ã€ã‚ãªãŸã¯ãƒ•ãƒ©ãƒ³ã‚»ãƒ«å¿ã®ã‚‚ã¨ã¸å‘ã‹ã†ã€‚</p>
      <p>ãƒ•ãƒ©ãƒ³ã‚»ãƒ«å¿ã¯ã‚ãªãŸã‚’è¦‹ã‚‹ãªã‚Šã€ä½•ã‹è¨€ã„ãŸã’ã ãªã€ã¨å•ã„ã‹ã‘ã‚‹ã€‚ãã“ã§ã„ãã¤ã‹ã®è¨€è‘‰ã‚’é¸ã¹ã‚‹ã‚ˆã†ã«ãªã‚Šã€ã€Œç™½ç™¾åˆã€ã‚’æ²ã’ã‚‹è€…ã‚’æ±‚ã‚ã‚‹ã®ã‹ã€ã€Œé‡è–”è–‡ã€ãŒå’²ãæ–¹ã¸è¡Œãã®ã‹ã€ã‚ã‚‹ã„ã¯ã€Œè–„é›ªè‰ã€ã‚’æŒã¡å‡ºã™ã®ã‹ã€ä½•ã‚‚è¨€ã‚ãªã„ã®ã‹â€•â€•ãã‚“ãªé¸æŠãŒä¸¦ã¶ã€‚</p>
      <p>ã‚‚ã—ã€Œç™½ç™¾åˆã€ã‚’å£ã«ã™ã‚Œã°ã€ãƒ•ãƒ©ãƒ³ã‚»ãƒ«å¿ã¯ã™ãã«å‘Šã’ã‚‹ã€‚ã‚¢ã‚¤ãƒ³ãƒãƒ«ãƒˆå®¶ãŒæ²ã’ã‚‹ã®ã¯è–”è–‡ã§ã‚ã‚Šã€ã“ã“ã¯é•ã†ã®ã ã¨ã€‚ã‚°ãƒªãƒ€ãƒ‹ã‚¢ã¸å‘ã‹ãˆã°ã€ã€Œç™½ç™¾åˆã€ã®æ„åŒ ã‚’ç”¨ã„ã‚‹å¤ã„ãƒ€ã‚¹ã‚¯ã‚¦ã‚£ãƒ³ã‚°ã®å®¶ãŒã‚ã‚‹ã¨èã„ãŸã“ã¨ãŒã‚ã‚‹ã€ã¨ç¶šã‘ã€ä¼šè©±ã¯ãã“ã§é€”åˆ‡ã‚Œã‚‹ã€‚</p>
      <p>ã‚„ãŒã¦ã‚ãªãŸã¯ã‚­ãƒ£ãƒ³ãƒ—ãƒ»ãƒ‰ãƒ©ã‚´ãƒ³ãƒ˜ãƒƒãƒ‰ã¸æ‹›ã‹ã‚Œã€ã‚ªãƒ«ã‚·ãƒ¥ãƒ•ã‚¡ãƒ³ã«è¿ãˆã‚‰ã‚Œã‚‹ã€‚æ—…æ…£ã‚ŒãŸå†’é™ºè€…ã®æ°—é…ã ã¨ç¬‘ã¿ã‚’å‘ã‘ã€å½¢å¼ã°ã£ãŸæŒ¨æ‹¶ãªã©æ°—ã«ã›ãšæ¥½ã«ã—ã¦ãã‚Œã€ã¨è¨€ã†ã€‚ãã—ã¦ã€å‹‡æ•¢ãªè€…ãŒã‚‚ã£ã¨å¢—ãˆã‚Œã°ã‚ˆã„ã®ã«ã€ã¨æœ¬éŸ³ã‚’æ¼ã‚‰ã—ã¤ã¤ã€ãªãœæ¥ãŸã®ã‹ã¨å°‹ã­ã‚‹ã€‚</p>
      <p>å½¼ã¯ã€ã‚‚ã—ã“ã®ä¸–ã«æ­£ç¾©ãŒã‚ã‚‹ãªã‚‰ã€ã‹ã®å«Œç–‘ãŒé‡ãæ‰±ã‚ã‚Œã‚‹ã“ã¨ã¯ãªã„ã¯ãšã ã€ã¨èªã‚‹ã€‚ç¶šã‘ã¦ã€æ‰‹ç´™ã«ã¯æ€¥ã‚’è¦ã™ã‚‹åŠ©åŠ›ã®ä»¶ãŒè¨˜ã•ã‚Œã¦ã„ãŸã¨è¨€ã„ã€å…·ä½“çš„ã«ä½•ã‚’æœ›ã‚€ã®ã‹ã¨å•ã„è¿”ã™ã€‚</p>
      <p>ã‚ãªãŸãŒã€ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºãŒã‚¯ãƒ«ã‚¶ã‚¹ä¸Šç©ºã§ç¬¬ä¸ƒéœŠç½ã®äº”å¹´å‰ã«ç›®æ’ƒã•ã‚ŒãŸã“ã¨ã‚’è©±ã™ã¨ã€ã‚ªãƒ«ã‚·ãƒ¥ãƒ•ã‚¡ãƒ³ã¯ç›®æ’ƒè€…æ¢ã—ã®é›£ã—ã•ã‚’èªã‚ã‚‹ã€‚ã‚¤ã‚·ãƒ¥ã‚¬ãƒ«ãƒ‰ã¯ã‚«ãƒ«ãƒ†ãƒãƒ¼ã®æˆ¦ã„ã«å‚åŠ ã—ã¦ãŠã‚‰ãšã€ãã®é ƒã¯å›½å†…ã®äº‰ã„ã«è¿½ã‚ã‚Œã¦ã„ãŸã®ã ã¨èª¬æ˜ã™ã‚‹ã€‚ãã‚Œã§ã‚‚èª¿ã¹ã¯é€²ã‚ã€ã„ãšã‚Œçµæœã‚’ä¼ãˆã‚‹ã¨ç´„æŸã—ã€å½“é¢ã¯ã‚­ãƒ£ãƒ³ãƒ—ãƒ»ãƒ‰ãƒ©ã‚´ãƒ³ãƒ˜ãƒƒãƒ‰ã§ã®ã‚‚ã¦ãªã—ã‚’æ¥½ã—ã‚ã€ãƒ•ã‚©ãƒ«ã‚¿ãƒ³å®¶ã®å®¢ã¨ã—ã¦ç›¸å¿œã®å¾…é‡ã‚’ç”¨æ„ã—ã‚ˆã†ã€ã¨å‘Šã’ã‚‹ã€‚</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>ã‚¯ã‚¨ã‚¹ãƒˆç™ºè¡Œ</b> ã‚«ãƒªãƒ­ãƒ¼ã€€<small class="muted">ã‚¯ãƒ«ã‚¶ã‚¹ä¸­å¤®é«˜åœ° (X:24.7, Y:28.8)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="three-for-three.html">ç ¦ã«å®›ã¦ã‚‰ã‚ŒãŸè·ç‰©</a></div>
      <div class="row">ã™ã¹ã¦ï¼ˆãƒªãƒŸãƒ†ãƒƒãƒ‰ã‚¸ãƒ§ãƒ–ã‚’é™¤ãï¼‰Lv 36ï½</div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="the-talk-of-coerthas.html">å››å¤§åå®¶ã«è¨Šã</a></div>
    </div>`
  },
  ZH:{
    langLabel:'ZH',
    pageTitle:'è–”è–‡èˆ‡ç¨è§’ç¸ï¼ŒHouse Haillenarte å®¶è’™é›£',
    tabs:{ story:'æ•…äº‹æ¦‚è¦', acq:'å–å¾—æ–¹å¼', unlockq:'è§£é–ä»»å‹™', followq:'å¾ŒçºŒä»»å‹™', comments:'ç•™è¨€' },
    readMore:'å±•é–‹å…¨æ–‡', readLess:'æ”¶åˆå…§å®¹',
    story:`<div class="clamp" data-collapsed="true">
      <p>Carrilaut æŠŠä½ æ‹›åˆ°èº«é‚Šï¼Œå£“ä½è²éŸ³è¦ä½ é è¿‘è½æ¸…æ¥šâ”€â”€é€™äº›è©±åªèªªçµ¦ä½ è½ã€‚ä»–æ–¬é‡˜æˆªéµåœ°è¡¨ç¤ºï¼ŒFrancel ä¸¦éç•°ç«¯è€…ï¼›ä»–æ˜¯æ­£ç›´è€Œè™”èª çš„äººï¼Œå°‡è‡ªå·±å®Œå…¨å¥‰ç»çµ¦é‚£ä»½ä¿¡å¿µèˆ‡å¤§ç¾©ã€‚Carrilaut èªªè‡ªå·±ä¹‹æ‰€ä»¥èƒ½å¦‚æ­¤è‚¯å®šï¼Œæ˜¯å› ç‚ºåœ¨ Calamity ä¹‹å‰ï¼Œä»–æ›¾å¤šå¹´ä¾å¥‰ House Haillenarteã€‚</p>
      <p>ä»–è¦ä½ ç«‹åˆ»å‰å¾€ Skyfire Locksï¼Œè­¦å‘Š Francel é¢¨æš´å°‡è‡³ã€‚Carrilaut å¼·èª¿ï¼Œå¯©å•å®˜å†·é…·ç„¡æƒ…ï¼Œçµ•ä¸æœƒå° Francel æ‰‹ä¸‹ç•™æƒ…ã€‚</p>
      <p>ç‚ºäº†è®“ Francel ç¢ºèªä½ æ˜¯å¯ä¿¡ä¹‹äººï¼ŒCarrilaut äº¤ä»£ä½ ä¸€å€‹æš—è™Ÿï¼šåªè¦æåˆ° edelweissï¼ŒFrancel å°±æœƒçŸ¥é“ä½ æ˜¯æœ‹å‹ã€‚èªªå®Œï¼Œä»–å‚¬ä½ å‹•èº«ï¼Œä¸å¯è€½æ“±ã€‚</p>
      <p>ä½ æ‰¾åˆ° Francel æ™‚ï¼Œä»–æœ›è‘—ä½ å•é“ï¼šã€Œä½ çœ‹èµ·ä¾†åƒæ˜¯æœ‰è©±è¦èªªã€‚æ˜¯å—ï¼Ÿã€éš¨ä¹‹è€Œä¾†çš„ï¼Œæ˜¯å¹¾å¥é¢¨æ ¼è¿¥ç•°çš„è©±å¯ä¾›ä½ é–‹å£â”€â”€æã€Œwhite lily çš„æ‰¿è¼‰è€…ã€ã€èªªã€Œwild rose ç¶»æ”¾ä¹‹è™•ã€ã€ç”šè‡³é‚„æœ‰ä¸€å¥æ‹¿ edelweiss é–‹ç©ç¬‘çš„èª¿ä¾ƒï¼Œä»¥åŠã€Œä»€éº¼éƒ½ä¸èªªã€çš„é¸é …ã€‚</p>
      <p>è‹¥ä½ é¸æ“‡æåŠ white lilyï¼ŒFrancel ç«‹åˆ»å›æ‡‰ä½ ä¾†éŒ¯äº†åœ°æ–¹ï¼Œå› ç‚º House Haillenarte æ‰€æ‰¿è¼‰çš„æ˜¯ roseã€‚ä»–é‚„æåˆ°ï¼Œä½ æˆ–è¨±è©²å» Gridaniaâ”€â”€ä»–è½èªªé‚£è£¡æ›¾æœ‰ä¸€å€‹å¤è€çš„ Duskwight å®¶æ—ä»¥ white lily ç‚ºç´‹ç« ã€‚è©±è‡³æ­¤ï¼Œå°è©±ä¹Ÿå°±ä¸­æ–·äº†ã€‚</p>
      <p>ä¹‹å¾Œä½ ä¾†åˆ° Camp Dragonheadï¼ŒHaurchefant ä»¥ä¸€ç¨®è¼•å¿«è€Œä¸æ‹˜ç¦®æ•¸çš„æ…‹åº¦è¿æ¥ä½ ï¼Œç¨±ä½ èº«ä¸Šå¸¶è‘—å››è™•æ—…è¡Œçš„å†’éšªè€…ç‰¹æœ‰çš„æ°£å‹¢ã€‚ä»–èªªè‹¥ä½ æ˜¯ä¾†è‡´æ„ï¼Œç„¡é ˆæ‹˜æ³¥å½¢å¼ï¼›ä»–å‘ä¾†ä¸å–œç¹æ–‡ç¸Ÿç¯€ã€‚å¯’æš„éå¾Œï¼Œä»–å•ä½ æ­¤è¡Œæ‰€ç‚ºä½•ä¾†ã€‚</p>
      <p>ä»–æ„Ÿå˜†ï¼Œè‹¥é€™ä¸–ä¸ŠçœŸæœ‰æ­£ç¾©ï¼Œé‚£äº›æŒ‡æ§å°±ä¸è©²è¢«åš´è‚…çœ‹å¾…ã€‚æ¥è‘—ä»–æƒ³èµ·ä½ çš„ä¿¡è£¡æåˆ°ï¼Œä½ æœ‰ä¸€ä»¶æ€¥äº‹éœ€è¦å”åŠ©ï¼Œä¾¿è«‹ä½ èªªæ˜ç©¶ç«Ÿæ‰€æ±‚ç‚ºä½•ã€‚</p>
      <p>ç•¶ä½ æèµ· Enterpriseâ”€â”€åœ¨äº”å¹´å‰ã€Calamity ç™¼ç”Ÿå‰æ›¾æ–¼ Coerthas ä¸Šç©ºå‡ºç¾â”€â”€Haurchefant å¦è¨€è¦æ‰¾å‡ºç›®æ“Šè€…ææ€•ä¸æ˜“ã€‚ä»–è§£é‡‹ï¼ŒIshgard ä¸¦æœªåƒèˆ‡ Battle of Carteneauï¼Œç•¶æ™‚ä»–å€‘æ­£é™·æ–¼è‡ªèº«çš„å…§éƒ¨è¡çªä¹‹ä¸­ã€‚</p>
      <p>å„˜ç®¡å¦‚æ­¤ï¼ŒHaurchefant ä»æ‰¿è«¾æœƒæ›¿ä½ æ‰“è½ä¸¦åœ¨æ—¥å¾Œå‘ŠçŸ¥çµæœã€‚åœ¨é‚£ä¹‹å‰ï¼Œä»–è«‹ä½ å®‰å¿ƒäº«å— Camp Dragonhead çš„æ‹›å¾…ï¼Œä¸¦è¡¨ç¤ºä½ å°‡ä»¥ House Fortemps çš„è²´å®¢èº«åˆ†ï¼Œç²å¾—æ‡‰æœ‰çš„ä¸€åˆ‡ç¦®é‡ã€‚</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>ä»»å‹™ç™¼å¸ƒ</b> å¡é‡Œç¾…ã€€<small class="muted">åº«çˆ¾æœ­æ–¯ä¸­å¤®é«˜åœ° (X:24.7, Y:28.8)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="three-for-three.html">å¯„å¾€å ¡å£˜çš„åŒ…è£¹</a></div>
      <div class="row">æ‰€æœ‰è·æ¥­ï¼ˆä¸å«é™å®šè·ï¼‰ ç­‰ç´š 36 ä»¥ä¸Š</div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="the-talk-of-coerthas.html">ç‚ºæ¢Coerthas é¢¨è²è€Œè¨ªå››å¤§åå®¶</a></div>
    </div>`
  }
};

const langToggle  = document.getElementById('langToggle');
const pageTitle   = document.getElementById('pageTitle');
const tabBtns     = [...document.querySelectorAll('.tab-btn')];
const panels = {
  story:  document.getElementById('panel-story'),
  acq:    document.getElementById('panel-acq'),
  unlockq:document.getElementById('panel-unlockq'),
  followq:document.getElementById('panel-followq'),
  comments: document.getElementById('panel-comments')
};

function getLang(){ return localStorage.getItem(LANG_KEY) || 'EN'; }
function applyLang(lang){
  const t = i18n[lang] || i18n.EN;
  pageTitle.textContent = t.pageTitle;
  langToggle.textContent = `ğŸŒ ${t.langLabel}`;
  tabBtns.forEach(btn => { btn.textContent = t.tabs[btn.dataset.tab]; });
  const activeBtn = tabBtns.find(b => b.getAttribute('aria-selected')==='true') || tabBtns[0];
  renderPanel(activeBtn.dataset.tab, lang);
}

function wireClamp(panelEl, t){
  const clamp = panelEl.querySelector('.clamp');
  const btn = panelEl.querySelector('[data-role="expand"]');
  if(!clamp || !btn) return;
  function setLabel(){
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    btn.textContent = collapsed ? t.readMore : t.readLess;
  }
  setLabel();
  btn.addEventListener('click', ()=>{
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    clamp.setAttribute('data-collapsed', collapsed ? 'false' : 'true');
    setLabel();
  });
}

function renderPanel(key, lang){
  const t = i18n[lang] || i18n.EN;
  Object.keys(panels).forEach(k => panels[k].classList.remove('active'));
  panels[key].classList.add('active');
  if (key !== 'comments') panels[key].innerHTML = t[key];
  if (key === 'story') wireClamp(panels[key], t);
  if (key === 'comments') loadGiscusForCurrentLang();
}

tabBtns.forEach(btn=>{
  btn.addEventListener('click', ()=>{
    tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
    btn.setAttribute('aria-selected','true');
    renderPanel(btn.dataset.tab, getLang());
  });
});

langToggle.addEventListener('click', ()=>{
  const cur = getLang();
  const next = cur==='EN' ? 'JP' : (cur==='JP' ? 'ZH' : 'EN');
  localStorage.setItem(LANG_KEY, next);
  applyLang(next);
});

applyLang(getLang());

const GISCUS_CFG = {
  repo: 'BELAUG-FFXIV/FFXIV_Library',
  repoId: 'R_kgDOPyh4Kw',
  category: 'General',
  categoryId: 'DIC_kwDOPyh4K84CwPjL',
  theme: 'preferred_color_scheme'
};
function uiLang(code){ return code==='JP' ? 'ja' : (code==='ZH' ? 'zh-TW' : 'en'); }
function loadGiscusForCurrentLang(){
  const mount = document.getElementById('giscus_container');
  if (!mount) return;
  mount.innerHTML = '';
  const langCode = getLang();
  const s = document.createElement('script');
  s.src = 'https://giscus.app/client.js';
  s.setAttribute('data-repo', GISCUS_CFG.repo);
  s.setAttribute('data-repo-id', GISCUS_CFG.repoId);
  s.setAttribute('data-category', GISCUS_CFG.category);
  s.setAttribute('data-category-id', GISCUS_CFG.categoryId);
  s.setAttribute('data-mapping', 'specific');
  s.setAttribute('data-term', location.pathname + 'ï½œ' + langCode);
  s.setAttribute('data-reactions-enabled', '1');
  s.setAttribute('data-emit-metadata', '0');
  s.setAttribute('data-input-position', 'bottom');
  s.setAttribute('data-lang', uiLang(langCode));
  s.setAttribute('data-theme', GISCUS_CFG.theme);
  s.setAttribute('crossorigin', 'anonymous');
  s.async = true;
  mount.appendChild(s);
}
</script>
</body>
</html>
