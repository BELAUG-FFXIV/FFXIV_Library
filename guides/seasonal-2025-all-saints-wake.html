<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>2025 All Saint’s Wake | BELAUG · FFXIV Library</title>
  <meta name="description" content="Seasonal Quest – 2025 All Saint’s Wake (守護天節與回歸的馬戲團)">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root{ --bg:#fff8e6; --card:#fff; --fg:#222; --muted:#666; --border:#e5e1d8; --accent:#e11d48; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif;background:var(--bg);color:var(--fg)}
    .container{max-width:1080px;margin:0 auto;padding:0 16px}
    .site-header{border-bottom:1px solid var(--border);background:#fff9edb3;backdrop-filter:saturate(120%) blur(6px);position:sticky;top:0;z-index:10}
    .nav{display:flex;align-items:center;justify-content:space-between;height:60px}
    .left{display:flex;align-items:center;gap:12px}
    .home{border:1px solid var(--border);background:#fff;padding:4px 8px;border-radius:8px;text-decoration:none;color:var(--fg);font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex;align-items:center;gap:8px}
    .icon-btn{background:none;border:none;cursor:pointer;font-size:14px;padding:6px 10px;border-radius:8px}
    .icon-btn:hover{background:#fff;border:1px solid var(--border)}
    .main{padding:20px 0 40px}
    .grid{display:grid;grid-template-columns:1.1fr 1fr;gap:20px;align-items:start}
    @media (max-width:900px){
      .grid{grid-template-columns:1fr}
      .video-wrap{position:relative;padding-top:56.25%}
      .video-wrap iframe{position:absolute;inset:0;width:100%;height:100%}
    }
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px;border-bottom:1px solid var(--border);font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%;height:420px;border:0;display:block;border-radius:16px}
    .tabs{display:flex;gap:8px;padding:12px 12px 0;flex-wrap:wrap}
    .tab-btn{background:#fff;border:1px solid var(--border);color:var(--fg);border-radius:999px;padding:8px 14px;cursor:pointer;font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent);color:#fff;background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex;flex-direction:column;gap:10px}
    .stack .row{padding:12px 14px;border:1px dashed var(--border);border-radius:12px;background:#fffdf6}
    .row b{display:inline-block;min-width:130px}
    .muted{color:var(--muted)}
    .link{color:#0b60d8;text-decoration:none}
    .link:hover{text-decoration:underline}
    /* === expandable story === */
    .story-wrap{position:relative}
    .story-content{max-height:360px;overflow:hidden;position:relative}
    .story-content::after{content:"";position:absolute;left:0;right:0;bottom:0;height:64px;background:linear-gradient(to top,var(--card),transparent)}
    .story-expanded{max-height:none!important}
    .story-expanded::after{display:none}
    .expand-btn{margin-top:8px;background:#fff;border:1px solid var(--border);padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:600}
    @media (max-width:600px){.story-content{max-height:260px}}
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">🏠 Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="切換語言">🌐 EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <!-- 左：影片 -->
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/xXNXQLxvvJE"
              title="2025 All Saint’s Wake" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- 右：標題 + Tabs（Seasonal：無 Requirements） -->
      <section class="card">
        <div class="hd" id="pageTitle">2025 All Saint’s Wake</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true"  data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Acquisition</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="event">Event Period</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlockq">Unlock Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="followq">Follow-Up Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="comments">Comments</button>
        </div>
        <div class="bd">
          <div id="panel-story"    class="tab-panel active"></div>
          <div id="panel-acq"      class="tab-panel"></div>
          <div id="panel-event"    class="tab-panel"></div>
          <div id="panel-unlockq"  class="tab-panel"></div>
          <div id="panel-followq"  class="tab-panel"></div>
          <div id="panel-comments" class="tab-panel">
            <div id="giscus_container" style="min-height:320px;"></div>
          </div>
        </div>
      </section>
    </div>
  </main>

  <script>
    const LANG_KEY = 'ffxiv-guide-lang';
    const i18n = {
      EN:{
        langLabel:'EN',
        pageTitle:'2025 All Saint’s Wake',
        tabs:{ story:'Story', acq:'Acquisition', event:'Event Period', unlockq:'Unlock Quest', followq:'Follow-Up Quest', comments:'Comments' },
        story:`<div class="story-wrap"><div class="story-content">
<p><b>Frights of Fancy</b><br>
As the night of All Saints’ Wake descends upon Gridania, the air stirs with whispers of masked revelry. You meet a pumpkin-headed stranger who speaks of the return of the Continental Circus, a troupe famed for their bone-chilling performances. He invites you to witness their masquerade within the haunted manor, where laughter and fear entwine.</p>
<p>Inside, the Impresario greets you with nervous surprise—he remembers you from past festivities. Once devoted to summoning the Night of Devilry, he now seeks harmony between mortals and fiends. Yet chaos brews anew: guests flee in terror as performers forget their oaths of entertainment and indulge in frightful antics. Entrusting you with the investigation, the Impresario begs that you uncover the cause before the guild’s suspicion falls upon them once again.</p>
<p>As you wander the manor’s shadowed halls, you encounter mischievous puddings, ravenous zombies, and a temperamental magic pot demanding elixirs for treats. Disorder reigns, yet behind every horror lies a trace of misplaced zeal—a longing to entertain gone astray.</p>
<p><b>Dressed to Impresario</b><br>
Seeking a solution, you reunite with the pumpkin-headed guide, who forges a curious creation: a clockwork replica of the Impresario himself, infused with both trick and treat. Donning this enchanted form, you march through the manor to restore balance—offering sweets to trembling guests and firm lessons to overzealous performers.</p>
<p>One by one, the troupe members repent. The pudding laments its chaos, the zombie swears to frighten no more, and even the magic pot cheers for smiles over screams. Together they rediscover the joy of shared laughter, and the masquerade finds its heart once again.</p>
<p>At Mih Khetto’s Amphitheatre, the Impresario finally meets his mysterious benefactor—the enigmatic Pumpkin, whose aura recalls the Great Gourd of legend. Amid teasing laughter, he vows to continue spreading joy, inviting you to visit their haunted halls whenever the season returns.</p>
<p>For the first time, the Impresario feels what All Saints’ Wake was always meant to be—not a night of terror, but a celebration of delight and unity.</p>
</div><button class="expand-btn" data-more="Read more" data-less="Show less">Read more</button></div>`,
        acq:`<div class="stack">
          <div class="row"><b>Quest Giver</b> Pumpkin-headed Apparition <small class="muted">(Old Gridania - Mih Khetto’s Amphitheatre, X:10.2, Y:9.5)</small></div>
        </div>`,
        event:`<div class="stack"><div class="row">October 17 – November 4, 2025</div></div>`,
        unlockq:`<div class="stack"><div class="row">Any Class (Level 15)</div></div>`,
        followq:`<div class="stack"><div class="row">Included in Story</div></div>`
      },

      JP:{
        langLabel:'JP',
        pageTitle:'2025 守護天節',
        tabs:{ story:'ストーリー', acq:'入手方法', event:'開催期間', unlockq:'開放クエスト', followq:'後続クエスト', comments:'コメント' },
        story:`<div class="story-wrap"><div class="story-content">
<p><b>守護天節と帰ってきたサーカス</b><br>
守護天節の夜、グリダニアの街に不思議な仮面舞踏会の噂が広がる。あなたは、かぼちゃ頭の案内人と出会い、彼から恐怖と笑いを愛する一座「コンチネンタル・サーカス」の再来を知らされる。彼らが催す仮面舞踏会が、古びた館で行われているというのだ。</p>
<p>館に足を踏み入れると、座長インプレサリオが驚いたように迎えてくれる。かつて「悪鬼夜行」の伝承を復活させようとした彼は、今では人と妖異が共に楽しむ宴を目指している。しかし今年も混乱が起き、観客が恐怖に駆られて逃げ惑っていた。インプレサリオはあなたに原因の調査を託し、このままでは再び冒険者ギルドに疑われると案じる。</p>
<p>薄暗い廊下を進むあなたは、暴走するプリン、血に飢えたゾンビ、そしてエリクサーを求めるマジックポットと遭遇する。恐怖の裏には、楽しませたいという純粋な思いがねじれていた。</p>
<p>困り果てたあなたの前に、再びかぼちゃの案内人が現れる。彼はインプレサリオそっくりのからくり人形「アンビュラリオ」を作り出し、「悪戯」と「ご褒美」を使い分けて皆を導くよう助言する。あなたはその姿となって館を巡り、怯える客には菓子を、暴走する団員にはお仕置きを与える。</p>
<p>次第に団員たちは初心を取り戻し、恐怖よりも笑顔を届けようと誓い合う。プリンもゾンビもマジックポットも、皆が「笑顔こそ守護天節の真髄」と叫ぶのだった。</p>
<p>後日、ミィ・ケット野外音楽堂で、インプレサリオは白いかぼちゃ頭の女性──謎めいたパンプキンと対面する。伝説の「大かぼちゃ」を思わせる彼女に感謝を述べた後、彼は再び誓う。「恐怖だけではなく、楽しさを届けるために」。</p>
<p>初めて本当の意味で守護天節を楽しめたと感じたインプレサリオは、来訪者に笑顔で告げる。「また館に遊びに来てください。私たちはいつでも歓迎します」と。</p>
<p><b>守護天節とふたつの幻影</b><br>
混乱が続く館を前に、あなたは再びかぼちゃ頭の案内人と相まみえる。彼女は新たな策を授けるため、奇妙なからくり人形──インプレサリオそっくりの「アンビュラリオ」を創り出した。これに乗り込み、「お菓子」と「悪戯」を使い分けて騒動を鎮めるよう告げる。</p>
<p>あなたは館の中を巡り、怯える客には甘いご褒美を、暴走する団員には軽いお仕置きを与えて回る。やがてプリンもゾンビもマジックポットも、自らの過ちを悟り、恐怖ではなく笑顔を届けようと誓い合うのだった。</p>
<p>ミィ・ケット野外音楽堂に戻ると、インプレサリオはかぼちゃ頭の女性と初めて対面する。その姿は伝説の「大かぼちゃ」を思わせたが、彼は冗談めかして笑い飛ばし、深く感謝を述べた。</p>
<p>「恐怖と喜びは紙一重──だが、我らが選ぶのは笑顔の道だ。」<br>
そう語るインプレサリオは、初めて本当の守護天節を楽しめたと微笑む。彼は再び館へ戻り、訪れる客を迎える準備を整えるのだった。</p>
</div><button class="expand-btn" data-more="続きを読む" data-less="折りたたむ">続きを読む</button></div>`,
        acq:`<div class="stack">
          <div class="row"><b>クエスト発行</b> パンプキンヘッドの亡霊 <small class="muted">（グリダニア：旧市街 ミィ・ケット野外音楽堂, X:10.2, Y:9.5）</small></div>
        </div>`,
        event:`<div class="stack"><div class="row">2025年10月17日～11月4日</div></div>`,
        unlockq:`<div class="stack"><div class="row">いずれかのクラス (Lv15)</div></div>`,
        followq:`<div class="stack"><div class="row">ストーリーに含まれる</div></div>`
      },

      ZH:{
        langLabel:'ZH',
        pageTitle:'2025 守護天節與回歸的馬戲團',
        tabs:{ story:'故事概要', acq:'取得方式', event:'活動期間', unlockq:'解鎖任務', followq:'後續任務', comments:'留言' },
        story:`<div class="story-wrap"><div class="story-content">
<p><b>守護天節與回歸的馬戲團</b><br>
守護天節的夜色再度籠罩格里達尼亞。你在街頭遇見一位南瓜頭的神秘人，他低聲告訴你──「大陸馬戲團」回來了。這群熱衷於驚悚表演的旅人，正在古老莊園舉辦一場盛大的化妝舞會。</p>
<p>進入莊園後，主持人 Impresario 帶著驚訝迎接你。他坦言自己已不再追求「惡鬼夜行」的傳說，而是希望讓人類與異界共度歡樂。然而混亂再次降臨：賓客驚恐逃竄，團員沉迷於嚇人表演。 Impresario 懇請你查明緣由，以免守護天節再度被誤解為災厄之夜。</p>
<p>你穿梭於陰影走廊，面對狂笑的布丁、咆哮的殭屍，以及吵著要 Elixir 換糖的魔壺。恐懼的背後，其實只是迷失的熱情──那些忘了初心的演者，仍渴望帶來歡笑。</p>
<p><b>守護天節與雙重幻影</b><br>
為了恢復秩序，南瓜頭再度現身，製作出一具 Impresario 的機械分身 ── Ambulario。你化身其中，踏上莊園巡迴，對賓客撒下糖果、對誤入歧途的團員施以懲戒。</p>
<p>最終，團員們紛紛悔悟。布丁不再沉迷混亂，殭屍誓言收斂驚嚇，魔壺則高呼「要笑容，不要尖叫！」。眾人重新找回「共享歡樂」的初心。</p>
<p>回到 Mih Khetto 音樂堂， Impresario 與神秘的 Pumpkin 正式相見。她的存在令人聯想到傳說中的「大南瓜」，而他只是笑著否認。那一刻，他終於理解守護天節真正的意義──不是恐懼的夜，而是眾人同歡的節慶。</p>
</div><button class="expand-btn" data-more="展開全文" data-less="收合內文">展開全文</button></div>`,
        acq:`<div class="stack">
          <div class="row"><b>任務發布</b> 南瓜頭幽靈 <small class="muted">（格里達尼亞 - 舊市街 米・凱托露天音樂堂, X:10.2, Y:9.5）</small></div>
        </div>`,
        event:`<div class="stack"><div class="row">2025年10月17日 – 11月4日</div></div>`,
        unlockq:`<div class="stack"><div class="row">任意職業（等級15）</div></div>`,
        followq:`<div class="stack"><div class="row">已收錄於故事</div></div>`
      }
    };

    const langToggle  = document.getElementById('langToggle');
    const pageTitle   = document.getElementById('pageTitle');
    const tabBtns     = [...document.querySelectorAll('.tab-btn')];
    const panels = {
      story:  document.getElementById('panel-story'),
      acq:    document.getElementById('panel-acq'),
      event:  document.getElementById('panel-event'),
      unlockq:document.getElementById('panel-unlockq'),
      followq:document.getElementById('panel-followq'),
      comments: document.getElementById('panel-comments')
    };

    function getLang(){ return localStorage.getItem(LANG_KEY) || 'EN'; }

    // 綁定收合按鈕
    function wireStoryToggler(root){
      const btn = root.querySelector('.expand-btn');
      const content = root.querySelector('.story-content');
      if(!btn || !content) return;
      const more = btn.getAttribute('data-more');
      const less = btn.getAttribute('data-less');
      btn.onclick = ()=>{
        const expanded = content.classList.toggle('story-expanded');
        btn.textContent = expanded ? less : more;
      };
    }

    function applyLang(lang){
      const t = i18n[lang] || i18n.EN;
      pageTitle.textContent = t.pageTitle;
      langToggle.textContent = `🌐 ${t.langLabel}`;
      tabBtns.forEach(btn => { btn.textContent = t.tabs[btn.dataset.tab]; });
      const activeBtn = tabBtns.find(b => b.getAttribute('aria-selected')==='true') || tabBtns[0];
      renderPanel(activeBtn.dataset.tab, lang);
    }

    function renderPanel(key, lang){
      const t = i18n[lang] || i18n.EN;
      Object.keys(panels).forEach(k => panels[k].classList.remove('active'));
      panels[key].classList.add('active');

      if(key !== 'comments'){
        panels[key].innerHTML = t[key];
        if(key==='story') wireStoryToggler(panels[key]); // 每次渲染都重新綁定
      }else{
        loadGiscusForCurrentLang();
      }
    }

    tabBtns.forEach(btn=>{
      btn.addEventListener('click', ()=>{
        tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
        btn.setAttribute('aria-selected','true');
        renderPanel(btn.dataset.tab, getLang());
      });
    });

    langToggle.addEventListener('click', ()=>{
      const cur = getLang();
      const next = cur==='EN' ? 'JP' : (cur==='JP' ? 'ZH' : 'EN');
      localStorage.setItem(LANG_KEY, next);
      applyLang(next);
    });

    /* === Giscus：Comments 分頁 === */
    const GISCUS_CFG = {
      repo: 'BELAUG-FFXIV/FFXIV_Library',
      repoId: 'R_kgDOPyh4Kw',
      category: 'General',
      categoryId: 'DIC_kwDOPyh4K84CwPjL',
      theme: 'preferred_color_scheme'
    };
    function uiLang(code){ return code==='JP' ? 'ja' : (code==='ZH' ? 'zh-TW' : 'en'); }
    function loadGiscusForCurrentLang(){
      const mount = document.getElementById('giscus_container');
      if (!mount) return;
      mount.innerHTML = '';
      const langCode = getLang();
      const s = document.createElement('script');
      s.src = 'https://giscus.app/client.js';
      s.setAttribute('data-repo', GISCUS_CFG.repo);
      s.setAttribute('data-repo-id', GISCUS_CFG.repoId);
      s.setAttribute('data-category', GISCUS_CFG.category);
      s.setAttribute('data-category-id', GISCUS_CFG.categoryId);
      s.setAttribute('data-mapping', 'specific');
      s.setAttribute('data-term', location.pathname + '｜' + langCode);
      s.setAttribute('data-reactions-enabled', '1');
      s.setAttribute('data-emit-metadata', '0');
      s.setAttribute('data-input-position', 'bottom');
      s.setAttribute('data-lang', uiLang(langCode));
      s.setAttribute('data-theme', GISCUS_CFG.theme);
      s.setAttribute('crossorigin', 'anonymous');
      s.async = true;
      mount.appendChild(s);
    }

    applyLang(getLang());
  </script>
</body>
</html>
