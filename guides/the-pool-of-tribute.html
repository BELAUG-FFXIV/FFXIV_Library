<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The Pool of Tribute | BELAUG Â· FFXIV Library</title>
  <meta name="description" content="FFXIV SB 4.0 Trial â€” The Pool of Tributeï¼šæ•…äº‹æ¦‚è¦ã€éœ€æ±‚æ¢ä»¶ã€è§£é–ä»»å‹™èˆ‡å¾ŒçºŒä»»å‹™ï¼Œé™„å½±ç‰‡ã€‚">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root { --bg:#fff8e6; --card:#ffffff; --fg:#222; --muted:#666; --border:#e5e1d8; --accent:#e11d48; }
    *{box-sizing:border-box}
    body{margin:0; font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif; background:var(--bg); color:var(--fg);}
    .container{max-width:1080px; margin:0 auto; padding:0 16px}
    .site-header{border-bottom:1px solid var(--border); background:#fff9edb3; backdrop-filter:saturate(120%) blur(6px); position:sticky; top:0; z-index:10}
    .nav{display:flex; align-items:center; justify-content:space-between; height:60px}
    .left{display:flex; align-items:center; gap:12px}
    .home{border:1px solid var(--border); background:#fff; padding:4px 8px; border-radius:8px; text-decoration:none; color:var(--fg); font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex; align-items:center; gap:8px}
    .icon-btn{background:none; border:none; cursor:pointer; font-size:14px; padding:6px 10px; border-radius:8px}
    .icon-btn:hover{background:#fff; border:1px solid var(--border)}
    .main{padding:20px 0 40px}
    .grid{display:grid; grid-template-columns:1.1fr 1fr; gap:20px; align-items:start;}
    @media (max-width:900px){ .grid{grid-template-columns:1fr} .video-wrap{position:relative; padding-top:56.25%} .video-wrap iframe{position:absolute; inset:0; width:100%; height:100%} }
    .card{background:var(--card); border:1px solid var(--border); border-radius:16px; box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px; border-bottom:1px solid var(--border); font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%; height:420px; border:0; display:block; border-radius:16px}
    .tabs{display:flex; gap:8px; padding:12px 12px 0; flex-wrap:wrap}
    .tab-btn{background:#fff; border:1px solid var(--border); color:var(--fg); border-radius:999px; padding:8px 14px; cursor:pointer; font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent); color:#fff; background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex; flex-direction:column; gap:10px}
    .stack .row{padding:12px 14px; border:1px dashed var(--border); border-radius:12px; background:#fffdf6}
    .muted{color:var(--muted)}
    .link{color:#0b60d8; text-decoration:none}
    .link:hover{text-decoration:underline}
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">ğŸ  Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="åˆ‡æ›èªè¨€">ğŸŒ EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <!-- å·¦ï¼šå½±ç‰‡ -->
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/CDDYvSW1bS8" title="The Pool of Tribute" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- å³ï¼šæ¨™é¡Œ + Tabs -->
      <section class="card">
        <div class="hd" id="pageTitle">The Pool of Tribute</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true" data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="req">Requirements</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Unlock Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlock">Follow-Up Quest</button>
          <!-- æ–°å¢ï¼šComments åˆ†é æŒ‰éˆ• -->
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="comments">Comments</button>
        </div>
        <div class="bd">
          <div id="panel-story" class="tab-panel active"></div>
          <div id="panel-acq" class="tab-panel"></div>
          <div id="panel-req" class="tab-panel"></div>
          <div id="panel-unlock" class="tab-panel"></div>
          <!-- æ–°å¢ï¼šç•™è¨€é¢æ¿ -->
          <div id="panel-comments" class="tab-panel">
            <div id="giscus_container" style="min-height:320px;"></div>
          </div>
        </div>
      </section>
    </div>
  </main>

  <script>
    const LANG_KEY = 'ffxiv-guide-lang';

    const i18n = {
      EN:{
        langLabel:'EN',
        pageTitle:'The Pool of Tribute',
        tabs:{story:'Story',req:'Requirements',acq:'Unlock Quest',unlock:'Follow-Up Quest',comments:'Comments'},
        story:`<p>Your efforts to wreak havoc on the Isle of Zekki and draw the Red Kojin away from their imperial masters have exceeded all expectations. Unfortunately, for reasons beyond your knowing, two of the sacred treasures stored in the isleâ€™s vault â€œreactedâ€ to the presence of the Yasakani-no-Magatama, summoning forth from the aether the great kami Susanoâ”€a primal by another name. How fortunate that you had the wisdom and foresight to invite several of your fellow adventurers on this journey to the Far East, and how kind they were to agree to help you torment the Red Kojin, for no single warrior, no matter how blessed or powerful, could ever hope to slay a primal on own, despite what some wandering minstrels would have you believe.</p>`,
        req:`<div class="stack">
          <div class="row">1 to 8 players (2 Tanks, 2 Healers, 4 DPS)</div>
          <div class="row">Class: Disciples of War or Magic</div>
          <div class="row">â€» Limited jobs can participate only in a preformed party meeting party size requirements or an unrestricted party, and if duty rules allow.</div>
          <div class="row">Level: 63 (Sync from 64)</div>
          <div class="row">â€» While synced, all item stats are adjusted.</div>
          <div class="row">â€» Role and item level restrictions are lifted for parties meeting minimum size requirements.</div>
        </div>`,
        acq:`<div class="stack">
          <div class="row"><a class="link" href="#">The Lord of the Revel</a></div>
        </div>`,
        unlock:`<div class="stack">
          <div class="row"><a class="link" href="#">Tide Goes in, Imperials Go Out</a></div>
        </div>`
      },

      JP:{
        langLabel:'JP',
        pageTitle:'ã‚¹ã‚µãƒã‚ªè¨æ»…æˆ¦',
        tabs:{story:'ã‚¹ãƒˆãƒ¼ãƒªãƒ¼',req:'å¿…è¦æ¡ä»¶',acq:'é–‹æ”¾ã‚¯ã‚¨ã‚¹ãƒˆ',unlock:'å¾Œç¶šã‚¯ã‚¨ã‚¹ãƒˆ',comments:'ã‚³ãƒ¡ãƒ³ãƒˆ'},
        story:`<p>ã‚¼ãƒƒã‚­å³¶ã§æš´ã‚Œå›ã‚Šã€èµ¤ç”²ç¾…ã®ã‚³ã‚¦ã‚¸ãƒ³æ—ã‚’å¸å›½ã®æ”¯é…ã‹ã‚‰å¼•ãé›¢ã™â”€â”€ã‚ãªãŸã®è¡Œå‹•ã¯æœŸå¾…ä»¥ä¸Šã®æˆæœã‚’ä¸Šã’ãŸã€‚ã ãŒã€ä¸é‹ã«ã‚‚å³¶ã®å®ç‰©åº«ã«çœ ã£ã¦ã„ãŸäºŒã¤ã®ç¥å™¨ãŒã€Œå…«å°ºç“Šå‹¾ç‰ã€ã®å­˜åœ¨ã«åå¿œã—ã€ã‚¢ã‚·ã‚§ãƒ³ã‚ˆã‚Šå‰å¤§ãªã‚‹ç¥ã€Œã‚¹ã‚µãƒã‚ªã€ã‚’å‘¼ã³é™ã‚ã—ã¦ã—ã¾ã£ãŸã®ã ã€‚<br>å¹¸ã„ã«ã‚‚ã€ã‚ãªãŸã¯æ±æ–¹ã¸ã®æ—…ã«ã‚ãŸã‚Šä»²é–“ã®å†’é™ºè€…ãŸã¡ã‚’èª˜ã£ã¦ã„ãŸã€‚å½¼ã‚‰ã®åŠ©åŠ›ãŒãªã‘ã‚Œã°ã€ã„ã‹ã«ç¥ç¦ã•ã‚Œã—å¼·è€…ã¨ã„ãˆã©ã‚‚ã€ãŸã ä¸€äººã§ã€Œè›®ç¥ã€ã‚’è¨ã¡å€’ã™ã“ã¨ãªã©ä¸å¯èƒ½ã§ã‚ã‚‹â”€â”€åŸéŠè©©äººã®æ­ŒãŒã©ã†èªã‚ã†ã¨ã‚‚ã€‚</p>`,
        req:`<div class="stack">
          <div class="row">8äººç”¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼ˆã‚¿ãƒ³ã‚¯2ï¼ãƒ’ãƒ¼ãƒ©ãƒ¼2ï¼DPS4ï¼‰</div>
          <div class="row">å‚åŠ æ¡ä»¶ï¼šãƒ•ã‚¡ã‚¤ã‚¿ãƒ¼ï¼ã‚½ãƒ¼ã‚µãƒ©ãƒ¼</div>
          <div class="row">â€» ãƒ‘ãƒ¼ãƒ†ã‚£äººæ•°ã®æ¡ä»¶ã‚’æº€ãŸã™äº‹å‰çµæˆãƒ‘ãƒ¼ãƒ†ã‚£ã€ã¾ãŸã¯åˆ¶é™è§£é™¤ãƒ‘ãƒ¼ãƒ†ã‚£ã§ã€ã‹ã¤ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ«ãƒ¼ãƒ«ã§è¨±å¯ã•ã‚Œã¦ã„ã‚‹å ´åˆã®ã¿ã€ãƒªãƒŸãƒ†ãƒƒãƒ‰ã‚¸ãƒ§ãƒ–ã‚‚å‚åŠ å¯èƒ½ã§ã™ã€‚</div>
          <div class="row">ãƒ¬ãƒ™ãƒ«ï¼š63ï¼ˆã‚·ãƒ³ã‚¯ï¼š64ï¼‰</div>
          <div class="row">â€» ã‚·ãƒ³ã‚¯ä¸­ã¯ã™ã¹ã¦ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒèª¿æ•´ã•ã‚Œã¾ã™ã€‚</div>
          <div class="row">â€» æœ€ä½äººæ•°ã‚’æº€ãŸã™ãƒ‘ãƒ¼ãƒ†ã‚£ã§ã¯ã€ãƒ­ãƒ¼ãƒ«ãŠã‚ˆã³ã‚¢ã‚¤ãƒ†ãƒ ãƒ¬ãƒ™ãƒ«ã®åˆ¶é™ãŒè§£é™¤ã•ã‚Œã¾ã™ã€‚</div>
        </div>`,
        acq:`<div class="stack">
          <div class="row"><a class="link" href="#">è±ªç¥ã‚¹ã‚µãƒã‚ª</a></div>
        </div>`,
        unlock:`<div class="stack">
          <div class="row"><a class="link" href="#">ã²ã¨ã¨ãã®å‡ª</a></div>
        </div>`
      },

      ZH:{
        langLabel:'ZH',
        pageTitle:'é ˆä½ä¹‹ç”·è¨æ»…æˆ°',
        tabs:{story:'æ•…äº‹æ¦‚è¦',req:'éœ€æ±‚æ¢ä»¶',acq:'è§£é–ä»»å‹™',unlock:'å¾ŒçºŒä»»å‹™',comments:'ç•™è¨€'},
        story:`<p>ä½ åœ¨ Zekki å³¶ä¸Šè£½é€ æ··äº‚ï¼ŒæˆåŠŸå°‡ Red Kojin å¾å¸åœ‹ä¸»äººçš„æŒæ§ä¸‹å¼•é–‹ï¼Œæˆæœé è¶…é æœŸã€‚ç„¶è€Œï¼Œä¸å¹¸çš„æ˜¯ï¼Œå³¶ä¸Šå¯¶åº«ä¸­å…©ä»¶è–ç‰©ç«Ÿå° Yasakani-no-Magatama çš„å­˜åœ¨ç”¢ç”Ÿã€Œå…±é³´ã€ï¼Œè‡ªä»¥å¤ªä¸­å¬å–šå‡ºäº†å‰å¤§ç¥æ˜â”€â”€Susanoï¼Œä¹Ÿå°±æ˜¯å¦ä¸€ç¨®æ„ç¾©ä¸Šçš„åŸåˆå­˜åœ¨ã€‚<br>æ‰€å¹¸ä½ åœ¨å•Ÿç¨‹å‰å¾€æ±æ–¹ä¹‹æ™‚ï¼Œæ˜æ™ºåœ°é‚€è«‹äº†å¹¾ä½å†’éšªè€…åŒä¼´åŒè¡Œï¼›ä¹Ÿå¹¸é‹ä»–å€‘é¡˜æ„åŠ©ä½ ä¸€è‡‚ä¹‹åŠ›ï¼Œå…±åŒå°æŠ— Red Kojinã€‚ç•¢ç«Ÿï¼Œç„¡è«–ä½•ç­‰å¼·å¤§çš„æˆ°å£«ï¼Œéƒ½ä¸å¯èƒ½æ†‘ä¸€å·±ä¹‹åŠ›æ“Šæ•—åŸåˆå­˜åœ¨â”€â”€ç¸±ç„¶åŸéŠè©©äººæœƒç·¨ç¹”å‡ºå¦ä¸€ç•ªå‚³èªªã€‚</p>`,
        req:`<div class="stack">
          <div class="row">1â€“8 äººï¼ˆ2 å¦å…‹ã€2 æ²»ç™‚ã€4 è¼¸å‡ºï¼‰</div>
          <div class="row">è·æ¥­ï¼šæˆ°é¬¥è·æ¥­</div>
          <div class="row">â€» åƒ…é™æ»¿è¶³éšŠä¼äººæ•¸éœ€æ±‚çš„é çµ„éšŠä¼ï¼Œæˆ–åœ¨å…è¨±çš„æƒ…æ³ä¸‹ä½¿ç”¨ç„¡é™åˆ¶éšŠä¼æ™‚ï¼Œé™åˆ¶è·æ¥­æ‰å¯åƒåŠ ã€‚</div>
          <div class="row">ç­‰ç´šï¼š63ï¼ˆåŒæ­¥ 64ï¼‰</div>
          <div class="row">â€» åŒæ­¥æ™‚ï¼Œæ‰€æœ‰è£å‚™å±¬æ€§å°‡è¢«èª¿æ•´ã€‚</div>
          <div class="row">â€» ç•¶éšŠä¼æ»¿è¶³æœ€ä½äººæ•¸æ™‚ï¼Œè§’è‰²å®šä½èˆ‡è£å‚™ç­‰ç´šé™åˆ¶å°‡è¢«è§£é™¤ã€‚</div>
        </div>`,
        acq:`<div class="stack">
          <div class="row"><a class="link" href="#">è±ªç¥é ˆä½ä¹‹ç”·</a></div>
        </div>`,
        unlock:`<div class="stack">
          <div class="row"><a class="link" href="#">ç‰‡åˆ»çš„é¢¨å¹³æµªéœ</a></div>
        </div>`
      }
    };

    const langToggle = document.getElementById('langToggle');
    const pageTitle  = document.getElementById('pageTitle');
    const tabBtns    = [...document.querySelectorAll('.tab-btn')];
    const panels = {
      story : document.getElementById('panel-story'),
      acq   : document.getElementById('panel-acq'),
      req   : document.getElementById('panel-req'),
      unlock: document.getElementById('panel-unlock'),
      comments: document.getElementById('panel-comments') // æ–°å¢
    };

    function getLang(){ return localStorage.getItem(LANG_KEY) || 'EN'; }

    // é€²å…¥ comments æ‰è¼‰å…¥ giscusï¼›ä¸è¦è¦†å¯«ç•™è¨€å®¹å™¨
    function renderPanel(key, lang){
      const t = i18n[lang] || i18n.EN;
      Object.keys(panels).forEach(k => panels[k].classList.remove('active'));
      panels[key].classList.add('active');

      if (key !== 'comments') {
        panels[key].innerHTML = t[key];
      } else {
        loadGiscusForCurrentLang();
      }
    }

    tabBtns.forEach(btn=>{
      btn.addEventListener('click',()=>{
        tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
        btn.setAttribute('aria-selected','true');
        renderPanel(btn.dataset.tab, getLang());
      });
    });

    langToggle.addEventListener('click',()=>{
      const cur=getLang();
      const next=cur==='EN'?'JP':(cur==='JP'?'ZH':'EN');
      localStorage.setItem(LANG_KEY,next);
      applyLang(next);
    });

    function applyLang(lang){
      const t = i18n[lang] || i18n.EN;
      pageTitle.textContent = t.pageTitle;
      langToggle.textContent = `ğŸŒ ${t.langLabel}`;
      tabBtns.forEach(btn => { btn.textContent = t.tabs[btn.dataset.tab]; });
      const activeBtn = tabBtns.find(b=>b.getAttribute('aria-selected')==='true') || tabBtns[0];
      renderPanel(activeBtn.dataset.tab, lang);
      // è‹¥åœåœ¨ç•™è¨€åˆ†é ï¼Œåˆ‡èªè¨€å¾Œé‡è¼‰ giscus
      if (activeBtn && activeBtn.dataset.tab === 'comments') loadGiscusForCurrentLang();
    }

    applyLang(getLang());

    /* === Giscusï¼šå–®ä¸€ Comments åˆ†é ï¼Œéš¨èªè¨€åˆ‡æ› === */
    const GISCUS_CFG = {
      repo: 'BELAUG-FFXIV/FFXIV_Library',
      repoId: 'R_kgDOPyh4Kw',
      category: 'General',
      categoryId: 'DIC_kwDOPyh4K84CwPjL',
      theme: 'preferred_color_scheme'
    };
    function uiLang(code){ return code==='JP' ? 'ja' : (code==='ZH' ? 'zh-TW' : 'en'); }
    function loadGiscusForCurrentLang(){
      const mount = document.getElementById('giscus_container');
      if (!mount) return;
      mount.innerHTML = '';
      const langCode = getLang(); // EN / JP / ZH
      const s = document.createElement('script');
      s.src = 'https://giscus.app/client.js';
      s.setAttribute('data-repo', GISCUS_CFG.repo);
      s.setAttribute('data-repo-id', GISCUS_CFG.repoId);
      s.setAttribute('data-category', GISCUS_CFG.category);
      s.setAttribute('data-category-id', GISCUS_CFG.categoryId);
      s.setAttribute('data-mapping', 'specific');
      s.setAttribute('data-term', location.pathname + 'ï½œ' + langCode);
      s.setAttribute('data-reactions-enabled', '1');
      s.setAttribute('data-emit-metadata', '0');
      s.setAttribute('data-input-position', 'bottom');
      s.setAttribute('data-lang', uiLang(langCode));
      s.setAttribute('data-theme', GISCUS_CFG.theme);
      s.setAttribute('crossorigin', 'anonymous');
      s.async = true;
      mount.appendChild(s);
    }
  </script>
</body>
</html>
