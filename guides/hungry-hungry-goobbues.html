<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hungry Hungry Goobbues | BELAUG Â· FFXIV Library</title>
  <meta name="description" content="MSQ â€“ Hungry Hungry Goobbues (ARR Patch 2.0)">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root { --bg:#fff8e6; --card:#fff; --fg:#222; --muted:#666; --border:#e5e1d8; --accent:#e11d48; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif;background:var(--bg);color:var(--fg)}
    .container{max-width:1080px;margin:0 auto;padding:0 16px}
    .site-header{border-bottom:1px solid var(--border);background:#fff9edb3;backdrop-filter:saturate(120%) blur(6px);position:sticky;top:0;z-index:10}
    .nav{display:flex;align-items:center;justify-content:space-between;height:60px}
    .left{display:flex;align-items:center;gap:12px}
    .home{border:1px solid var(--border);background:#fff;padding:4px 8px;border-radius:8px;text-decoration:none;color:var(--fg);font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex;align-items:center;gap:8px}
    .icon-btn{background:none;border:none;cursor:pointer;font-size:14px;padding:6px 10px;border-radius:8px}
    .icon-btn:hover{background:#fff;border:1px solid var(--border)}
    .main{padding:20px 0 40px}
    .grid{display:grid;grid-template-columns:1.1fr 1fr;gap:20px;align-items:start}
    @media (max-width:900px){
      .grid{grid-template-columns:1fr}
      .video-wrap{position:relative;padding-top:56.25%}
      .video-wrap iframe{position:absolute;inset:0;width:100%;height:100%}
    }
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px;border-bottom:1px solid var(--border);font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%;height:420px;border:0;display:block;border-radius:16px}
    .tabs{display:flex;gap:8px;padding:12px 12px 0;flex-wrap:wrap}
    .tab-btn{background:#fff;border:1px solid var(--border);color:var(--fg);border-radius:999px;padding:8px 14px;cursor:pointer;font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent);color:#fff;background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex;flex-direction:column;gap:10px}
    .stack .row{padding:12px 14px;border:1px dashed var(--border);border-radius:12px;background:#fffdf6}
    .row b{display:inline-block;min-width:130px}
    .muted{color:var(--muted)}
    .link{color:#0b60d8;text-decoration:none}
    .link:hover{text-decoration:underline}
    .clamp{position:relative; max-height:360px; overflow:hidden}
    .clamp[data-collapsed="false"]{max-height:none}
    .clamp[data-collapsed="true"]::after{
      content:""; position:absolute; left:0; right:0; bottom:0; height:72px;
      background:linear-gradient(to bottom, rgba(255,255,255,0), var(--card)); pointer-events:none;
    }
    .expand-wrap{ margin-top:12px; }
    .expand-btn{
      display:inline-block; padding:8px 14px; border-radius:10px;
      background:var(--card); border:1px solid var(--border); cursor:pointer; font-weight:600;
    }
    .expand-btn:hover{ background:#fffef8; }
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">ğŸ  Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="åˆ‡æ›èªè¨€">ğŸŒ EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <!-- å·¦ï¼šå½±ç‰‡ -->
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/3LFoLUHTkts"
              title="Hungry Hungry Goobbues" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- å³ï¼šæ¨™é¡Œ + Tabs -->
      <section class="card">
        <div class="hd" id="pageTitle">Hungry Hungry Goobbues</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true"  data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Acquisition</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlockq">Unlock Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="followq">Follow-Up Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="comments">Comments</button>
        </div>
        <div class="bd">
          <div id="panel-story"   class="tab-panel active"></div>
          <div id="panel-acq"     class="tab-panel"></div>
          <div id="panel-unlockq" class="tab-panel"></div>
          <div id="panel-followq" class="tab-panel"></div>
          <div id="panel-comments" class="tab-panel">
            <div id="giscus_container" style="min-height:320px;"></div>
          </div>
        </div>
      </section>
    </div>
  </main>

<script>
const LANG_KEY = 'ffxiv-guide-lang';
const i18n = {
  EN:{
    langLabel:'EN',
    pageTitle:'Hungry Hungry Goobbues',
    tabs:{ story:'Story', acq:'Acquisition', unlockq:'Unlock Quest', followq:'Follow-Up Quest', comments:'Comments' },
    readMore:'Show more', readLess:'Show less',
    story:`<div class="clamp" data-collapsed="true">
      <p>When you press Trachtoum again about how the Company of Heroes beat Tidus, he balksâ€”then tries to turn it into a lesson. He says their strategy was risky, the sort of thing only someone seasoned by countless battles could ever depend on. He insists he wants to teach you, truly, but he claims he cannot in good conscience tell you anything unless you prove you have what it takes to face â€œthat fat bastard.â€</p>
      <p>At minimum, he says, you would need to be capable of slaying something like a goobbue. The thought seems to please him as it formsâ€”goobbues have a taste for the flour milled here, so you should have no trouble finding one nearby. He makes it clear he is not demanding you fell it with the swift ease he boasts a skilled axeman would have, but he still expects the deed done.</p>
      <p>He tells you to head due west and keep watch in case a goobbue comes calling. If you slay it, he says, he might consider telling you more about Tidus.</p>
      <p>Not long after, you feel the ground tremble beneath your feet.</p>
      <p>When you return, Trachtoum looks you over with renewed curiosity. You again, he saysâ€”and the goobbue that had been harassing the millers is dead? He admits he did not think you had it in you, yet he cannot resist a final jab: you took â€œforever and a dayâ€ to get it done, and he is still not sure whether you have earned the right to hear their secrets.</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>Quest Giver</b> Trachtoum <small class="muted">Lower La Noscea (X:35.6, Y:15.9)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="tales-from-the-tidus-slayer.html">Tales from the Tidus Slayer</a></div>
      <div class="row">All classes and jobs (excluding limited jobs) (Level 30 or above)</div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="the-lominsan-way.html">The Lominsan Way</a></div>
    </div>`
  },
  JP:{
    langLabel:'JP',
    pageTitle:'ãã‚Œã§ã‚‚ã‚¿ã‚³ã‚¿ãƒ³è¨ä¼æ­¦å‹‡ä¼',
    tabs:{ story:'ã‚¹ãƒˆãƒ¼ãƒªãƒ¼', acq:'å…¥æ‰‹æ–¹æ³•', unlockq:'é–‹æ”¾ã‚¯ã‚¨ã‚¹ãƒˆ', followq:'å¾Œç¶šã‚¯ã‚¨ã‚¹ãƒˆ', comments:'ã‚³ãƒ¡ãƒ³ãƒˆ' },
    readMore:'å…¨æ–‡ã‚’è¡¨ç¤º', readLess:'æŠ˜ã‚ŠãŸãŸã‚€',
    story:`<div class="clamp" data-collapsed="true">
      <p>ã‚ãªãŸãŒãªãŠã‚‚ã€è‹±é›„ã®ä¸€å›£ãŒãƒ†ã‚£ãƒ‰ã‚¥ã‚¹ã‚’ã©ã†å€’ã—ãŸã®ã‹ã¨å•ã„ç¶šã‘ã‚‹ã¨ã€ãƒˆãƒ©ã‚¯ãƒˆã‚¥ãƒ¼ãƒ ã¯æ¸‹ã„é¡”ã‚’ã—ã¦è¨€è‘‰ã‚’æ¿ã™ã€‚ã‚ã‚Œã¯ç›¸å½“ã«å±é™ºãªç­–ã§ã€å¹¾å¤šã®æˆ¦ã„ã‚’ããã‚ŠæŠœã‘ãŸæ­´æˆ¦ã®è€…ã§ãªã‘ã‚Œã°é ¼ã‚Œãªã„é¡ã®ã‚‚ã®ã ã€ã¨ã€‚</p>
      <p>ãã‚Œã§ã‚‚æ•™ãˆãŸã„æ°—æŒã¡ã¯ã‚ã‚‹ã®ã ã¨è¨€ã„ã€ã ãŒã€Œä¾‹ã®å¤ªã£ã¡ã‚‡ã€ã‚’ç›¸æ‰‹ã«ã§ãã‚‹ã ã‘ã®å™¨ãŒã‚ã‚‹ã¨è¨¼æ˜ã—ã¦ãã‚Œãªã‘ã‚Œã°ã€è‰¯å¿ƒãŒè¨±ã•ãªã„ã¨çªãæ”¾ã™ã€‚æœ€ä½ã§ã‚‚ã€ã‚°ã‚¥ãƒ¼ãƒ–ãƒ¼ãã‚‰ã„ã¯å€’ã›ã‚‹è…•å‰ãŒå¿…è¦ã ã€ã¨å½¼ã¯è¨€ã†ã€‚</p>
      <p>æ€ã„ã¤ã„ãŸã‚ˆã†ã«ã€å½¼ã¯è©±ã‚’ç¶šã‘ã‚‹ã€‚ã‚°ã‚¥ãƒ¼ãƒ–ãƒ¼ã¯ã“ã®ã‚ãŸã‚Šã§æŒ½ã„ãŸå°éº¦ç²‰ãŒå¥½ç‰©ã ã‹ã‚‰ã€è¿‘ãã‚’æ¢ã›ã°è¦‹ã¤ã‘ã‚‹ã®ã«è‹¦åŠ´ã¯ã—ãªã„ã¯ãšã ã€‚è‡ªåˆ†ã®ã‚ˆã†ãªæ‰‹ç·´ã‚Œã®æ–§è¡“å£«ã¿ãŸã„ã«ç´ æ—©ãç‰‡ã¥ã‘ã‚ã¨ã¯è¨€ã‚ãªã„ã€ã¨ã‚ã–ã‚ã–ä»˜ã‘åŠ ãˆãªãŒã‚‰ã‚‚ã€ã‚„ã‚‹ã“ã¨ã¯å¤‰ã‚ã‚‰ãªã„ã€‚</p>
      <p>è¥¿ã¸å‘ã‹ã„ã€ã‚°ã‚¥ãƒ¼ãƒ–ãƒ¼ãŒç¾ã‚Œãªã„ã‹è¦‹å¼µã£ã¦ã“ã„ã€‚è¨ã¡å–ã‚ŒãŸãªã‚‰ã€ãƒ†ã‚£ãƒ‰ã‚¥ã‚¹ã®ã“ã¨ã‚’ã‚‚ã†å°‘ã—è©±ã—ã¦ã‚„ã‚‹ã‹ã‚‚ã—ã‚Œãªã„â€•â€•ãƒˆãƒ©ã‚¯ãƒˆã‚¥ãƒ¼ãƒ ã¯ãã†è¨€ã£ã¦ã€ã‚ãªãŸã‚’é€ã‚Šå‡ºã—ãŸã€‚</p>
      <p>ã»ã©ãªãã—ã¦ã€ã‚ãªãŸã¯è¶³å…ƒã®å¤§åœ°ãŒéœ‡ãˆã‚‹ã®ã‚’æ„Ÿã˜ã‚‹ã€‚</p>
      <p>æˆ»ã£ãŸã‚ãªãŸã‚’è¦‹ã¦ã€ãƒˆãƒ©ã‚¯ãƒˆã‚¥ãƒ¼ãƒ ã¯æ„å¤–ãã†ã«ç›®ã‚’ç´°ã‚ã‚‹ã€‚ã¾ãŸãŠå‰ã‹ã€ã¨è¨€ã„ã€è£½ç²‰æ‰€ã®è€…ãŸã¡ã‚’æ‚©ã¾ã›ã¦ã„ãŸã‚°ã‚¥ãƒ¼ãƒ–ãƒ¼ã¯å€’ã—ãŸã®ã‹ã¨ç¢ºã‹ã‚ã‚‹ã€‚ã‚„ã‚Œã‚‹ã¨ã¯æ€ã‚ãªã‹ã£ãŸã€ã¨èªã‚ã¤ã¤ã‚‚ã€å½¼ã¯å®¹èµ¦ãªãçš®è‚‰ã‚’æ·»ãˆã‚‹ã€‚ãšã„ã¶ã‚“æ™‚é–“ãŒã‹ã‹ã£ãŸã˜ã‚ƒãªã„ã‹ã€‚ã¾ã ç§˜ç­–ã‚’æ˜ã‹ã™ã¹ãã‹è¿·ã£ã¦ã„ã‚‹â€•â€•ãã†è¨€ã£ã¦ã€ãªãŠã‚‚ã‚ãªãŸã‚’è©¦ã™ã‚ˆã†ã«è¨€è‘‰ã‚’åˆ‡ã£ãŸã€‚</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>ã‚¯ã‚¨ã‚¹ãƒˆç™ºè¡Œ</b> ãƒˆãƒ©ãƒƒãƒãƒˆã‚¥ãƒ¼ãƒ ã€€<small class="muted">ä½åœ°ãƒ©ãƒã‚·ã‚¢ (X:35.6, Y:15.9)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="tales-from-the-tidus-slayer.html">ã‚¿ã‚³ã‚¿ãƒ³è¨ä¼æ­¦å‹‡ä¼</a></div>
      <div class="row">ã™ã¹ã¦ï¼ˆãƒªãƒŸãƒ†ãƒƒãƒ‰ã‚¸ãƒ§ãƒ–ã‚’é™¤ãï¼‰Lv 30ï½</div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="the-lominsan-way.html">æ€’ã‚Šã®é¢¨è»Šç•ª</a></div>
    </div>`
  },
  ZH:{
    langLabel:'ZH',
    pageTitle:'å¤å¸ƒç¸åƒå€‹ä¸åœ',
    tabs:{ story:'æ•…äº‹æ¦‚è¦', acq:'å–å¾—æ–¹å¼', unlockq:'è§£é–ä»»å‹™', followq:'å¾ŒçºŒä»»å‹™', comments:'ç•™è¨€' },
    readMore:'å±•é–‹å…¨æ–‡', readLess:'æ”¶åˆå…§å®¹',
    story:`<div class="clamp" data-collapsed="true">
      <p>ä½ åˆè¿½å• Trachtoumï¼šthe Company of Heroes åˆ°åº•æ˜¯æ€éº¼æ“Šæ•— Tidus çš„ï¼Ÿä»–å…ˆæ˜¯æ„£äº†ä¸€ä¸‹ï¼Œæ¥è‘—ç”¨æ›´æ…é‡çš„å£æ°£å›æ‡‰ï¼Œèªªé‚£å…¶å¯¦æ˜¯å€‹ç›¸ç•¶å†’éšªçš„ç­–ç•¥â€”â€”åªæœ‰ç¶“æ­·éç„¡æ•¸æˆ°é¬¥çš„è€æ‰‹ï¼Œæ‰æ•¢æŠŠå‘½æŠ¼åœ¨é‚£ç¨®åšæ³•ä¸Šã€‚</p>
      <p>ä»–å£é ­ä¸Šèªªè‡ªå·±çœŸçš„æƒ³æ•™ä½ ï¼Œä½†ç«‹åˆ»åˆå¼·èª¿ï¼šé™¤éä½ èƒ½è­‰æ˜è‡ªå·±æœ‰è³‡æ ¼å»é¢å°é‚£å€‹ã€Œèƒ–æ··å¸³ã€ï¼Œä¸ç„¶ä»–ç„¡æ³•æ†‘è‰¯å¿ƒæŠŠä»»ä½•æ±è¥¿å‘Šè¨´ä½ ã€‚è‡³å°‘ï¼Œä½ å¾—æœ‰æœ¬äº‹å…ˆæ®ºæ‰ä¸€éš» goobbueã€‚</p>
      <p>è©±èªªåˆ°ä¸€åŠï¼Œä»–åƒæ˜¯å¿½ç„¶æƒ³åˆ°ä»€éº¼ä¼¼çš„ï¼Œè¦ºå¾—é€™å€‹è¦æ±‚æ­£å¥½åˆé©ã€‚goobbue å¾ˆæ„›åƒé€™è£¡ç£¨å‡ºä¾†çš„éºµç²‰ï¼Œæ‰€ä»¥ä½ åœ¨é™„è¿‘æ‰¾ä¸€éš»ä¸¦ä¸æœƒå¤ªå›°é›£ã€‚ä»–é‚„ä¸å¿˜è£œä¸Šä¸€å¥ï¼šä»–å¯ä¸æ˜¯è¦ä½ åƒä»–é€™ç¨®ç†Ÿç·´æ–§æ‰‹ä¸€æ¨£ä¹¾æ·¨ä¿è½åœ°ç§’æ®ºâ€”â€”ä½†ä½ çµ‚ç©¶å¾—æŠŠé‚£é ­æ€ªç‰©è§£æ±ºæ‰ã€‚</p>
      <p>ä»–è¦ä½ å¾€æ­£è¥¿èµ°ï¼Œç«™å´—æˆ’å‚™ï¼Œç­‰ goobbue è‡ªå·±æ‰¾ä¸Šé–€ã€‚åªè¦ä½ æŠŠå®ƒæ–¬æ®ºï¼Œä»–æˆ–è¨±å°±æœƒè€ƒæ…®å¤šå‘Šè¨´ä½ ä¸€äº›é—œæ–¼ Tidus çš„äº‹ã€‚</p>
      <p>æ²’éå¤šä¹…ï¼Œä½ æ„Ÿè¦ºè…³ä¸‹çš„å¤§åœ°é–‹å§‹éœ‡å‹•ã€‚</p>
      <p>ç•¶ä½ å›å»æ‰¾ Trachtoumï¼Œä»–ä¸Šä¸‹æ‰“é‡ä½ ï¼Œèªæ°£è£¡å¸¶è‘—ä¸€çµ²æ„å¤–ã€‚åˆæ˜¯ä½ ï¼Ÿé‚£éš»ä¸€ç›´é¨·æ“¾ millers çš„ goobbue å·²ç¶“æ­»äº†ï¼Ÿä»–æ‰¿èªè‡ªå·±æ²’æƒ³åˆ°ä½ çœŸåšå¾—åˆ°ï¼Œä½†éš¨å³åˆä¸Ÿå‡ºå˜²è«·ï¼šä½ èŠ±çš„æ™‚é–“ä¹Ÿå¤ªä¹…äº†ï¼Œä¹…åˆ°åƒéäº†ä¸€æ•´å¤©ã€‚ä»–ä»ä¸ç¢ºå®šè‡ªå·±è©²ä¸è©²æŠŠé‚£äº›ã€Œç¥•å¯†ã€å‘Šè¨´ä½ â€”â€”è©±è£¡è©±å¤–ï¼Œä¾èˆŠåƒåœ¨ç¹¼çºŒè©¦æ¢ä½ çš„æ–¤å…©ã€‚</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>ä»»å‹™ç™¼å¸ƒ</b> ç‰¹æ‹‰å“ˆåœ–å§†ã€€<small class="muted">æ‹‰è«¾è¥¿äºä½åœ° (X:35.6, Y:15.9)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="tales-from-the-tidus-slayer.html">å¡”å¯å¦çš„è¨ä¼å‚³å¥‡</a></div>
      <div class="row">æ‰€æœ‰è·æ¥­ï¼ˆä¸å«é™å®šè·ï¼‰ ç­‰ç´š 30 ä»¥ä¸Š</div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="the-lominsan-way.html">é¢¨è»Šå®ˆè¡›çš„æ€’ç«</a></div>
    </div>`
  }
};

const langToggle  = document.getElementById('langToggle');
const pageTitle   = document.getElementById('pageTitle');
const tabBtns     = [...document.querySelectorAll('.tab-btn')];
const panels = {
  story:  document.getElementById('panel-story'),
  acq:    document.getElementById('panel-acq'),
  unlockq:document.getElementById('panel-unlockq'),
  followq:document.getElementById('panel-followq'),
  comments: document.getElementById('panel-comments')
};

function getLang(){ return localStorage.getItem('ffxiv-guide-lang') || 'EN'; }
function applyLang(lang){
  const t = i18n[lang] || i18n.EN;
  pageTitle.textContent = t.pageTitle;
  langToggle.textContent = `ğŸŒ ${t.langLabel}`;
  tabBtns.forEach(btn => { btn.textContent = t.tabs[btn.dataset.tab]; });
  const activeBtn = tabBtns.find(b => b.getAttribute('aria-selected')==='true') || tabBtns[0];
  renderPanel(activeBtn.dataset.tab, lang);
}

function wireClamp(panelEl, t){
  const clamp = panelEl.querySelector('.clamp');
  const btn = panelEl.querySelector('[data-role="expand"]');
  if(!clamp || !btn) return;
  function setLabel(){
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    btn.textContent = collapsed ? t.readMore : t.readLess;
  }
  setLabel();
  btn.addEventListener('click', ()=>{
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    clamp.setAttribute('data-collapsed', collapsed ? 'false' : 'true');
    setLabel();
  });
}

function renderPanel(key, lang){
  const t = i18n[lang] || i18n.EN;
  Object.keys(panels).forEach(k => panels[k].classList.remove('active'));
  panels[key].classList.add('active');
  if (key !== 'comments') panels[key].innerHTML = t[key];
  if (key === 'story') wireClamp(panels[key], t);
  if (key === 'comments') loadGiscusForCurrentLang();
}

tabBtns.forEach(btn=>{
  btn.addEventListener('click', ()=>{
    tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
    btn.setAttribute('aria-selected','true');
    renderPanel(btn.dataset.tab, getLang());
  });
});

langToggle.addEventListener('click', ()=>{
  const cur = getLang();
  const next = cur==='EN' ? 'JP' : (cur==='JP' ? 'ZH' : 'EN');
  localStorage.setItem('ffxiv-guide-lang', next);
  applyLang(next);
});

applyLang(getLang());

const GISCUS_CFG = {
  repo: 'BELAUG-FFXIV/FFXIV_Library',
  repoId: 'R_kgDOPyh4Kw',
  category: 'General',
  categoryId: 'DIC_kwDOPyh4K84CwPjL',
  theme: 'preferred_color_scheme'
};
function uiLang(code){ return code==='JP' ? 'ja' : (code==='ZH' ? 'zh-TW' : 'en'); }
function loadGiscusForCurrentLang(){
  const mount = document.getElementById('giscus_container');
  if (!mount) return;
  mount.innerHTML = '';
  const langCode = getLang();
  const s = document.createElement('script');
  s.src = 'https://giscus.app/client.js';
  s.setAttribute('data-repo', GISCUS_CFG.repo);
  s.setAttribute('data-repo-id', GISCUS_CFG.repoId);
  s.setAttribute('data-category', GISCUS_CFG.category);
  s.setAttribute('data-category-id', GISCUS_CFG.categoryId);
  s.setAttribute('data-mapping', 'specific');
  s.setAttribute('data-term', location.pathname + 'ï½œ' + langCode);
  s.setAttribute('data-reactions-enabled', '1');
  s.setAttribute('data-emit-metadata', '0');
  s.setAttribute('data-input-position', 'bottom');
  s.setAttribute('data-lang', uiLang(langCode));
  s.setAttribute('data-theme', GISCUS_CFG.theme);
  s.setAttribute('crossorigin', 'anonymous');
  s.async = true;
  mount.appendChild(s);
}
</script>
</body>
</html>
