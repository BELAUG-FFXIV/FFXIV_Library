<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The Meso Terminal | BELAUG · FFXIV Library</title>
  <meta name="description" content="FFXIV DT 7.3 Dungeon — The Meso Terminal：故事概要、需求條件、取得方式與解鎖內容，附影片。">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root {
      --bg: #fff8e6; --card: #ffffff;
      --fg: #222; --muted:#666; --border:#e5e1d8;
      --accent:#e11d48;
    }
    *{box-sizing:border-box}
    body{margin:0; font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif;
      background:var(--bg); color:var(--fg);}
    .container{max-width:1080px; margin:0 auto; padding:0 16px}
    /* 頁首 */
    .site-header{border-bottom:1px solid var(--border); background:#fff9edb3;
      backdrop-filter:saturate(120%) blur(6px); position:sticky; top:0; z-index:10}
    .nav{display:flex; align-items:center; justify-content:space-between; height:60px}
    .left{display:flex; align-items:center; gap:12px}
    .home{border:1px solid var(--border); background:#fff; padding:4px 8px; border-radius:8px; text-decoration:none; color:var(--fg); font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex; align-items:center; gap:8px}
    .icon-btn{background:none; border:none; cursor:pointer; font-size:14px; padding:6px 10px; border-radius:8px}
    .icon-btn:hover{background:#fff; border:1px solid var(--border)}
    /* 主體 */
    .main{padding:20px 0 40px}
    .grid{
      display:grid;
      grid-template-columns:1.1fr 1fr;
      gap:20px;
      align-items:start;
    }
    @media (max-width: 900px){
      .grid{grid-template-columns:1fr}
      .video-wrap{position:relative; padding-top:56.25%}
      .video-wrap iframe{position:absolute; inset:0; width:100%; height:100%}
    }
    .card{background:var(--card); border:1px solid var(--border); border-radius:16px; box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px; border-bottom:1px solid var(--border); font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%; height:420px; border:0; display:block; border-radius:16px}
    /* Tabs */
    .tabs{display:flex; gap:8px; padding:12px 12px 0; flex-wrap:wrap}
    .tab-btn{background:#fff; border:1px solid var(--border); color:var(--fg);
      border-radius:999px; padding:8px 14px; cursor:pointer; font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent); color:#fff; background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex; flex-direction:column; gap:10px}
    .stack .row{padding:12px 14px; border:1px dashed var(--border); border-radius:12px; background:#fffdf6}
    .row b{display:inline-block; min-width:130px}
    .muted{color:var(--muted)}
    .link{color:#0b60d8; text-decoration:none}
    .link:hover{text-decoration:underline}
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">🏠 Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="切換語言">🌐 EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <!-- 左：影片 -->
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/nZWnpLPwuZE"
              title="The Meso Terminal" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- 右：標題 + Tabs -->
      <section class="card">
        <div class="hd" id="pageTitle">The Meso Terminal</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true" data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="req">Requirements</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Acquisition</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlock">Unlocks</button>
        </div>
        <div class="bd">
          <div id="panel-story" class="tab-panel active"></div>
          <div id="panel-acq" class="tab-panel"></div>
          <div id="panel-req" class="tab-panel"></div>
          <div id="panel-unlock" class="tab-panel"></div>
        </div>
      </section>
    </div>
  </main>

  <script>
    const LANG_KEY = 'ffxiv-guide-lang';
    const i18n = {
      EN:{
        langLabel:'EN',
        pageTitle:'The Meso Terminal',
        tabs:{story:'Story',req:'Requirements',acq:'Acquisition',unlock:'Unlocks'},
        story:`<p>The lights of Living Memory no longer shine, and the Meso Terminal at its center stands silent amidst the wistful echoes of lives once lived. A monument to the existence of the Alexandrian people, as well as a resting place for their memories, it is within this soaring spire that Calyx maintains his stronghold.</p>
        <p>The self-proclaimed architect of mankind’s evolution has invited you to confront him in the upper reaches of the terminal—an invitation you must accept lest his atrocities continue to escalate. Step into the structure’s glowing interior, and begin your wary ascent through the midst of the dreaming Endless…</p>`,
        acq:`<div class="stack">
          <div class="row">1 to 4 players (1 Tank, 1 Healer, 2 DPS)</div>
          <div class="row">Unrestricted Parties Not Allowed</div>
          <div class="row">Class: Disciples of War or Magic <small class="muted">※ Limited jobs can participate only in a preformed party meeting party size requirements or an unrestricted party, and if duty rules allow.</small></div>
          <div class="row">Level: 100 <small class="muted">(Sync from 100)</small></div>
          <div class="row">Average Item Level: 720 <small class="muted">※ While synced, all item stats are adjusted.</small></div>
          <div class="row"><small class="muted">※ Role and item level restrictions are lifted for parties meeting minimum size requirements.</small></div>
        </div>`,
        req:`<div class="stack">
          <div class="row"><b>Prerequisite Quest</b> <a class="link" href="#">A Terminal Invitation</a></div>
        </div>`,
        unlock:`<div class="stack">
          <div class="row"><b>Follow-up Quest</b> <a class="link" href="#">Blades in Waiting</a></div>
        </div>`
      },

      JP:{
        langLabel:'JP',
        pageTitle:'永久幽界 メインターミナル',
        tabs:{story:'ストーリー',req:'必要条件',acq:'入手方法',unlock:'開放コンテンツ'},
        story:`<p>もはや「リヴィング・メモリー」の光は輝かず、その中心に聳える「メソ・ターミナル」は、かつての人々の記憶を偲ばせる静寂に包まれている。そこはアレクサンドリア人の存在を示す記念碑であり、彼らの想いが眠る安息の地でもあった。今や、この巨大な尖塔はカリクスの根拠地となっている。</p>
        <p>人類進化の設計者を自称する彼は、ターミナルの最上層での決戦をあなたに誘う。その招待を拒むことはできない──彼の暴虐をこれ以上見過ごすわけにはいかないのだ。輝く内部へと足を踏み入れ、夢に囚われた「エンドレス」が蠢く中、慎重に頂を目指す時が来た。</p>`,
        acq:`<div class="stack">
          <div class="row">1～4人用（タンク1／ヒーラー1／DPS2）</div>
          <div class="row">制限解除パーティ不可</div>
          <div class="row">参加条件：ファイター／ソーサラー <small class="muted">※ リミテッドジョブは、規定人数の事前結成パーティまたは制限解除パーティかつ規定が許可する場合のみ参加可。</small></div>
          <div class="row">レベル：100 <small class="muted">（シンク：100）</small></div>
          <div class="row">平均アイテムレベル：720 <small class="muted">※ シンク中は全装備ステータスが調整されます。</small></div>
          <div class="row"><small class="muted">※ 最低人数を満たすパーティではロール／IL制限が解除されます。</small></div>
        </div>`,
        req:`<div class="stack">
          <div class="row"><b>前提クエスト</b> <a class="link" href="#">約束のとき</a></div>
        </div>`,
        unlock:`<div class="stack">
          <div class="row"><b>発生クエスト</b> <a class="link" href="#">ふたりの剣</a></div>
        </div>`
      },

      ZH:{
        langLabel:'ZH',
        pageTitle:'幽冥終端',
        tabs:{story:'故事概要',req:'需求條件',acq:'取得方式',unlock:'解鎖內容'},
        story:`<p>「Living Memory」的光芒已不再閃耀，其核心的「Meso Terminal」矗立於沉寂之中，只留下昔日生命的追憶迴響。這裡既是 Alexandrian 人民存在的紀念碑，也是他們記憶安眠的歸宿。而如今，這座高塔已成為 Calyx 的要塞。</p>
        <p>這位自稱人類進化設計師的存在，邀你前往塔的高處與他對決——若你拒絕，他的暴行只會不斷擴大。踏入散發光芒的內部，在夢境般沉眠的 Endless 之間，小心翼翼地向上攀登……</p>`,
        acq:`<div class="stack">
          <div class="row">1–4 人（1 坦克、1 治療、2 輸出）</div>
          <div class="row">不允許無限制隊伍</div>
          <div class="row">職業：戰鬥職業 <small class="muted">※ 限定職僅能在符合隊伍人數限制的預組隊或無限制隊伍、且責任副本規則允許時參加。</small></div>
          <div class="row">等級：100 <small class="muted">（同步 100）</small></div>
          <div class="row">平均物品等級：720 <small class="muted">※ 同步時所有裝備能力值將被調整。</small></div>
          <div class="row"><small class="muted">※ 達到最低人數的隊伍將解除角色職責與裝備等級限制。</small></div>
        </div>`,
        req:`<div class="stack">
          <div class="row"><b>前置任務</b> <a class="link" href="#">終焉之約</a></div>
        </div>`,
        unlock:`<div class="stack">
          <div class="row"><b>解鎖任務</b> <a class="link" href="#">並肩之刃</a></div>
        </div>`
      }
    };

    const langToggle=document.getElementById('langToggle');
    const pageTitle=document.getElementById('pageTitle');
    const tabBtns=[...document.querySelectorAll('.tab-btn')];
    const panels={
      story:document.getElementById('panel-story'),
      acq:document.getElementById('panel-acq'),
      req:document.getElementById('panel-req'),
      unlock:document.getElementById('panel-unlock')
    };

    function getLang(){return localStorage.getItem(LANG_KEY)||'EN';}
    function applyLang(lang){
      const t=i18n[lang]||i18n.EN;
      pageTitle.textContent=t.pageTitle;
      langToggle.textContent=`🌐 ${t.langLabel}`;
      tabBtns.forEach(btn=>{btn.textContent=t.tabs[btn.dataset.tab]});
      const activeBtn=tabBtns.find(b=>b.getAttribute('aria-selected')==='true')||tabBtns[0];
      renderPanel(activeBtn.dataset.tab,lang);
    }
    function renderPanel(key,lang){
      const t=i18n[lang]||i18n.EN;
      Object.keys(panels).forEach(k=>panels[k].classList.remove('active'));
      panels[key].classList.add('active');
      panels[key].innerHTML=t[key];
    }
    tabBtns.forEach(btn=>{
      btn.addEventListener('click',()=>{
        tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
        btn.setAttribute('aria-selected','true');
        renderPanel(btn.dataset.tab,getLang());
      });
    });
    langToggle.addEventListener('click',()=>{
      const cur=getLang();
      const next=cur==='EN'?'JP':(cur==='JP'?'ZH':'EN');
      localStorage.setItem(LANG_KEY,next);
      applyLang(next);
    });
    const BOOT=getLang(); applyLang(BOOT);
  </script>
</body>
</html>
