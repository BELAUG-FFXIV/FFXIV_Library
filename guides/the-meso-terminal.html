<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The Meso Terminal | BELAUG · FFXIV Library</title>
  <meta name="description" content="FFXIV DT 7.3 Dungeon — The Meso Terminal：故事概要、取得方式、需求條件與解鎖內容，附影片。">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root {
      --bg: #fff8e6; --card: #ffffff;
      --fg: #222; --muted:#666; --border:#e5e1d8;
      --accent:#e11d48;
    }
    *{box-sizing:border-box}
    body{margin:0; font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif;
      background:var(--bg); color:var(--fg);}
    .container{max-width:1080px; margin:0 auto; padding:0 16px}
    /* 頁首 */
    .site-header{border-bottom:1px solid var(--border); background:#fff9edb3;
      backdrop-filter:saturate(120%) blur(6px); position:sticky; top:0; z-index:10}
    .nav{display:flex; align-items:center; justify-content:space-between; height:60px}
    .left{display:flex; align-items:center; gap:12px}
    .home{border:1px solid var(--border); background:#fff; padding:4px 8px; border-radius:8px; text-decoration:none; color:var(--fg); font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex; align-items:center; gap:8px}
    .icon-btn{background:none; border:none; cursor:pointer; font-size:14px; padding:6px 10px; border-radius:8px}
    .icon-btn:hover{background:#fff; border:1px solid var(--border)}
    /* 主體 */
    .main{padding:20px 0 40px}
    .grid{
      display:grid;
      grid-template-columns:1.1fr 1fr;
      gap:20px;
      align-items:start;
    }
    @media (max-width: 900px){
      .grid{grid-template-columns:1fr}
      .video-wrap{position:relative; padding-top:56.25%}
      .video-wrap iframe{position:absolute; inset:0; width:100%; height:100%}
    }
    .card{background:var(--card); border:1px solid var(--border); border-radius:16px; box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px; border-bottom:1px solid var(--border); font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%; height:420px; border:0; display:block; border-radius:16px}
    /* Tabs */
    .tabs{display:flex; gap:8px; padding:12px 12px 0; flex-wrap:wrap}
    .tab-btn{background:#fff; border:1px solid var(--border); color:var(--fg);
      border-radius:999px; padding:8px 14px; cursor:pointer; font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent); color:#fff; background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex; flex-direction:column; gap:10px}
    .stack .row{padding:12px 14px; border:1px dashed var(--border); border-radius:12px; background:#fffdf6}
    .row b{display:inline-block; min-width:130px}
    .muted{color:var(--muted)}
    .link{color:#0b60d8; text-decoration:none}
    .link:hover{text-decoration:underline}
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">🏠 Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="切換語言">🌐 EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <!-- 左：影片（保持既有尺寸不動） -->
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/nZWnpLPwuZE"
              title="The Meso Terminal" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- 右：標題 + Tabs -->
      <section class="card">
        <div class="hd" id="pageTitle">The Meso Terminal</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true"  data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Acquisition</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="req">Requirements</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlock">Unlocks</button>
        </div>
        <div class="bd">
          <div id="panel-story" class="tab-panel active"></div>
          <div id="panel-acq"   class="tab-panel"></div>
          <div id="panel-req"   class="tab-panel"></div>
          <div id="panel-unlock"class="tab-panel"></div>
        </div>
      </section>
    </div>
  </main>

  <script>
    const LANG_KEY = 'ffxiv-guide-lang';
    const i18n = {
      EN:{
        langLabel:'EN',
        pageTitle:'The Meso Terminal',
        tabs:{
          story:'Story',
          acq:'Acquisition',
          req:'Requirements',
          unlock:'Unlocks'
        },
        story:`<p>Deep within the Meso’s shifting void, echoes of an ancient civilization linger—its machines inert, its purpose forgotten. As you and your allies press on, the main terminal stirs to life once more, awakening dormant systems that seem to test not only your strength, but your intent.</p>
               <p>What truths lie hidden at the core of the Eternal Meso?</p>`,
        acq:`<div class="stack">
                <div class="row"><b>Unlock Method</b> 【TBD】</div>
                <div class="row"><b>Entrance</b> 【TBD】 <small class="muted">(X:?, Y:?)</small></div>
                <div class="row"><b>Duty Finder</b> 【TBD】</div>
             </div>`,
        req:`<div class="stack">
                <div class="row"><b>Prerequisite Quest</b> <a class="link" href="#">【TBD】</a></div>
                <div class="row"><b>Level / Item Level</b> 【TBD】</div>
                <div class="row"><b>Job/Class</b> Any Disciple of War or Magic</div>
             </div>`,
        unlock:`<div class="stack">
                  <div class="row"><b>Follow-up Quest</b> <a class="link" href="#">【TBD】</a></div>
                </div>`
      },
      JP:{
        langLabel:'JP',
        pageTitle:'永久幽界 メインターミナル',
        tabs:{
          story:'ストーリー',
          acq:'入手方法',
          req:'必要条件',
          unlock:'開放コンテンツ'
        },
        story:`<p>永久幽界に広がる謎の施設「メインターミナル」──その奥底には、滅びた文明の残響が静かに眠っていた。仲間たちとともに踏み入るその地で、止まっていた機構が再び作動し、進入者を試すかのように反応を見せる。</p>
               <p>すべての謎が眠る中枢、その真実に辿り着けるのか。</p>`,
        acq:`<div class="stack">
                <div class="row"><b>開放方法</b> 【後日更新】</div>
                <div class="row"><b>入口</b> 【後日更新】 <small class="muted">(X:?, Y:?)</small></div>
                <div class="row"><b>コンテンツファインダー</b> 【後日更新】</div>
             </div>`,
        req:`<div class="stack">
                <div class="row"><b>前提クエスト</b> <a class="link" href="#">【後日更新】</a></div>
                <div class="row"><b>必要レベル / IL</b> 【後日更新】</div>
                <div class="row"><b>クラス・ジョブ</b> ファイター / ソーサラー</div>
             </div>`,
        unlock:`<div class="stack">
                  <div class="row"><b>派生コンテンツ</b> <a class="link" href="#">【後日更新】</a></div>
                </div>`
      },
      ZH:{
        langLabel:'ZH',
        pageTitle:'幽冥終端',
        tabs:{
          story:'故事概要',
          acq:'取得方式',
          req:'需求條件',
          unlock:'解鎖內容'
        },
        story:`<p>在永久幽界深處，隱藏著名為「主終端」的神祕設施——一座早已被遺忘的古老文明殘骸。你與同伴深入其中，古老的裝置再度啟動，彷彿在測試你們的決心與動機。</p>
               <p>埋藏在中樞核心的，將是支配整個 Meso 的真相，還是早已注定的終局？</p>`,
        acq:`<div class="stack">
                <div class="row"><b>開放方式</b> 【待補】</div>
                <div class="row"><b>入口位置</b> 【待補】 <small class="muted">(X:?, Y:?)</small></div>
                <div class="row"><b>Duty Finder</b> 【待補】</div>
             </div>`,
        req:`<div class="stack">
                <div class="row"><b>前置任務</b> <a class="link" href="#">【待補】</a></div>
                <div class="row"><b>等級 / 裝等</b> 【待補】</div>
                <div class="row"><b>職業限制</b> 任一戰鬥職業</div>
             </div>`,
        unlock:`<div class="stack">
                  <div class="row"><b>後續內容</b> <a class="link" href="#">【待補】</a></div>
                </div>`
      }
    };

    const langToggle = document.getElementById('langToggle');
    const pageTitle  = document.getElementById('pageTitle');
    const tabBtns    = [...document.querySelectorAll('.tab-btn')];
    const panels     = {
      story:  document.getElementById('panel-story'),
      acq:    document.getElementById('panel-acq'),
      req:    document.getElementById('panel-req'),
      unlock: document.getElementById('panel-unlock')
    };

    function getLang(){ return localStorage.getItem(LANG_KEY) || 'EN'; }

    function applyLang(lang){
      const t = i18n[lang] || i18n.EN;
      pageTitle.textContent = t.pageTitle;
      langToggle.textContent = `🌐 ${t.langLabel}`;
      tabBtns.forEach(btn => { btn.textContent = t.tabs[btn.dataset.tab]; });
      const activeBtn = tabBtns.find(b => b.getAttribute('aria-selected')==='true') || tabBtns[0];
      renderPanel(activeBtn.dataset.tab, lang);
    }

    function renderPanel(key, lang){
      const t = i18n[lang] || i18n.EN;
      Object.keys(panels).forEach(k => panels[k].classList.remove('active'));
      panels[key].classList.add('active');
      panels[key].innerHTML = t[key];
    }

    tabBtns.forEach(btn=>{
      btn.addEventListener('click', ()=>{
        tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
        btn.setAttribute('aria-selected','true');
        renderPanel(btn.dataset.tab, getLang());
      });
    });

    langToggle.addEventListener('click', ()=>{
      const cur = getLang();
      const next = (cur==='EN') ? 'JP' : (cur==='JP' ? 'ZH' : 'EN');
      localStorage.setItem(LANG_KEY, next);
      applyLang(next);
    });

    const BOOT = getLang(); applyLang(BOOT);
  </script>
</body>
</html>
