<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Microbrewing | BELAUG Â· FFXIV Library</title>
  <meta name="description" content="MSQ â€“ Microbrewing (ARR Patch 2.0)">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root { --bg:#fff8e6; --card:#fff; --fg:#222; --muted:#666; --border:#e5e1d8; --accent:#e11d48; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif;background:var(--bg);color:var(--fg)}
    .container{max-width:1080px;margin:0 auto;padding:0 16px}
    .site-header{border-bottom:1px solid var(--border);background:#fff9edb3;backdrop-filter:saturate(120%) blur(6px);position:sticky;top:0;z-index:10}
    .nav{display:flex;align-items:center;justify-content:space-between;height:60px}
    .left{display:flex;align-items:center;gap:12px}
    .home{border:1px solid var(--border);background:#fff;padding:4px 8px;border-radius:8px;text-decoration:none;color:var(--fg);font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex;align-items:center;gap:8px}
    .icon-btn{background:none;border:none;cursor:pointer;font-size:14px;padding:6px 10px;border-radius:8px}
    .icon-btn:hover{background:#fff;border:1px solid var(--border)}
    .main{padding:20px 0 40px}
    .grid{display:grid;grid-template-columns:1.1fr 1fr;gap:20px;align-items:start}
    @media (max-width:900px){
      .grid{grid-template-columns:1fr}
      .video-wrap{position:relative;padding-top:56.25%}
      .video-wrap iframe{position:absolute;inset:0;width:100%;height:100%}
    }
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px;border-bottom:1px solid var(--border);font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%;height:420px;border:0;display:block;border-radius:16px}
    .tabs{display:flex;gap:8px;padding:12px 12px 0;flex-wrap:wrap}
    .tab-btn{background:#fff;border:1px solid var(--border);color:var(--fg);border-radius:999px;padding:8px 14px;cursor:pointer;font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent);color:#fff;background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex;flex-direction:column;gap:10px}
    .stack .row{padding:12px 14px;border:1px dashed var(--border);border-radius:12px;background:#fffdf6}
    .row b{display:inline-block;min-width:130px}
    .muted{color:var(--muted)}
    .link{color:#0b60d8;text-decoration:none}
    .link:hover{text-decoration:underline}

    /* å±•é–‹/æ”¶åˆ */
    .clamp{position:relative; max-height:360px; overflow:hidden}
    .clamp[data-collapsed="false"]{max-height:none}
    .clamp[data-collapsed="true"]::after{
      content:""; position:absolute; left:0; right:0; bottom:0; height:72px;
      background:linear-gradient(to bottom, rgba(255,255,255,0), var(--card)); pointer-events:none;
    }
    .expand-wrap{ margin-top:12px; }
    .expand-btn{
      display:inline-block; padding:8px 14px; border-radius:10px;
      background:var(--card); border:1px solid var(--border); cursor:pointer; font-weight:600;
    }
    .expand-btn:hover{ background:#fffef8; }
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">ğŸ  Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="åˆ‡æ›èªè¨€">ğŸŒ EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <!-- å·¦ï¼šå½±ç‰‡ -->
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/ii-TLfgQj1o"
              title="Microbrewing" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- å³ï¼šæ¨™é¡Œ + Tabs -->
      <section class="card">
        <div class="hd" id="pageTitle">Microbrewing</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true"  data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Acquisition</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlockq">Unlock Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="followq">Follow-Up Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="comments">Comments</button>
        </div>
        <div class="bd">
          <div id="panel-story"   class="tab-panel active"></div>
          <div id="panel-acq"     class="tab-panel"></div>
          <div id="panel-unlockq" class="tab-panel"></div>
          <div id="panel-followq" class="tab-panel"></div>
          <div id="panel-comments" class="tab-panel">
            <div id="giscus_container" style="min-height:320px;"></div>
          </div>
        </div>
      </section>
    </div>
  </main>

<script>
const LANG_KEY = 'ffxiv-guide-lang';
const i18n = {
  EN:{
    langLabel:'EN',
    pageTitle:'Microbrewing',
    tabs:{ story:'Story', acq:'Acquisition', unlockq:'Unlock Quest', followq:'Follow-Up Quest', comments:'Comments' },
    readMore:'Show more', readLess:'Show less',
    story:`<div class="clamp" data-collapsed="true">
      <p>The moment you return, Teteroon lights up with joy. He presses his tiny hands together, eyes gleaming with emotion, and begins to speak of Buscarron. After the Calamity, it was Buscarron who saved him from death. He owes him everything. Words alone wonâ€™t doâ€”he wants to express his thanks the best way he knows how: by brewing a fresh batch of Qiqirn firewater, something Buscarron loves.</p>
      <p>But thereâ€™s a problem. To make truly good firewater, he needs rare ingredientsâ€”and heâ€™s missing a crucial one. He looks up at you earnestly and asks for help collecting three fine coeurl pup whiskers.</p>
      <p>When you return again, with the items in hand, Teteroon gasps with delight. He takes the whiskers carefully, whispering thanks as he holds them close. Now he can begin. He assures you itâ€™ll be a fine batch, maybe even his best yet. But good firewater takes timeâ€”more time means more flavor. With a warm smile, he promises to get started right away and asks you to come back later.</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>Quest Giver</b> Teteroon, Upper La Noscea <small class="muted">(X:14.7, Y:24.4)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="never-forget.html">Never Forget</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="like-fine-wine.html">Like Fine Wine</a></div>
    </div>`
  },
  JP:{
    langLabel:'JP',
    pageTitle:'ãƒ†ãƒ†ãƒ«ãƒ³ã®ãµã‚‹ã¾ã„é…’',
    tabs:{ story:'ã‚¹ãƒˆãƒ¼ãƒªãƒ¼', acq:'å…¥æ‰‹æ–¹æ³•', unlockq:'é–‹æ”¾ã‚¯ã‚¨ã‚¹ãƒˆ', followq:'å¾Œç¶šã‚¯ã‚¨ã‚¹ãƒˆ', comments:'ã‚³ãƒ¡ãƒ³ãƒˆ' },
    readMore:'å…¨æ–‡ã‚’è¡¨ç¤º', readLess:'æŠ˜ã‚ŠãŸãŸã‚€',
    story:`<div class="clamp" data-collapsed="true">
      <p>ã‚ãªãŸã®å§¿ã‚’è¦‹ãŸãƒ†ãƒ†ãƒ¥ãƒ«ãƒ³ã¯ã€ã±ã£ã¨é¡”ã‚’è¼ã‹ã›ã€ä¸¡æ‰‹ã‚’èƒ¸ã®å‰ã§åˆã‚ã›ã¦å–œã³ã‚’ã‚ã‚‰ã‚ã«ã—ãŸã€‚å¤©ç½ã®æ··ä¹±ã®ä¸­ã€å‘½ã‚’è½ã¨ã—ã‹ã‘ã¦ã„ãŸè‡ªåˆ†ã‚’æ•‘ã£ã¦ãã‚ŒãŸã®ã¯ã€ã»ã‹ãªã‚‰ã¬ãƒ–ã‚¹ã‚«ãƒ­ãƒ³ã€‚å½¼ãŒã„ãªã‘ã‚Œã°ã€ä»Šã®è‡ªåˆ†ã¯ã„ãªã„ã€‚ã ã‹ã‚‰ã“ãã€ãŸã ã®è¨€è‘‰ã§ã¯è¶³ã‚Šãªã„æ„Ÿè¬ã®æ°—æŒã¡ã‚’ã€è‡ªåˆ†ãªã‚Šã®ã‚„ã‚Šæ–¹ã§ä¼ãˆãŸã„ã®ã ã¨ã„ã†ã€‚</p>
      <p>å½¼ãŒé¸ã‚“ã ã®ã¯ã€ãƒ–ã‚¹ã‚«ãƒ­ãƒ³ã®å¤§å¥½ç‰©â”€â”€ã‚­ã‚­ãƒ«ãƒ³ç‰¹è£½ã®ç«é…’ã‚’ä½œã£ã¦è´ˆã‚‹ã“ã¨ã€‚ã ãŒã€ã†ã¾ã„ç«é…’ã‚’ä»•è¾¼ã‚€ã«ã¯ã€è²´é‡ãªææ–™ãŒå¿…è¦ã«ãªã‚‹ã€‚ãã®ä¸­ã§ã‚‚ç‰¹ã«ã€ã‚¯ã‚¡ãƒ¼ãƒ«ã®ä»”ã®è‰¯è³ªãªãƒ’ã‚²ãŒä¸‰æœ¬è¶³ã‚Šãªã„ã®ã ã¨ã€ãƒ†ãƒ†ãƒ¥ãƒ«ãƒ³ã¯çœŸå‰£ãªè¡¨æƒ…ã§èªã‚Šã€ã©ã†ã‹æ‰‹ã‚’è²¸ã—ã¦ã»ã—ã„ã¨é ¼ã‚“ã§ããŸã€‚</p>
      <p>ã‚ãªãŸãŒææ–™ã‚’æŒã£ã¦æˆ»ã‚‹ã¨ã€ãƒ†ãƒ†ãƒ¥ãƒ«ãƒ³ã¯ç›®ã‚’ä¸¸ãã—ã¦å–œã³ã€ãƒ’ã‚²ã‚’ä¸¡æ‰‹ã§å¤§äº‹ãã†ã«æŠ±ãˆã‚‹ã‚ˆã†ã«å—ã‘å–ã£ãŸã€‚ã€Œã“ã‚Œã§ã€ã¨ã³ãã‚Šã®ç«é…’ãŒä½œã‚Œã‚‹ã§ãµï¼ã€ã¨å£°ã‚’å¼¾ã¾ã›ãªãŒã‚‰ã€ã™ãã«ä»•è¾¼ã¿ã‚’å§‹ã‚ã‚ˆã†ã¨ã™ã‚‹ã€‚</p>
      <p>ã€Œã„ã„ç«é…’ã«ã¯æ™‚é–“ãŒå¿…è¦ã§ãµã€‚æ™‚é–“ã‚’ã‹ã‘ã‚Œã°ã€ãã£ã¨ã‚‚ã£ã¨ãŠã„ã—ããªã‚‹ã§ãµã€ã¨ã€æº€é¢ã®ç¬‘ã¿ã‚’æµ®ã‹ã¹ãªãŒã‚‰ã€ä¸å¯§ã«ä½œæ¥­ã‚’å§‹ã‚ã‚‹ã®ã ã£ãŸã€‚</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>ã‚¯ã‚¨ã‚¹ãƒˆç™ºè¡Œ</b> ãƒ†ãƒ†ãƒ«ãƒ³ã€€é«˜åœ°ãƒ©ãƒã‚·ã‚¢ <small class="muted">(X:14.7, Y:24.4)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="never-forget.html">æ‡ã‹ã—ãå¿˜ã‚Œç‰©</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="like-fine-wine.html">ç†Ÿæˆã•ã‚Œã‚‹å‹æƒ…</a></div>
    </div>`
  },
  ZH:{
    langLabel:'ZH',
    pageTitle:'ç‰¹ç‰¹å€«çš„è‡ªé‡€å¥½é…’',
    tabs:{ story:'æ•…äº‹æ¦‚è¦', acq:'å–å¾—æ–¹å¼', unlockq:'è§£é–ä»»å‹™', followq:'å¾ŒçºŒä»»å‹™', comments:'ç•™è¨€' },
    readMore:'å±•é–‹å…¨æ–‡', readLess:'æ”¶åˆå…§å®¹',
    story:`<div class="clamp" data-collapsed="true">
      <p>ä½ ä¸€å›ä¾†ï¼ŒTeteroon å°±çœ¼ç›ç™¼äº®åœ°è¿ä¸Šä¾†ï¼Œé›™æ‰‹åˆåï¼Œé–‹å¿ƒåœ°èªªèµ·é—œæ–¼ Buscarron çš„äº‹ã€‚ä»–èªªï¼Œç•¶åˆå¤©ç½ç™¼ç”Ÿæ™‚ï¼Œæ˜¯ Buscarron æ•‘äº†ä»–ä¸€å‘½ã€‚æ²’æœ‰é‚£ä»½æ©æƒ…ï¼Œå°±æ²’æœ‰ä»Šå¤©çš„ä»–ã€‚åƒ…åƒ…é“è¬å¤ªä¸å¤ ï¼Œä»–æƒ³ç”¨è‡ªå·±æœ€æ‹¿æ‰‹çš„æ–¹å¼ä¾†å›å ±â”€â”€é‡€ä¸€å£º Qiqirn ç‰¹è£½ç«é…’ï¼Œé‚£æ˜¯ Buscarron æœ€å–œæ­¡çš„å‘³é“ã€‚</p>
      <p>ä¸éï¼Œæƒ³é‡€å‡ºçœŸæ­£å¥½çš„ç«é…’ï¼Œéœ€è¦ç‰¹åˆ¥çš„ææ–™ã€‚ä»–æŠ¬é ­æœ›è‘—ä½ ï¼Œå°å¿ƒåœ°èªªä»–é‚„å·®ä¸€æ¨£æœ€é‡è¦çš„åŸæ–™ï¼šä¸‰æ ¹ä¸Šç­‰çš„å¹¼è±¹é¬šã€‚å¸¶è‘—æœŸå¾…ï¼Œä»–è«‹ä½ å¹«å¿™ã€‚</p>
      <p>ä½ å¸¶è‘—ææ–™å›ä¾†æ™‚ï¼ŒTeteroon é«˜èˆˆå¾—å¹¾ä¹è·³äº†èµ·ä¾†ã€‚ä»–å°å¿ƒç¿¼ç¿¼æ¥éé¬é¬šï¼ŒæŠ±åœ¨æ‡·è£¡åƒæ§è‘—å¯¶ç‰©ä¸€æ¨£ã€‚ã€Œé€™æ¨£å°±èƒ½åšå‡ºæœ€æ£’çš„ç«é…’äº†ï¼ã€ä»–èªªï¼Œè²éŸ³ä¸­æ»¿æ˜¯æ„Ÿæ¿€èˆ‡é©•å‚²ã€‚</p>
      <p>ä¸éä»–ä¹Ÿæé†’ä½ ï¼Œå¥½é…’éœ€è¦æ™‚é–“ã€‚ã€Œè¶Šä¹…è¶Šé¦™ï¼Œè¶Šé¦™è¶Šå¥½ã€‚ã€ä»–ç¬‘è‘—èªªï¼Œæœƒç«‹åˆ»é–‹å§‹é‡€é€ ï¼Œä¸¦è«‹ä½ ä¹‹å¾Œå†ä¾†çœ‹çœ‹æˆæœã€‚</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>ä»»å‹™ç™¼å¸ƒ</b> ç‰¹ç‰¹å€«ã€€æ‹‰è«¾è¥¿äºé«˜åœ° <small class="muted">(X:14.7, Y:24.4)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="never-forget.html">é‚£äº›è¢«éºå¿˜çš„æº«æŸ”</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="like-fine-wine.html">æ­·ä¹…å½Œæ–°çš„æƒ…èª¼</a></div>
    </div>`
  }
};

const langToggle  = document.getElementById('langToggle');
const pageTitle   = document.getElementById('pageTitle');
const tabBtns     = [...document.querySelectorAll('.tab-btn')];
const panels = {
  story:  document.getElementById('panel-story'),
  acq:    document.getElementById('panel-acq'),
  unlockq:document.getElementById('panel-unlockq'),
  followq:document.getElementById('panel-followq'),
  comments: document.getElementById('panel-comments')
};

function getLang(){ return localStorage.getItem(LANG_KEY) || 'EN'; }
function applyLang(lang){
  const t = i18n[lang] || i18n.EN;
  pageTitle.textContent = t.pageTitle;
  langToggle.textContent = `ğŸŒ ${t.langLabel}`;
  tabBtns.forEach(btn => { btn.textContent = t.tabs[btn.dataset.tab]; });
  const activeBtn = tabBtns.find(b => b.getAttribute('aria-selected')==='true') || tabBtns[0];
  renderPanel(activeBtn.dataset.tab, lang);
}

function wireClamp(panelEl, t){
  const clamp = panelEl.querySelector('.clamp');
  const btn = panelEl.querySelector('[data-role="expand"]');
  if(!clamp || !btn) return;
  function setLabel(){
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    btn.textContent = collapsed ? t.readMore : t.readLess;
  }
  setLabel();
  btn.addEventListener('click', ()=>{
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    clamp.setAttribute('data-collapsed', collapsed ? 'false' : 'true');
    setLabel();
  });
}

function renderPanel(key, lang){
  const t = i18n[lang] || i18n.EN;
  Object.keys(panels).forEach(k => panels[k].classList.remove('active'));
  panels[key].classList.add('active');
  if (key !== 'comments') panels[key].innerHTML = t[key];
  if (key === 'story') wireClamp(panels[key], t);
  if (key === 'comments') loadGiscusForCurrentLang();
}

tabBtns.forEach(btn=>{
  btn.addEventListener('click', ()=>{
    tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
    btn.setAttribute('aria-selected','true');
    renderPanel(btn.dataset.tab, getLang());
  });
});

langToggle.addEventListener('click', ()=>{
  const cur = getLang();
  const next = cur==='EN' ? 'JP' : (cur==='JP' ? 'ZH' : 'EN');
  localStorage.setItem(LANG_KEY, next);
  applyLang(next);
});

applyLang(getLang());

/* === Giscusï¼šComments åˆ†é  === */
const GISCUS_CFG = {
  repo: 'BELAUG-FFXIV/FFXIV_Library',
  repoId: 'R_kgDOPyh4Kw',
  category: 'General',
  categoryId: 'DIC_kwDOPyh4K84CwPjL',
  theme: 'preferred_color_scheme'
};
function uiLang(code){ return code==='JP' ? 'ja' : (code==='ZH' ? 'zh-TW' : 'en'); }
function loadGiscusForCurrentLang(){
  const mount = document.getElementById('giscus_container');
  if (!mount) return;
  mount.innerHTML = '';
  const langCode = getLang();
  const s = document.createElement('script');
  s.src = 'https://giscus.app/client.js';
  s.setAttribute('data-repo', GISCUS_CFG.repo);
  s.setAttribute('data-repo-id', GISCUS_CFG.repoId);
  s.setAttribute('data-category', GISCUS_CFG.category);
  s.setAttribute('data-category-id', GISCUS_CFG.categoryId);
  s.setAttribute('data-mapping', 'specific');
  s.setAttribute('data-term', location.pathname + 'ï½œ' + langCode);
  s.setAttribute('data-reactions-enabled', '1');
  s.setAttribute('data-emit-metadata', '0');
  s.setAttribute('data-input-position', 'bottom');
  s.setAttribute('data-lang', uiLang(langCode));
  s.setAttribute('data-theme', GISCUS_CFG.theme);
  s.setAttribute('crossorigin', 'anonymous');
  s.async = true;
  mount.appendChild(s);
}
</script>
</body>
</html>
