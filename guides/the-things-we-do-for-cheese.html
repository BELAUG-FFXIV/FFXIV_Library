<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The Things We Do for Cheese | BELAUG Â· FFXIV Library</title>
  <meta name="description" content="MSQ â€“ The Things We Do for Cheese (ARR Patch 2.0)">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root { --bg:#fff8e6; --card:#fff; --fg:#222; --muted:#666; --border:#e5e1d8; --accent:#e11d48; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif;background:var(--bg);color:var(--fg)}
    .container{max-width:1080px;margin:0 auto;padding:0 16px}
    .site-header{border-bottom:1px solid var(--border);background:#fff9edb3;backdrop-filter:saturate(120%) blur(6px);position:sticky;top:0;z-index:10}
    .nav{display:flex;align-items:center;justify-content:space-between;height:60px}
    .left{display:flex;align-items:center;gap:12px}
    .home{border:1px solid var(--border);background:#fff;padding:4px 8px;border-radius:8px;text-decoration:none;color:var(--fg);font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex;align-items:center;gap:8px}
    .icon-btn{background:none;border:none;cursor:pointer;font-size:14px;padding:6px 10px;border-radius:8px}
    .icon-btn:hover{background:#fff;border:1px solid var(--border)}
    .main{padding:20px 0 40px}
    .grid{display:grid;grid-template-columns:1.1fr 1fr;gap:20px;align-items:start}
    @media (max-width:900px){
      .grid{grid-template-columns:1fr}
      .video-wrap{position:relative;padding-top:56.25%}
      .video-wrap iframe{position:absolute;inset:0;width:100%;height:100%}
    }
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px;border-bottom:1px solid var(--border);font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%;height:420px;border:0;display:block;border-radius:16px}
    .tabs{display:flex;gap:8px;padding:12px 12px 0;flex-wrap:wrap}
    .tab-btn{background:#fff;border:1px solid var(--border);color:var(--fg);border-radius:999px;padding:8px 14px;cursor:pointer;font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent);color:#fff;background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex;flex-direction:column;gap:10px}
    .stack .row{padding:12px 14px;border:1px dashed var(--border);border-radius:12px;background:#fffdf6}
    .row b{display:inline-block;min-width:130px}
    .muted{color:var(--muted)}
    .link{color:#0b60d8;text-decoration:none}
    .link:hover{text-decoration:underline}
    /* å±•é–‹/æ”¶åˆ */
    .clamp{position:relative; max-height:360px; overflow:hidden}
    .clamp[data-collapsed="false"]{max-height:none}
    .clamp[data-collapsed="true"]::after{
      content:""; position:absolute; left:0; right:0; bottom:0; height:72px;
      background:linear-gradient(to bottom, rgba(255,255,255,0), var(--card)); pointer-events:none;
    }
    .expand-wrap{ margin-top:12px; }
    .expand-btn{
      display:inline-block; padding:8px 14px; border-radius:10px;
      background:var(--card); border:1px solid var(--border); cursor:pointer; font-weight:600;
    }
    .expand-btn:hover{ background:#fffef8; }
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">ğŸ  Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="åˆ‡æ›èªè¨€">ğŸŒ EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <!-- å·¦ï¼šå½±ç‰‡ -->
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/wSHyEIOxeOE"
              title="The Things We Do for Cheese" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- å³ï¼šæ¨™é¡Œ + Tabs -->
      <section class="card">
        <div class="hd" id="pageTitle">The Things We Do for Cheese</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true"  data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Acquisition</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlockq">Unlock Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="followq">Follow-Up Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="comments">Comments</button>
        </div>
        <div class="bd">
          <div id="panel-story"   class="tab-panel active"></div>
          <div id="panel-acq"     class="tab-panel"></div>
          <div id="panel-unlockq" class="tab-panel"></div>
          <div id="panel-followq" class="tab-panel"></div>
          <div id="panel-comments" class="tab-panel">
            <div id="giscus_container" style="min-height:320px;"></div>
          </div>
        </div>
      </section>
    </div>
  </main>

<script>
const LANG_KEY = 'ffxiv-guide-lang';
const i18n = {
  EN:{
    langLabel:'EN',
    pageTitle:'The Things We Do for Cheese',
    tabs:{ story:'Story', acq:'Acquisition', unlockq:'Unlock Quest', followq:'Follow-Up Quest', comments:'Comments' },
    readMore:'Show more', readLess:'Show less',
    story:`<div class="clamp" data-collapsed="true">
      <p>At Costa del Sol, Wheiskaet admits the final ingredient was never meant for youâ€”Brayflox, his former quartermaster, planned to deliver it herself. But trouble at the Longstop forced an indefinite delay, and though he says nothing of the details, he fears the worst. Unable to go himself, he bids you hurry to the Hidden Falls docks and speak with Ozun Nazun, who will send you on to Raincatcher Gully, where Brayflox and her people have made their home.</p>
      <p>At the docks, Ozun Nazun squints at your urgencyâ€”something amiss at the goblin settlement?â€”then points you to the skipper whoâ€™ll ferry you across. In Raincatcher Gully, Brayflox Alltalks explains in her clipped gobbie-speech: a â€œflighty-beastâ€ drove her flock from Brayfloxâ€™s Longstop. If you want the promised treat, first help them take their home back.</p>
      <p>Within the Longstop, panic flares and is stamped out in quick succession. Brayflox dashes off to handle sudden threats; you press on and reclaim the camp. In the aftermath, she thanks you, praising your quick plans and fighty-think, and presents the prize: goblin cheeseâ€”stinky-sweet, special-made by secret gobbie arts. â€œNo party complete without gobbie gouda,â€ she insists.</p>
      <p>Back in Costa del Sol, Wheiskaet takes one sniff and grimacesâ€”no mistaking that unholy stench. All the same, he allows, such smell often heralds flavor. As for how itâ€™s made? Best not to ask. He still shudders to remember what kind of milk the goblins use.</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>Quest Giver</b> Wheiskaet <small class="muted">(Eastern La Noscea â€“ Costa del Sol, X:32.6, Y:30.5)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="there-and-back-again.html">There and Back Again</a></div>
      <div class="row"><b>Unlock Dungeon</b> <a class="link" href="brayflox-longstop.html">Brayfloxâ€™s Longstop</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="what-do-you-mean-you-forgot-the-wine.html">What Do You Mean You Forgot the Wine</a></div>
    </div>`
  },
  JP:{
    langLabel:'JP',
    pageTitle:'ãƒ–ãƒ¬ã‚¤ãƒ•ãƒ­ã‚¯ã‚¹ã®çãƒãƒ¼ã‚º',
    tabs:{ story:'ã‚¹ãƒˆãƒ¼ãƒªãƒ¼', acq:'å…¥æ‰‹æ–¹æ³•', unlockq:'é–‹æ”¾ã‚¯ã‚¨ã‚¹ãƒˆ', followq:'å¾Œç¶šã‚¯ã‚¨ã‚¹ãƒˆ', comments:'ã‚³ãƒ¡ãƒ³ãƒˆ' },
    readMore:'å…¨æ–‡ã‚’è¡¨ç¤º', readLess:'æŠ˜ã‚ŠãŸãŸã‚€',
    story:`<div class="clamp" data-collapsed="true">
      <p>ã‚³ã‚¹ã‚¿ãƒ»ãƒ‡ãƒ«ãƒ»ã‚½ãƒ«ã§ã€ãƒ´ã‚§ã‚¤ã‚¹ã‚±ãƒ¼ãƒˆã¯æ˜ã‹ã™ã€‚æœ€å¾Œã®é£Ÿæã¯æœ¬æ¥ã‚ãªãŸã®å½¹ç›®ã§ã¯ãªãã€ã‹ã¤ã¦ã®ç‰©è³‡ä¿‚ã§ã‚ã‚‹ãƒ–ãƒ¬ã‚¤ãƒ•ãƒ­ã‚¯ã‚¹ãŒè‡ªã‚‰å±Šã‘ã‚‹ã¯ãšã ã£ãŸâ€•â€•ã ãŒã€Œãƒ–ãƒ¬ã‚¤ãƒ•ãƒ­ã‚¯ã‚¹ã®é‡å–¶åœ°ã€ã§äº‹æ…‹ãŒèµ·ã“ã‚Šã€å¼•ãæ¸¡ã—ã¯ç„¡æœŸé™ã®å»¶æœŸã«ã€‚è©³ç´°ã¯ä¼ã‚ã‚‰ãªã„ãŒã€çŠ¶æ³ã¯æ·±åˆ»ã‹ã‚‚ã—ã‚Œãªã„ã€‚è‡ªã‚‰åŠ©ã‘ã«è¡Œã‘ãªã„å½¼ã¯ã€ã‚ãªãŸã«ã€Œéš ã‚Œæ»ã®èˆ¹ç€å ´ã€ã¸æ€¥ãã€ã‚ªã‚ºãƒ³ãƒ»ãƒŠã‚ºãƒ³ã«ä¼šã£ã¦ã€Œãƒ¬ã‚¤ãƒ³ã‚­ãƒ£ãƒƒãƒãƒ£ãƒ¼æ¨¹æ—ã€ã®ä¸€è§’ã«ä½ã‚€ãƒ–ãƒ¬ã‚¤ãƒ•ãƒ­ã‚¯ã‚¹ãŸã¡ã®ã‚‚ã¨ã¸å‘ã‹ãˆã¨è¨—ã™ã€‚</p>
      <p>èˆ¹ç€å ´ã§ã‚ªã‚ºãƒ³ãƒ»ãƒŠã‚ºãƒ³ã¯ã€ã‚´ãƒ–ãƒªãƒ³ã®é›†è½ã§ä½•ã‹ã‚ã£ãŸã®ã‹ã¨è¨ã—ã¿ã¤ã¤ã€æ¸¡ã—å®ˆã®èˆ¹ã«ä¹—ã‚Œã¨æ•™ãˆã‚‹ã€‚ã‚„ãŒã¦ã€Œãƒ¬ã‚¤ãƒ³ã‚­ãƒ£ãƒƒãƒãƒ£ãƒ¼æ¨¹æ—ã€ã§å‡ºè¿ãˆãŸãƒ–ãƒ¬ã‚¤ãƒ•ãƒ­ã‚¯ã‚¹ãƒ»ã‚ªãƒ¼ãƒ«ãƒˆãƒ¼ã‚¯ã‚¹ã¯ã€ä¾‹ã®â€œé£›ã³å›ã‚‹ç£â€ã«è¿½ã‚ã‚Œã€æ°‘ãŒã€Œãƒ–ãƒ¬ã‚¤ãƒ•ãƒ­ã‚¯ã‚¹ã®é‡å–¶åœ°ã€ã‹ã‚‰é€€ã„ãŸã“ã¨ã€ç´„æŸã®çå‘³ã‚’æ¸¡ã™ã«ã¯ã¾ãšå¥ªé‚„ãŒå…ˆæ±ºã ã¨è¨´ãˆã‚‹ã€‚</p>
      <p>é‡å–¶åœ°ã®å†…éƒ¨ã§ã¯ã€çªç™ºã®è„…å¨ã«ãƒ–ãƒ¬ã‚¤ãƒ•ãƒ­ã‚¯ã‚¹ãŒé§†ã‘ã¤ã‘ã€ã‚ãªãŸã¯é€²æ’ƒã—ã¦æ‹ ç‚¹ã‚’å–ã‚Šæˆ»ã™ã€‚æˆ¦ã„ã®å¾Œã€å½¼å¥³ã¯æ©Ÿè»¢ã¨ç”¨æ„å‘¨åˆ°ã•ã‚’ç§°ãˆã€ç§˜ä¼ã®è£½æ³•ã§ä½œã‚‹ã€Œã‚´ãƒ–ãƒªãƒ³ãƒãƒ¼ã‚ºã€ã‚’æ‰‹æ¸¡ã™ã€‚ã€Œå®´ã«æ¬ ã‹ã›ã¬ä¸€å“ã ã€ã¨èª‡ã‚‰ã—ã’ã«ã€‚</p>
      <p>ã‚³ã‚¹ã‚¿ãƒ»ãƒ‡ãƒ«ãƒ»ã‚½ãƒ«ã«æŒã¡å¸°ã‚‹ã¨ã€ãƒ´ã‚§ã‚¤ã‚¹ã‚±ãƒ¼ãƒˆã¯ã²ã¨å—…ãã—ã¦é¡”ã‚’ã—ã‹ã‚ã‚‹â€•â€•é–“é•ã„ãªãâ€œã‚ã®åŒ‚ã„â€ã ã€‚ã¨ã¯ã„ãˆã€å¼·çƒˆãªè‡­æ°—ã¯ã—ã°ã—ã°æ—¨å‘³ã®è¨¼ã§ã‚‚ã‚ã‚‹ã€‚è£½æ³•ã‹ï¼Ÿã€€çŸ¥ã‚‰ã¬ãŒä»ã ã€ã¨è‚©ã‚’ã™ãã‚ã€ã©ã‚“ãªä¹³ã‚’ä½¿ã†ã®ã‹ã‚’çŸ¥ã£ã¦ã—ã¾ã£ãŸæ—¥ã®æˆ¦æ…„ã¯å¿˜ã‚Œã‚‰ã‚Œãªã„ã¨è‹¦ç¬‘ã™ã‚‹ã€‚</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>ã‚¯ã‚¨ã‚¹ãƒˆç™ºè¡Œ</b> ãƒ´ã‚§ã‚¤ã‚¹ã‚±ãƒ¼ãƒˆã€€æ±ãƒ©ãƒã‚·ã‚¢ï¼šã‚³ã‚¹ã‚¿ãƒ»ãƒ‡ãƒ«ãƒ»ã‚½ãƒ« <small class="muted">(X:32.6, Y:30.5)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="there-and-back-again.html">æ€ã„å‡ºã®åœŸç”£é…’</a></div>
      <div class="row"><b>ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³é–‹æ”¾</b> <a class="link" href="brayflox-longstop.html">å¥ªé‚„æ”¯æ´ ãƒ–ãƒ¬ã‚¤ãƒ•ãƒ­ã‚¯ã‚¹ã®é‡å–¶åœ°</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="what-do-you-mean-you-forgot-the-wine.html">ã”ã¡ãã†ã«ã¯ç¾é…’ã‚’</a></div>
    </div>`
  },
  ZH:{
    langLabel:'ZH',
    pageTitle:'ç‚ºäº†èµ·å¸ï¼Œä¸æƒœä¸€åˆ‡',
    tabs:{ story:'æ•…äº‹æ¦‚è¦', acq:'å–å¾—æ–¹å¼', unlockq:'è§£é–ä»»å‹™', followq:'å¾ŒçºŒä»»å‹™', comments:'ç•™è¨€' },
    readMore:'å±•é–‹å…¨æ–‡', readLess:'æ”¶åˆå…§å®¹',
    story:`<div class="clamp" data-collapsed="true">
      <p>åœ¨ Costa del Solï¼ŒWheiskaet å¦è¨€ï¼šæœ€å¾Œä¸€æ¨£ææ–™åŸæœ¬ä¸æ˜¯ä½ çš„ä»»å‹™â€”â€”æ˜¯ä»–éå»çš„è»éœ€å®˜ Brayflox è¦è¦ªè‡ªé€ä¾†ã€‚ä½† Brayfloxâ€™s Longstop å‡ºäº†ç‹€æ³ï¼Œäº¤ä»˜ç„¡é™æœŸå»¶å¾Œï¼›ç´°ç¯€æœªæ˜ï¼Œä»–æ“”å¿ƒæƒ…å‹¢ä¸å¦™ã€‚ç„¡æ³•è¦ªè‡ªå‹•èº«ï¼Œä»–è«‹ä½ ç«‹åˆ»å‰å¾€ Hidden Falls docks æ‰¾ Ozun Nazunï¼Œç”±ä»–æŒ‡å¼•ä½ æ¸¡å¾€ Raincatcher Gullyï¼ŒBrayflox å’Œå¥¹çš„æ—äººå°±ä½åœ¨é‚£è£¡ã€‚</p>
      <p>åœ¨ç¢¼é ­ï¼ŒOzun Nazun å…ˆæ˜¯ç‹ç–‘åœ°å•èµ· goblin èšè½å‡ºäº†ä»€éº¼äº‹ï¼Œæ¥è‘—è¦ä½ å»æ‰¾æ¸¡èˆ¹çš„ skipperï¼Œæœƒè¼‰ä½ éå»ã€‚æŠµé” Raincatcher Gullyï¼ŒBrayflox Alltalks ä»¥å¥¹ç‰¹æœ‰çš„ gobbie èªæ°£è§£é‡‹ï¼šä¸€é ­ â€œflighty-beastâ€ æŠŠæ—äººå¾ Brayfloxâ€™s Longstop è¶•èµ°ã€‚æƒ³è¦å¥¹æ‰¿è«¾çš„ gobbietreatï¼Œå°±å…ˆå¹«å¿™æŠŠå®¶åœ’å¥ªå›ã€‚</p>
      <p>é€²å…¥ Longstop å¾Œï¼Œé©šéšªæ¥é€£è€Œè‡³åˆè¢«è¿…é€Ÿå¹³å®šï¼›Brayflox æ™‚è€Œè¡å»è™•ç†çªç™¼å¨è„…ï¼Œä½ å‰‡ä¸€è·¯æ¨é€²ï¼Œçµ‚æ–¼æ”¶å¾©ç‡Ÿåœ°ã€‚äº‹ç•¢ï¼Œå¥¹å‘ä½ è‡´è¬ï¼Œç¨±è®šä½ çš„ plansmaking èˆ‡ fighty-thinkï¼Œä¸¦äº¤å‡ºçå“ï¼šgoblin cheeseâ€”â€”åˆè‡­åˆç”œï¼Œå‡ºè‡ªç¥•å‚³çš„ gobbie å·¥è—ï¼›å¥¹é‚„ç¬‘èªªï¼šã€Œæ²’æœ‰ gobbie goudaï¼Œå®´æœƒå°±ä¸ç®—å®Œæ•´ã€‚ã€</p>
      <p>å°‡ goblin cheese å¸¶å› Costa del Solï¼ŒWheiskaet å—…äº†å—…ä¾¿é¢éœ²é›£è‰²â€”â€”é€™è‚¡å¯æ€•çš„å‘³é“éŒ¯ä¸äº†ã€‚ä¸éï¼Œä»–ä¹Ÿæ‰¿èªé€™ç¨®æ°£å‘³å¾€å¾€æ„å‘³è‘—æ¿ƒéƒæ»‹å‘³ã€‚è‡³æ–¼æ˜¯æ€éº¼åšçš„ï¼Ÿé‚„æ˜¯ä¸çŸ¥é“æ¯”è¼ƒå¥½â€”â€”ä»–è‡³ä»Šä¸€æƒ³åˆ° goblin ç”¨çš„æ˜¯å“ªç¨® milkï¼Œå°±å¿ä¸ä½æ‰“å†·é¡«ã€‚</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>ä»»å‹™ç™¼å¸ƒ</b> ç¶­æ–¯å‡±ç‰¹ã€€æ‹‰è«¾è¥¿äºæ±éƒ¨ï¼šç§‘æ–¯å¡”ãƒ»å¾·çˆ¾ãƒ»ç´¢çˆ¾ <small class="muted">(X:32.6, Y:30.5)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="there-and-back-again.html">å¸¶è‘—å›æ†¶æ­¸ä¾†çš„é…’</a></div>
      <div class="row"><b>è§£é–åœ°åŸ</b> <a class="link" href="brayflox-longstop.html">å¥ªå›å¸ƒé›·ç¦æ´›å…‹æ–¯é‡ç‡Ÿåœ°</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="what-do-you-mean-you-forgot-the-wine.html">ç››å®´æ€èƒ½å°‘ç¾é…’</a></div>
    </div>`
  }
};

const langToggle  = document.getElementById('langToggle');
const pageTitle   = document.getElementById('pageTitle');
const tabBtns     = [...document.querySelectorAll('.tab-btn')];
const panels = {
  story:  document.getElementById('panel-story'),
  acq:    document.getElementById('panel-acq'),
  unlockq:document.getElementById('panel-unlockq'),
  followq:document.getElementById('panel-followq'),
  comments: document.getElementById('panel-comments')
};

function getLang(){ return localStorage.getItem(LANG_KEY) || 'EN'; }
function applyLang(lang){
  const t = i18n[lang] || i18n.EN;
  pageTitle.textContent = t.pageTitle;
  langToggle.textContent = `ğŸŒ ${t.langLabel}`;
  tabBtns.forEach(btn => { btn.textContent = t.tabs[btn.dataset.tab]; });
  const activeBtn = tabBtns.find(b => b.getAttribute('aria-selected')==='true') || tabBtns[0];
  renderPanel(activeBtn.dataset.tab, lang);
}

function wireClamp(panelEl, t){
  const clamp = panelEl.querySelector('.clamp');
  const btn = panelEl.querySelector('[data-role="expand"]');
  if(!clamp || !btn) return;
  function setLabel(){
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    btn.textContent = collapsed ? t.readMore : t.readLess;
  }
  setLabel();
  btn.addEventListener('click', ()=>{
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    clamp.setAttribute('data-collapsed', collapsed ? 'false' : 'true');
    setLabel();
  });
}

function renderPanel(key, lang){
  const t = i18n[lang] || i18n.EN;
  Object.keys(panels).forEach(k => panels[k].classList.remove('active'));
  panels[key].classList.add('active');
  if (key !== 'comments') panels[key].innerHTML = t[key];
  if (key === 'story') wireClamp(panels[key], t);
  if (key === 'comments') loadGiscusForCurrentLang();
}

tabBtns.forEach(btn=>{
  btn.addEventListener('click', ()=>{
    tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
    btn.setAttribute('aria-selected','true');
    renderPanel(btn.dataset.tab, getLang());
  });
});

langToggle.addEventListener('click', ()=>{
  const cur = getLang();
  const next = cur==='EN' ? 'JP' : (cur==='JP' ? 'ZH' : 'EN');
  localStorage.setItem(LANG_KEY, next);
  applyLang(next);
});

applyLang(getLang());

/* === Giscusï¼šComments åˆ†é  === */
const GISCUS_CFG = {
  repo: 'BELAUG-FFXIV/FFXIV_Library',
  repoId: 'R_kgDOPyh4Kw',
  category: 'General',
  categoryId: 'DIC_kwDOPyh4K84CwPjL',
  theme: 'preferred_color_scheme'
};
function uiLang(code){ return code==='JP' ? 'ja' : (code==='ZH' ? 'zh-TW' : 'en'); }
function loadGiscusForCurrentLang(){
  const mount = document.getElementById('giscus_container');
  if (!mount) return;
  mount.innerHTML = '';
  const langCode = getLang();
  const s = document.createElement('script');
  s.src = 'https://giscus.app/client.js';
  s.setAttribute('data-repo', GISCUS_CFG.repo);
  s.setAttribute('data-repo-id', GISCUS_CFG.repoId);
  s.setAttribute('data-category', GISCUS_CFG.category);
  s.setAttribute('data-category-id', GISCUS_CFG.categoryId);
  s.setAttribute('data-mapping', 'specific');
  s.setAttribute('data-term', location.pathname + 'ï½œ' + langCode);
  s.setAttribute('data-reactions-enabled', '1');
  s.setAttribute('data-emit-metadata', '0');
  s.setAttribute('data-input-position', 'bottom');
  s.setAttribute('data-lang', uiLang(langCode));
  s.setAttribute('data-theme', GISCUS_CFG.theme);
  s.setAttribute('crossorigin', 'anonymous');
  s.async = true;
  mount.appendChild(s);
}
</script>
</body>
</html>
