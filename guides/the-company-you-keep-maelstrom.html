<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The Company You Keep (Maelstrom) | BELAUG Â· FFXIV Library</title>
  <meta name="description" content="MSQ â€“ The Company You Keep (Maelstrom) (ARR Patch 2.0)">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root { --bg:#fff8e6; --card:#fff; --fg:#222; --muted:#666; --border:#e5e1d8; --accent:#e11d48; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif;background:var(--bg);color:var(--fg)}
    .container{max-width:1080px;margin:0 auto;padding:0 16px}
    .site-header{border-bottom:1px solid var(--border);background:#fff9edb3;backdrop-filter:saturate(120%) blur(6px);position:sticky;top:0;z-index:10}
    .nav{display:flex;align-items:center;justify-content:space-between;height:60px}
    .left{display:flex;align-items:center;gap:12px}
    .home{border:1px solid var(--border);background:#fff;padding:4px 8px;border-radius:8px;text-decoration:none;color:var(--fg);font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex;align-items:center;gap:8px}
    .icon-btn{background:none;border:none;cursor:pointer;font-size:14px;padding:6px 10px;border-radius:8px}
    .icon-btn:hover{background:#fff;border:1px solid var(--border)}
    .main{padding:20px 0 40px}
    .grid{display:grid;grid-template-columns:1.1fr 1fr;gap:20px;align-items:start}
    @media (max-width:900px){
      .grid{grid-template-columns:1fr}
      .video-wrap{position:relative;padding-top:56.25%}
      .video-wrap iframe{position:absolute;inset:0;width:100%;height:100%}
    }
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px;border-bottom:1px solid var(--border);font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%;height:420px;border:0;display:block;border-radius:16px}
    .tabs{display:flex;gap:8px;padding:12px 12px 0;flex-wrap:wrap}
    .tab-btn{background:#fff;border:1px solid var(--border);color:#222;border-radius:999px;padding:8px 14px;cursor:pointer;font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent);color:#fff;background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex;flex-direction:column;gap:10px}
    .stack .row{padding:12px 14px;border:1px dashed var(--border);border-radius:12px;background:#fffdf6}
    .row b{display:inline-block;min-width:130px}
    .muted{color:var(--muted)}
    .link{color:#0b60d8;text-decoration:none}
    .link:hover{text-decoration:underline}
    /* Story å±•é–‹ / æ”¶åˆ */
    .clamp{ position:relative; max-height:360px; overflow:hidden; }
    .clamp[data-collapsed="false"]{ max-height:none; }
    .clamp[data-collapsed="true"]::after{
      content:""; position:absolute; left:0; right:0; bottom:0; height:72px;
      background:linear-gradient(to bottom, rgba(255,255,255,0), var(--card)); pointer-events:none;
    }
    .expand-wrap{ margin-top:12px; }
    .expand-btn{
      display:inline-block; padding:8px 14px; border-radius:10px;
      background:var(--card); border:1px solid var(--border); cursor:pointer; font-weight:600;
    }
    .expand-btn:hover{ background:#fffef8; }
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">ğŸ  Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="åˆ‡æ›èªè¨€">ğŸŒ EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <!-- å·¦ï¼šå½±ç‰‡ -->
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/9pe9pUqSGCo"
              title="The Company You Keep (Maelstrom)" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- å³ï¼šæ¨™é¡Œ + Tabs -->
      <section class="card">
        <div class="hd" id="pageTitle">The Company You Keep (Maelstrom)</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true"  data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Acquisition</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlockq">Unlock Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="followq">Follow-Up Quest</button>
        </div>
        <div class="bd">
          <div id="panel-story"   class="tab-panel active"></div>
          <div id="panel-acq"     class="tab-panel"></div>
          <div id="panel-unlockq" class="tab-panel"></div>
          <div id="panel-followq" class="tab-panel"></div>
        </div>
      </section>
    </div>
  </main>

<script>
const LANG_KEY = 'ffxiv-guide-lang';
const i18n = {
  EN:{
    langLabel:'EN',
    pageTitle:'The Company You Keep (Maelstrom)',
    tabs:{ story:'Story', acq:'Acquisition', unlockq:'Unlock Quest', followq:'Follow-Up Quest' },
    readMore:'Show more', readLess:'Show less',
    story:`<div class="clamp" data-collapsed="true">
      <p>Having stood witness to the words of the three Grand Company leaders, you made your choice: the Maelstrom of Limsa Lominsa. The officerâ€™s joy was plain, welcoming you as a brother of the crimson standard. Yet no sooner had you accepted than fate intervenedâ€”news arrived of a Garlond Ironworks airship, the Tiny Bronco, struck down by imperial fire and forced into an emergency landing.</p>
      <p>Without ceremony, your first mission was thrust upon you. In the wilds of Cedarwood, imperial scouts closed in, seeking to claim both the vessel and her crew. With steel in hand, you cut through the Garleans, saving the engineers Biggs and Wedge from certain capture. Though shaken, the airship endured, and with hurried repairs, it soared once more into the sky.</p>
      <p>Returning to Limsa, the Maelstrom welcomed you formally. The crimson standard was now yours to bear, and the Admiralâ€™s navy your shield and family. Your journey as one of the Maelstrom had begunâ€”not with pomp, but with fire and steel.</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>Quest Giver</b> Storm Officer <small class="muted">(The Waking Sands, X:6.8, Y:6.2)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="a-hero-in-the-making.html">A Hero in the Making</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="#">Till Sea Swallows All</a></div>
    </div>`
  },
  JP:{
    langLabel:'JP',
    pageTitle:'æˆ‘ãŒè¡Œãé“ã¯â€¦â€¦ï¼ˆé»’æ¸¦å›£ï¼‰',
    tabs:{ story:'ã‚¹ãƒˆãƒ¼ãƒªãƒ¼', acq:'å…¥æ‰‹æ–¹æ³•', unlockq:'é–‹æ”¾ã‚¯ã‚¨ã‚¹ãƒˆ', followq:'å¾Œç¶šã‚¯ã‚¨ã‚¹ãƒˆ' },
    readMore:'å…¨æ–‡ã‚’è¡¨ç¤º', readLess:'æŠ˜ã‚ŠãŸãŸã‚€',
    story:`<div class="clamp" data-collapsed="true">
      <p>ä¸‰å›½ã®ã‚°ãƒ©ãƒ³ãƒ‰ã‚«ãƒ³ãƒ‘ãƒ‹ãƒ¼ã®æ¼”èª¬ã‚’èãçµ‚ãˆãŸã‚ãªãŸã¯ã€ã¤ã„ã«æ±ºæ–­ã‚’ä¸‹ã—ãŸâ”€â”€ãƒªãƒ ã‚µãƒ»ãƒ­ãƒŸãƒ³ã‚µã®ã€Œé»’æ¸¦å›£ã€ã«èº«ã‚’æŠ•ã˜ã‚‹ã¨ã€‚å£«å®˜ã¯æ­“å–œã®ç¬‘ã¿ã§ã‚ãªãŸã‚’è¿ãˆã€ç´…ã®æ——ã®ä¸‹ã«åŠ ã‚ã‚‹ã“ã¨ã‚’èª‡ã‚Šã¨ã—ãŸã€‚</p>
      <p>ã—ã‹ã—ãã®ç›´å¾Œã€é‹å‘½ã¯å®¹èµ¦ãªãä»‹å…¥ã™ã‚‹ã€‚ã‚¬ãƒ¼ãƒ­ãƒ³ãƒ‰ãƒ»ã‚¢ã‚¤ã‚¢ãƒ³ãƒ¯ãƒ¼ã‚¯ã‚¹ã®é£›ç©ºè‰‡ã€Œã‚¿ã‚¤ãƒ‹ãƒ¼ãƒ»ãƒ–ãƒ­ãƒ³ã‚³ã€ãŒå¸å›½ã®ç ²ç«ã‚’å—ã‘ã€ã€Œã‚·ãƒ¼ãƒ€ãƒ¼ã‚¦ãƒƒãƒ‰ã€ã¸ä¸æ™‚ç€ã—ãŸã¨ã„ã†æ€¥å ±ãŒå±Šã„ãŸã®ã ã€‚</p>
      <p>æ­£å¼ãªä»»å‘½ã‚’å¾…ã¤é–“ã‚‚ãªãã€ã‚ãªãŸã¯åˆä»»å‹™ã«é§†ã‚Šå‡ºã•ã‚Œã‚‹ã€‚å¸å›½æ–¥å€™ãŸã¡ãŒè¿«ã‚‹ä¸­ã€é£›ç©ºè‰‡ã¨ãã®æ­ä¹—å“¡ã‚’å®ˆã‚‹ã¹ãå‰£ã‚’æŠœãã€ç†¾çƒˆãªæˆ¦ã„ã‚’ç¹°ã‚Šåºƒã’ãŸã€‚ã‚„ãŒã¦å¸å›½è»ã‚’é€€ã‘ã€æŠ€å¸«ã€Œãƒ“ãƒƒã‚°ã‚¹ã€ã¨ã€Œã‚¦ã‚§ãƒƒã‚¸ã€ã‚’æ•‘å‡ºã€‚æå‚·ã‚’è² ã„ãªãŒã‚‰ã‚‚ã€Œã‚¿ã‚¤ãƒ‹ãƒ¼ãƒ»ãƒ–ãƒ­ãƒ³ã‚³ã€ã¯ä¿®å¾©ã•ã‚Œã€å†ã³ç©ºã¸èˆã„ä¸ŠãŒã£ãŸã€‚</p>
      <p>ãƒªãƒ ã‚µã«æˆ»ã£ãŸã‚ãªãŸã‚’ã€é»’æ¸¦å›£ã¯æ­£å¼ã«è¿ãˆå…¥ã‚Œã‚‹ã€‚ç´…ã®æ——ã¯ä»Šã‚„ã‚ãªãŸã®èª‡ã‚Šã¨ãªã‚Šã€æç£ã®è‰¦éšŠã¯æ–°ãŸãªä»²é–“ã¨ã—ã¦ã‚ãªãŸã‚’å®ˆã‚‹ã ã‚ã†ã€‚è¯ã‚„ã‹ã•ã§ã¯ãªãã€æˆ¦ç«ã¨è©¦ç·´ã«ã‚ˆã£ã¦â”€â”€ã“ã†ã—ã¦ã€ã‚ãªãŸã®é»’æ¸¦å›£ã¨ã—ã¦ã®æ—…è·¯ãŒå§‹ã¾ã£ãŸã€‚</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>ã‚¯ã‚¨ã‚¹ãƒˆç™ºè¡Œ</b> é»’æ¸¦å›£å£«å®˜ <small class="muted">ï¼ˆè¥¿ã‚¶ãƒŠãƒ©ãƒ¼ãƒ³ï¼šç ‚ã®å®¶, X:6.8, Y:6.2ï¼‰</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="a-hero-in-the-making.html">è‹±é›„ã®åµ</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="#">æµ·ãŒå…¨ã¦ã‚’å‘‘ã¿è¾¼ã‚€ã¾ã§</a></div>
    </div>`
  },
  ZH:{
    langLabel:'ZH',
    pageTitle:'èˆ‡é»‘æ¸¦åŒè¡Œ',
    tabs:{ story:'æ•…äº‹æ¦‚è¦', acq:'å–å¾—æ–¹å¼', unlockq:'è§£é–ä»»å‹™', followq:'å¾ŒçºŒä»»å‹™' },
    readMore:'å±•é–‹å…¨æ–‡', readLess:'æ”¶åˆå…§å®¹',
    story:`<div class="clamp" data-collapsed="true">
      <p>åœ¨è†è½éä¸‰åœ‹ Grand Company çš„æ¼”èªªå¾Œï¼Œä½ çµ‚æ–¼åšå‡ºæŠ‰æ“‡â”€â”€åŠ å…¥ Limsa Lominsa çš„ã€Œé»‘æ¸¦åœ˜ã€ã€‚è»å®˜çš„å–œæ‚…æº¢æ–¼è¨€è¡¨ï¼Œè¿æ¥ä½ æˆç‚ºç´…æ——ä¹‹ä¸‹çš„æ–°åŒè¢ã€‚ç„¶è€Œå°šæœªå®Œæˆæ­£å¼ä»»å‘½ï¼Œå‘½é‹ä¾¿ç·Šæ€¥ä»‹å…¥ï¼šæ¶ˆæ¯å‚³ä¾†ï¼ŒGarlond Ironworks çš„é£›ç©ºè‰‡ã€ŒTiny Broncoã€é­å¸åœ‹ç ²ç«æ“Šè½ï¼Œè¢«è¿«åœ¨ Cedarwood ç·Šæ€¥é™è½ã€‚</p>
      <p>ä¾†ä¸åŠå¤šæƒ³ï¼Œä½ çš„é¦–å€‹ä»»å‹™å·²ç„¶å±•é–‹ã€‚å¸åœ‹æ–¥å€™æ­£é€¼è¿‘æ®˜ç ´çš„é£›ç©ºè‰‡ï¼Œæ„åœ–å¥ªå–èˆ¹é«”èˆ‡æŠ€è¡“ã€‚ä½ æ¯…ç„¶æ‹”åŠï¼Œèˆ‡ Maelstrom æˆ°å£«ä¸¦è‚©æ“Šé€€æ•µè»ï¼ŒæˆåŠŸæ•‘å‡ºå·¥ç¨‹å¸« Biggs èˆ‡ Wedgeã€‚é›–ç„¶é£›ç©ºè‰‡å—æï¼Œä½†åœ¨è‡¨æ™‚ä¿®å¾©å¾Œï¼Œå¥¹å†æ¬¡è¡ç ´é•·ç©ºã€‚</p>
      <p>å›åˆ° Limsa å¾Œï¼Œä½ çµ‚æ–¼è¢«æ­£å¼æˆäºˆ Maelstrom çš„èº«ä»½ã€‚è‡ªæ­¤ï¼Œç´…æ——ä¸åƒ…æ˜¯ä½ çš„è±¡å¾µï¼Œæ›´æ˜¯ä½ èˆ‡åŒä¼´çš„ç´å¸¶ã€‚é€™æ®µæ—…ç¨‹ï¼Œä¸¦éåœ¨æ¦®è€€çš„å…¸ç¦®ä¸­å±•é–‹ï¼Œè€Œæ˜¯åœ¨æˆ°ç«èˆ‡é‹¼éµçš„æ´—ç¦®ä¹‹ä¸‹æ­å¹•ã€‚</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>ä»»å‹™ç™¼å¸ƒ</b> é»‘æ¸¦åœ˜å£«å®˜ <small class="muted">ï¼ˆè–©ç´è˜­è¥¿éƒ¨ â€§ è¦ºé†’æ²™ä¹‹å®¶, X:6.8, Y:6.2ï¼‰</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="a-hero-in-the-making.html">åˆéœ²é ­è§’çš„è‹±é›„</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="#">ç›´è‡³å¤§æµ·åæ²’ä¸€åˆ‡</a></div>
    </div>`
  }
};

const langToggle  = document.getElementById('langToggle');
const pageTitle   = document.getElementById('pageTitle');
const tabBtns     = [...document.querySelectorAll('.tab-btn')];
const panels = {
  story:  document.getElementById('panel-story'),
  acq:    document.getElementById('panel-acq'),
  unlockq:document.getElementById('panel-unlockq'),
  followq:document.getElementById('panel-followq')
};

function getLang(){ return localStorage.getItem(LANG_KEY) || 'EN'; }

function applyLang(lang){
  const t = i18n[lang] || i18n.EN;
  pageTitle.textContent = t.pageTitle;
  langToggle.textContent = `ğŸŒ ${t.langLabel}`;
  tabBtns.forEach(btn => { btn.textContent = t.tabs[btn.dataset.tab]; });
  const activeBtn = tabBtns.find(b => b.getAttribute('aria-selected')==='true') || tabBtns[0];
  renderPanel(activeBtn.dataset.tab, lang);
}

function wireClamp(panelEl, t){
  const clamp = panelEl.querySelector('.clamp');
  const btn = panelEl.querySelector('[data-role="expand"]');
  if(!clamp || !btn) return;
  function setLabel(){
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    btn.textContent = collapsed ? t.readMore : t.readLess;
  }
  setLabel();
  btn.addEventListener('click', ()=>{
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    clamp.setAttribute('data-collapsed', collapsed ? 'false' : 'true');
    setLabel();
  });
}

function renderPanel(key, lang){
  const t = i18n[lang] || i18n.EN;
  Object.keys(panels).forEach(k => panels[k].classList.remove('active'));
  panels[key].classList.add('active');
  panels[key].innerHTML = t[key];
  if(key === 'story') wireClamp(panels[key], t);
}

tabBtns.forEach(btn=>{
  btn.addEventListener('click', ()=>{
    tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
    btn.setAttribute('aria-selected','true');
    renderPanel(btn.dataset.tab, getLang());
  });
});

langToggle.addEventListener('click', ()=>{
  const cur = getLang();
  const next = cur==='EN' ? 'JP' : (cur==='JP' ? 'ZH' : 'EN');
  localStorage.setItem(LANG_KEY, next);
  applyLang(next);
});

applyLang(getLang());
</script>
</body>
</html>
