<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The Dark Inside | BELAUG Â· FFXIV Library</title>
  <meta name="description" content="FFXIV EW 6.0 Trial â€” The Dark Insideï¼ˆã‚¾ãƒ‡ã‚£ã‚¢ãƒ¼ã‚¯è¨æ»…æˆ¦ / é»‘æš—æ·±æ·µï¼šä½è¿ªäºå…‹ï¼‰ï¼šæ•…äº‹æ¦‚è¦ã€éœ€æ±‚æ¢ä»¶ã€è§£é–ä»»å‹™èˆ‡å¾ŒçºŒä»»å‹™ï¼Œé™„å½±ç‰‡ã€‚">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root { --bg:#fff8e6; --card:#ffffff; --fg:#222; --muted:#666; --border:#e5e1d8; --accent:#e11d48; }
    *{box-sizing:border-box}
    body{margin:0; font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif; background:var(--bg); color:var(--fg);}
    .container{max-width:1080px; margin:0 auto; padding:0 16px}
    .site-header{border-bottom:1px solid var(--border); background:#fff9edb3; backdrop-filter:saturate(120%) blur(6px); position:sticky; top:0; z-index:10}
    .nav{display:flex; align-items:center; justify-content:space-between; height:60px}
    .left{display:flex; align-items:center; gap:12px}
    .home{border:1px solid var(--border); background:#fff; padding:4px 8px; border-radius:8px; text-decoration:none; color:var(--fg); font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex; align-items:center; gap:8px}
    .icon-btn{background:none; border:none; cursor:pointer; font-size:14px; padding:6px 10px; border-radius:8px}
    .icon-btn:hover{background:#fff; border:1px solid var(--border)}
    .main{padding:20px 0 40px}
    .grid{display:grid; grid-template-columns:1.1fr 1fr; gap:20px; align-items:start;}
    @media (max-width:900px){ .grid{grid-template-columns:1fr} .video-wrap{position:relative; padding-top:56.25%} .video-wrap iframe{position:absolute; inset:0; width:100%; height:100%} }
    .card{background:var(--card); border:1px solid var(--border); border-radius:16px; box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px; border-bottom:1px solid var(--border); font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%; height:420px; border:0; display:block; border-radius:16px}
    .tabs{display:flex; gap:8px; padding:12px 12px 0; flex-wrap:wrap}
    .tab-btn{background:#fff; border:1px solid var(--border); color:var(--fg); border-radius:999px; padding:8px 14px; cursor:pointer; font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent); color:#fff; background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex; flex-direction:column; gap:10px}
    .stack .row{padding:12px 14px; border:1px dashed var(--border); border-radius:12px; background:#fffdf6}
    .muted{color:var(--muted)}
    .link{color:#0b60d8; text-decoration:none}
    .link:hover{text-decoration:underline}
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">ğŸ  Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="åˆ‡æ›èªè¨€">ğŸŒ EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <!-- å·¦ï¼šå½±ç‰‡ -->
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/WivGwTzVpr4" title="The Dark Inside" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- å³ï¼šæ¨™é¡Œ + Tabs -->
      <section class="card">
        <div class="hd" id="pageTitle">The Dark Inside</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true" data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="req">Requirements</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Unlock Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlock">Follow-Up Quest</button>
          <!-- æ–°å¢ï¼šComments åˆ†é æŒ‰éˆ• -->
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="comments">Comments</button>
        </div>
        <div class="bd">
          <div id="panel-story" class="tab-panel active"></div>
          <div id="panel-acq" class="tab-panel"></div>
          <div id="panel-req" class="tab-panel"></div>
          <div id="panel-unlock" class="tab-panel"></div>
          <!-- æ–°å¢ï¼šç•™è¨€é¢æ¿ -->
          <div id="panel-comments" class="tab-panel">
            <div id="giscus_container" style="min-height:320px;"></div>
          </div>
        </div>
      </section>
    </div>
  </main>

  <script>
    const LANG_KEY = 'ffxiv-guide-lang';

    const i18n = {
      EN: {
        langLabel: 'EN',
        pageTitle: 'The Dark Inside',
        tabs: { story:'Story', req:'Requirements', acq:'Unlock Quest', unlock:'Follow-Up Quest', comments:'Comments' },
        story: `<p>Zodiarkâ€™s shackles have finally been broken, bringing His millennia-long imprisonment to an end. This premature awakening is the work of Fandaniel, who has cast aside his duty as an Ascian to turn the god of Darkness against the very star He was created to protect. With Zodiarkâ€™s unfathomable power at his disposal, Fandaniel has selected his first victimâ”€the Warrior of Light, who has ever been a thorn in the Ascianâ€™s side.</p>`,
        req: `<div class="stack">
          <div class="row">1 to 8 players (2 Tanks, 2 Healers, 4 DPS)</div>
          <div class="row">Unrestricted Parties Not Allowed</div>
          <div class="row">Class: Disciples of War or Magic</div>
          <div class="row">â€» Limited jobs can participate only in a preformed party meeting party size requirements or an unrestricted party, and if duty rules allow.</div>
          <div class="row">Level: 83 (Sync from 84)</div>
          <div class="row">â€» While synced, all item stats are adjusted.</div>
          <div class="row">â€» Role and item level restrictions are lifted for parties meeting minimum size requirements.</div>
        </div>`,
        acq: `<div class="stack">
          <div class="row"><a class="link" href="#">The Martyr</a></div>
        </div>`,
        unlock: `<div class="stack">
          <div class="row"><a class="link" href="#">In Shadowâ€™s Wake</a></div>
        </div>`
      },

      JP: {
        langLabel: 'JP',
        pageTitle: 'ã‚¾ãƒ‡ã‚£ã‚¢ãƒ¼ã‚¯è¨æ»…æˆ¦',
        tabs: { story:'ã‚¹ãƒˆãƒ¼ãƒªãƒ¼', req:'å¿…è¦æ¡ä»¶', acq:'é–‹æ”¾ã‚¯ã‚¨ã‚¹ãƒˆ', unlock:'å¾Œç¶šã‚¯ã‚¨ã‚¹ãƒˆ', comments:'ã‚³ãƒ¡ãƒ³ãƒˆ' },
        story: `<p>ã¤ã„ã«ã‚¾ãƒ‡ã‚£ã‚¢ãƒ¼ã‚¯ã®æ·ãŒç ´ã‚‰ã‚Œã€å¹¾åƒå¹´ã«åŠã¶å¹½é–‰ãŒçµ‚ã‚ã‚Šã‚’å‘Šã’ãŸã€‚ã“ã®æ—©ã™ãã‚‹è¦šé†’ã‚’å¼•ãèµ·ã“ã—ãŸã®ã¯ãƒ•ã‚¡ãƒ€ãƒ‹ã‚¨ãƒ«ã§ã‚ã‚‹ã€‚å½¼ã¯ã‚¢ã‚·ã‚¨ãƒ³ã¨ã—ã¦ã®ä½¿å‘½ã‚’æ¨ã¦å»ã‚Šã€é—‡ã®ç¥ã‚’æœ¬æ¥å®ˆã‚‹ã¹ãæ˜Ÿã«ç‰™ã‚’å‰¥ã‹ã›ã‚ˆã†ã¨ã—ãŸã®ã ã€‚è¨ˆã‚ŠçŸ¥ã‚Œã¬åŠ›ã‚’æ‰‹ä¸­ã«åã‚ãŸãƒ•ã‚¡ãƒ€ãƒ‹ã‚¨ãƒ«ãŒæœ€åˆã®ç²ç‰©ã«é¸ã‚“ã ã®ã¯ã€å¸¸ã«ã‚¢ã‚·ã‚¨ãƒ³ã®è„…å¨ã§ã‚ã‚Šç¶šã‘ãŸã€Œå…‰ã®æˆ¦å£«ã€â”€â”€ã‚ãªãŸã§ã‚ã£ãŸã€‚</p>`,
        req: `<div class="stack">
          <div class="row">1ï½8äººç”¨ï¼ˆã‚¿ãƒ³ã‚¯2ï¼ãƒ’ãƒ¼ãƒ©ãƒ¼2ï¼DPS4ï¼‰</div>
          <div class="row">åˆ¶é™è§£é™¤ãƒ‘ãƒ¼ãƒ†ã‚£ä¸å¯</div>
          <div class="row">å‚åŠ æ¡ä»¶ï¼šãƒ•ã‚¡ã‚¤ã‚¿ãƒ¼ï¼ã‚½ãƒ¼ã‚µãƒ©ãƒ¼</div>
          <div class="row">â€» ãƒªãƒŸãƒ†ãƒƒãƒ‰ã‚¸ãƒ§ãƒ–ã¯ã€äººæ•°æ¡ä»¶ã‚’æº€ãŸã™äº‹å‰çµæˆãƒ‘ãƒ¼ãƒ†ã‚£ã¾ãŸã¯åˆ¶é™è§£é™¤ãƒ‘ãƒ¼ãƒ†ã‚£ã€ã‹ã¤ä»»å‹™ãƒ«ãƒ¼ãƒ«ãŒè¨±å¯ã™ã‚‹å ´åˆã®ã¿å‚åŠ å¯èƒ½ã€‚</div>
          <div class="row">ãƒ¬ãƒ™ãƒ«ï¼š83ï¼ˆã‚·ãƒ³ã‚¯ï¼š84ï¼‰</div>
          <div class="row">â€» ã‚·ãƒ³ã‚¯æ™‚ã¯ã™ã¹ã¦ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒèª¿æ•´ã•ã‚Œã¾ã™ã€‚</div>
          <div class="row">â€» æœ€ä½äººæ•°æ¡ä»¶ã‚’æº€ãŸã™ãƒ‘ãƒ¼ãƒ†ã‚£ã§ã¯ã€ãƒ­ãƒ¼ãƒ«ãŠã‚ˆã³ã‚¢ã‚¤ãƒ†ãƒ ãƒ¬ãƒ™ãƒ«åˆ¶é™ãŒè§£é™¤ã•ã‚Œã¾ã™ã€‚</div>
        </div>`,
        acq: `<div class="stack">
          <div class="row"><a class="link" href="#">æ˜Ÿã‚’æ•‘ã£ãŸè‹±é›„</a></div>
        </div>`,
        unlock: `<div class="stack">
          <div class="row"><a class="link" href="#">é•·ãæ™‚ã®è¨˜éŒ²</a></div>
        </div>`
      },

      ZH: {
        langLabel: 'ZH',
        pageTitle: 'é»‘æš—æ·±æ·µï¼šä½è¿ªäºå…‹',
        tabs: { story:'æ•…äº‹æ¦‚è¦', req:'éœ€æ±‚æ¢ä»¶', acq:'è§£é–ä»»å‹™', unlock:'å¾ŒçºŒä»»å‹™', comments:'ç•™è¨€' },
        story: `<p>Zodiark çš„æ·é–çµ‚æ–¼è¢«æ‰“ç ´ï¼ŒçµæŸäº†ç¥‚é•·é”åƒå¹´çš„å›šç¦ã€‚é€™å ´éæ—©çš„ç”¦é†’æ­£æ˜¯ Fandaniel çš„æ‰€ä½œæ‰€ç‚ºâ”€â”€ä»–æ‹‹æ£„äº† Ascian çš„ä½¿å‘½ï¼Œåå°‡é€™ä½é»‘æš—ä¹‹ç¥å¼•å‘æœ¬æ‡‰å®ˆè­·çš„æ˜Ÿçƒã€‚å¦‚ä»Šï¼ŒæŒæ¡äº† Zodiark ç„¡å¯æ¸¬åº¦åŠ›é‡çš„ Fandanielï¼Œå°‡ç›®å…‰æŠ•å‘äº†ä»–çš„é¦–å€‹çµç‰©â”€â”€é‚£å€‹å§‹çµ‚å¦‚åˆºèˆ¬ä»¤ Ascian å±æ©Ÿå››ä¼çš„å­˜åœ¨ï¼Œä¹Ÿå°±æ˜¯ä½ ï¼Œã€ŒWarrior of Lightã€ã€‚</p>`,
        req: `<div class="stack">
          <div class="row">1â€“8 äººï¼ˆ2 å¦å…‹ã€2 æ²»ç™‚ã€4 è¼¸å‡ºï¼‰</div>
          <div class="row">ä¸å…è¨±ç„¡é™åˆ¶éšŠä¼</div>
          <div class="row">è·æ¥­ï¼šæˆ°é¬¥ï¼é­”æ³•å¸«ç³»</div>
          <div class="row">â€» é™å®šè·åƒ…èƒ½åœ¨ç¬¦åˆäººæ•¸æ¢ä»¶çš„é çµ„éšŠä¼æˆ–ç„¡é™åˆ¶éšŠä¼ï¼Œä¸”ç•¶å‰¯æœ¬è¦å‰‡å…è¨±æ™‚æ–¹å¯åƒèˆ‡ã€‚</div>
          <div class="row">ç­‰ç´šï¼š83ï¼ˆåŒæ­¥ 84ï¼‰</div>
          <div class="row">â€» åŒæ­¥æ™‚æœƒèª¿æ•´æ‰€æœ‰è£å‚™å±¬æ€§ã€‚</div>
          <div class="row">â€» æ–¼ç¬¦åˆæœ€ä½äººæ•¸æ¢ä»¶çš„éšŠä¼ä¸­ï¼Œè§’è‰²å®šä½èˆ‡è£å‚™ç­‰ç´šé™åˆ¶å°‡äºˆä»¥è§£é™¤ã€‚</div>
        </div>`,
        acq: `<div class="stack">
          <div class="row"><a class="link" href="#">æ®‰é“è€…</a></div>
        </div>`,
        unlock: `<div class="stack">
          <div class="row"><a class="link" href="#">æ­²æœˆä¹‹ç—•</a></div>
        </div>`
      }
    };

    const langToggle = document.getElementById('langToggle');
    const pageTitle  = document.getElementById('pageTitle');
    const tabBtns    = [...document.querySelectorAll('.tab-btn')];
    const panels = {
      story : document.getElementById('panel-story'),
      acq   : document.getElementById('panel-acq'),
      req   : document.getElementById('panel-req'),
      unlock: document.getElementById('panel-unlock'),
      comments: document.getElementById('panel-comments') // æ–°å¢
    };

    function getLang(){ return localStorage.getItem(LANG_KEY) || 'EN'; }

    // å–ä»£ï¼šé€²å…¥ comments æ‰è¼‰å…¥ giscusï¼›ä¸è¦è¦†å¯«ç•™è¨€å®¹å™¨
    function renderPanel(key, lang){
      const t = i18n[lang] || i18n.EN;
      Object.keys(panels).forEach(k => panels[k].classList.remove('active'));
      panels[key].classList.add('active');

      if (key !== 'comments') {
        panels[key].innerHTML = t[key];
      } else {
        loadGiscusForCurrentLang();
      }
    }

    tabBtns.forEach(btn=>{
      btn.addEventListener('click',()=>{
        tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
        btn.setAttribute('aria-selected','true');
        renderPanel(btn.dataset.tab, getLang());
      });
    });

    langToggle.addEventListener('click',()=>{
      const cur = getLang();
      const next = cur==='EN' ? 'JP' : (cur==='JP' ? 'ZH' : 'EN');
      localStorage.setItem(LANG_KEY,next);
      applyLang(next);
    });

    function applyLang(lang){
      const t = i18n[lang] || i18n.EN;
      pageTitle.textContent = t.pageTitle;
      langToggle.textContent = `ğŸŒ ${t.langLabel}`;
      tabBtns.forEach(btn => { btn.textContent = t.tabs[btn.dataset.tab]; });
      const activeBtn = tabBtns.find(b=>b.getAttribute('aria-selected')==='true') || tabBtns[0];
      renderPanel(activeBtn.dataset.tab, lang);
      // è‹¥æ­£åœåœ¨ç•™è¨€åˆ†é ï¼Œåˆ‡èªè¨€å¾Œé‡è¼‰ giscus
      if (activeBtn && activeBtn.dataset.tab === 'comments') loadGiscusForCurrentLang();
    }

    applyLang(getLang());

    /* === Giscusï¼šå–®ä¸€ Comments åˆ†é ï¼Œéš¨èªè¨€åˆ‡æ› === */
    const GISCUS_CFG = {
      repo: 'belaug-ffxiv/FFXIV_Library',
      repoId: 'R_kgD0Pyh4Kw',
      category: 'General',
      categoryId: 'DIC_kwD0Pyh4K84CwPjL',
      theme: 'preferred_color_scheme'
    };
    function uiLang(code){ return code==='JP' ? 'ja' : (code==='ZH' ? 'zh-TW' : 'en'); }
    function loadGiscusForCurrentLang(){
      const mount = document.getElementById('giscus_container');
      if (!mount) return;
      mount.innerHTML = '';
      const langCode = getLang(); // EN / JP / ZH
      const s = document.createElement('script');
      s.src = 'https://giscus.app/client.js';
      s.setAttribute('data-repo', GISCUS_CFG.repo);
      s.setAttribute('data-repo-id', GISCUS_CFG.repoId);
      s.setAttribute('data-category', GISCUS_CFG.category);
      s.setAttribute('data-category-id', GISCUS_CFG.categoryId);
      s.setAttribute('data-mapping', 'specific');
      s.setAttribute('data-term', location.pathname + 'ï½œ' + langCode);
      s.setAttribute('data-reactions-enabled', '1');
      s.setAttribute('data-emit-metadata', '0');
      s.setAttribute('data-input-position', 'bottom');
      s.setAttribute('data-lang', uiLang(langCode));
      s.setAttribute('data-theme', GISCUS_CFG.theme);
      s.setAttribute('crossorigin', 'anonymous');
      s.async = true;
      mount.appendChild(s);
    }
  </script>
</body>
</html>
