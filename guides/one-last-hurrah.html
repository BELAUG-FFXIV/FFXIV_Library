<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>One Last Hurrah | BELAUG · FFXIV Library</title>
  <meta name="description" content="FFXIV Side Feature — One Last Hurrah：故事概要、取得方式、需求條件與解鎖內容（附影片）。">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root { --bg:#fff8e6; --card:#fff; --fg:#222; --muted:#666; --border:#e5e1d8; --accent:#e11d48; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif;background:var(--bg);color:var(--fg)}
    .container{max-width:1080px;margin:0 auto;padding:0 16px}
    .site-header{border-bottom:1px solid var(--border);background:#fff9edb3;backdrop-filter:saturate(120%) blur(6px);position:sticky;top:0;z-index:10}
    .nav{display:flex;align-items:center;justify-content:space-between;height:60px}
    .left{display:flex;align-items:center;gap:12px}
    .home{border:1px solid var(--border);background:#fff;padding:4px 8px;border-radius:8px;text-decoration:none;color:var(--fg);font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex;align-items:center;gap:8px}
    .icon-btn{background:none;border:none;cursor:pointer;font-size:14px;padding:6px 10px;border-radius:8px}
    .icon-btn:hover{background:#fff;border:1px solid var(--border)}
    .main{padding:20px 0 40px}
    .grid{display:grid;grid-template-columns:1.1fr 1fr;gap:20px;align-items:start}
    @media (max-width:900px){.grid{grid-template-columns:1fr}.video-wrap{position:relative;padding-top:56.25%}.video-wrap iframe{position:absolute;inset:0;width:100%;height:100%}}
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px;border-bottom:1px solid var(--border);font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%;height:420px;border:0;display:block;border-radius:16px}
    .tabs{display:flex;gap:8px;padding:12px 12px 0;flex-wrap:wrap}
    .tab-btn{background:#fff;border:1px solid var(--border);color:var(--fg);border-radius:999px;padding:8px 14px;cursor:pointer;font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent);color:#fff;background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex;flex-direction:column;gap:10px}
    .stack .row{padding:12px 14px;border:1px dashed var(--border);border-radius:12px;background:#fffdf6}
    .row b{display:inline-block;min-width:130px}
    .muted{color:var(--muted)}
    .link{color:#0b60d8;text-decoration:none}
    .link:hover{text-decoration:underline}
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">🏠 Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="切換語言">🌐 EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <!-- 左：影片（固定不連動高度） -->
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/nPYssAbwHyE"
              title="One Last Hurrah" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- 右：標題 + Tabs（Quest 固定 4 個） -->
      <section class="card">
        <div class="hd" id="pageTitle">One Last Hurrah</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true"  data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Acquisition</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="req">Requirements</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlock">Unlocks</button>
        </div>
        <div class="bd">
          <div id="panel-story"  class="tab-panel active"></div>
          <div id="panel-acq"    class="tab-panel"></div>
          <div id="panel-req"    class="tab-panel"></div>
          <div id="panel-unlock" class="tab-panel"></div>
        </div>
      </section>
    </div>
  </main>

  <script>
    const LANG_KEY = 'ffxiv-guide-lang';
    const i18n = {
      EN:{
        langLabel:'EN',
        pageTitle:'One Last Hurrah',
        tabs:{
          story:'Story',
          acq:'Acquisition',
          req:'Requirements',
          unlock:'Unlocks'
        },
        story:`<p>At Tuliyollal’s harbor, a messenger finds you and hurriedly explains that Ketenramm wishes to speak.<p> 
        <p>The old explorer soon appears, apologizing for stopping you, but his eyes shine with resolve. He speaks of Shades’ Triangle, a cursed stretch of sea where ships vanished and whispers told of a crescent-shaped isle.<p> 
        <p>Though life kept him ashore, the mystery has haunted him for years. With Koana’s reason and Wuk Lamat’s blessing, he asks you to join him on one final voyage. <p>
        <p>You accept, and soon a ship from Limsa Lominsa carries you into the Northern Empty. <p>
        <p>Ofangeim, the navigator, notes the rare calm of these seas, while the crew shares their stories — a surveyor who once glimpsed the isle, a secretary whose grandfather sailed with Ketenramm, a prospector dreaming of trade, and a provisioner lamenting a drunken fool locked away. <p>
        <p>Their hopes and fears mingle as the horizon shifts. Then the lookout cries out: land ahead. A crescent isle flickers in and out of sight, mocking your eyes. A strange voice whispers in your mind alone, and suddenly the ship lurches, seized by unseen force. Helpless, you are drawn forward, docking without a scratch before a phantom village.<p>
        <p>Ketenramm hands you a weathered journal — the Occult Record — and entrusts you to record what lies ahead. Thus begins the tale of the Occult Crescent.</p>`,
        acq:`<div class="stack">
          <!-- TODO: 你提供發放者/地點座標後，我再補 -->
          <div class="row"><b>Quest Giver</b>Expedition Messenger in Tuliyollal (X: 17.1 Y: 11.8)</div>
        </div>`,
        req:`<div class="stack">
          <div class="row"><b>Prerequisite Quest</b> —</div>
          <div class="row"><b>Job/Class</b> Any Disciple of War or Magic (excluding limited jobs) Lv. 100
</div>
        </div>`,
        unlock:`<div class="stack">
          <div class="row"><b>Follow-up Quest</b> —</div>
        </div>`
      },
      JP:{
        langLabel:'JP',
        pageTitle:'ケテンラム、最後の冒険',
        tabs:{
          story:'ストーリー',
          acq:'入手方法',
          req:'必要条件',
          unlock:'開放コンテンツ'
        },
        story:`<p>トゥルヤロルの港で、伝令があなたを見つけ、ケテンラムが話したがっていると急ぎ伝える。<p>
        <p>やがて現れた老探検家は、立ち止めたことを詫びながらも、その瞳に揺るぎない決意を宿していた。彼が語るのは「影の三角海域」──数多の船が消息を絶ち、三日月の島影が囁かれる呪われた海域だ。<p>
        <p>陸での務めに追われながらも、この謎は彼の心を離れなかった。コアナの理とウクラマートの励ましを受け、彼は最後の航海へとあなたを誘う。<p>
        <p>あなたは頷き、リムサ・ロミンサから運ばれた船で北洋へと漕ぎ出す。航海士オファンゲイムは珍しい凪を指摘し、船員たちはそれぞれの物語を語る。<p>
        <p>島を遠望した測量士、ケテンラムと共に初めてトゥルヤロルに上陸した祖父を持つ書記官、交易の夢を見る鑑定士、そして酔って樽に押し込まれた厄介者を嘆く物資係……。<p>
        <p>やがて見張りの叫びが響く。「陸影！」　三日月の島が現れては消え、奇妙な声があなたの心にだけ囁く。次の瞬間、船は見えざる力に捕らわれ、傷一つなく幻の村へと接岸する。<p>
        <p>ケテンラムは風化した記録帳をあなたに手渡し、それに旅のすべてを書き留めてほしいと託す。こうして「蜃気楼の三日月」の物語が幕を開けた。</p>`,
        acq:`<div class="stack">
          <div class="row"><b>クエスト発行</b> ―</div>
        </div>`,
        req:`<div class="stack">
          <div class="row"><b>前提クエスト</b> ―</div>
          <div class="row"><b>クラス・ジョブ</b> ―</div>
        </div>`,
        unlock:`<div class="stack">
          <div class="row"><b>開放コンテンツ</b> ―</div>
        </div>`
      },
      ZH:{
        langLabel:'ZH',
        pageTitle:'最後的冒險',
        tabs:{
          story:'故事概要',
          acq:'取得方式',
          req:'需求條件',
          unlock:'解鎖內容'
        },
        story:`<p>在 Tuliyollal 的港口，一名信使急切找到你，說 Ketenramm 想與你談話。很快，這位老探險家出現，雖然為攔住你而致歉，但眼神中閃爍著堅定的光芒。<p>
        <p>他開口談起「Shades’ Triangle」——那片無數船隻消失、傳說中有新月島影的詛咒之海。多年來，他雖被陸上的責任綁住，卻始終無法忘懷這個謎團。<p>
        <p>在 Koana 的理性支持與 Wuk Lamat 的鼓勵下，他請你陪伴他完成最後的航程。你答應了，隨即登上一艘從 Limsa Lominsa 調來的船，駛向 Northern Empty。<p>
        <p>航海士 Ofangeim 提到此海域難得的平靜，船員們也各自分享心聲——曾遠遠望見島嶼的測量員、以祖父的冒險為榮的書記官、懷抱貿易夢想的鑑定師，以及抱怨那位被綁進酒桶的醉漢的物資官。<p>
        <p>沒多久，瞭望手高喊：「陸地！」一座新月狀的島嶼忽隱忽現。就在此時，一個神秘聲音只在你心中低語，船身猛然一震，被無形之力牽引，最終毫髮無損地停泊在一座幻影村落前。Ketenramm 交給你一本風化的日誌——「Occult Record」，託付你記錄接下來的一切。<p>
        <p>Occult Crescent 的傳說自此展開。</p>`,
        acq:`<div class="stack">
          <div class="row"><b>任務發布</b> —</div>
        </div>`,
        req:`<div class="stack">
          <div class="row"><b>前提任務</b> —</div>
          <div class="row"><b>職業限制</b> —</div>
        </div>`,
        unlock:`<div class="stack">
          <div class="row"><b>解鎖內容</b> —</div>
        </div>`
      }
    };

    const langToggle = document.getElementById('langToggle');
    const pageTitle  = document.getElementById('pageTitle');
    const tabBtns    = [...document.querySelectorAll('.tab-btn')];
    const panels     = {
      story: document.getElementById('panel-story'),
      acq:   document.getElementById('panel-acq'),
      req:   document.getElementById('panel-req'),
      unlock:document.getElementById('panel-unlock')
    };

    function getLang(){ return localStorage.getItem(LANG_KEY) || 'EN'; }
    function applyLang(lang){
      const t = i18n[lang] || i18n.EN;
      pageTitle.textContent = t.pageTitle;
      langToggle.textContent = `🌐 ${t.langLabel}`;
      tabBtns.forEach(btn => { btn.textContent = t.tabs[btn.dataset.tab]; });
      const activeBtn = tabBtns.find(b => b.getAttribute('aria-selected')==='true') || tabBtns[0];
      renderPanel(activeBtn.dataset.tab, lang);
    }
    function renderPanel(key, lang){
      const t = i18n[lang] || i18n.EN;
      Object.keys(panels).forEach(k => panels[k].classList.remove('active'));
      panels[key].classList.add('active');
      panels[key].innerHTML = t[key];
    }
    tabBtns.forEach(btn=>{
      btn.addEventListener('click',()=>{
        tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
        btn.setAttribute('aria-selected','true');
        renderPanel(btn.dataset.tab, getLang());
      });
    });
    langToggle.addEventListener('click',()=>{
      const cur = getLang();
      const next = cur==='EN' ? 'JP' : (cur==='JP' ? 'ZH' : 'EN');
      localStorage.setItem(LANG_KEY, next);
      applyLang(next);
    });
    applyLang(getLang());
  </script>
</body>
</html>
