{
  "ytId": "qRHq_bKBdYw",
  "slug": "forest-friend",
  "title": {
    "EN": "Forest Friend",
    "JP": "仮宿暮らしの困りごと",
    "ZH": "森林中同伴的煩憂"
  },
  "category": "MSQ",
  "expac": "ARR",
  "patch": "2.0",
  "tags": ["ARR", "MSQ", "Quest"],
  "playlistUrl": "https://www.youtube.com/playlist?list=PLtC2r5occXAlrJCM-l4Vn8O-29uqbMYSt"
}

forest-friend.htm

<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Forest Friend | BELAUG · FFXIV Library</title>
  <meta name="description" content="MSQ – Forest Friend (ARR Patch 2.0)">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root { --bg:#fff8e6; --card:#fff; --fg:#222; --muted:#666; --border:#e5e1d8; --accent:#e11d48; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif;background:var(--bg);color:var(--fg)}
    .container{max-width:1080px;margin:0 auto;padding:0 16px}
    .site-header{border-bottom:1px solid var(--border);background:#fff9edb3;backdrop-filter:saturate(120%) blur(6px);position:sticky;top:0;z-index:10}
    .nav{display:flex;align-items:center;justify-content:space-between;height:60px}
    .left{display:flex;align-items:center;gap:12px}
    .home{border:1px solid var(--border);background:#fff;padding:4px 8px;border-radius:8px;text-decoration:none;color:var(--fg);font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex;align-items:center;gap:8px}
    .icon-btn{background:none;border:none;cursor:pointer;font-size:14px;padding:6px 10px;border-radius:8px}
    .icon-btn:hover{background:#fff;border:1px solid var(--border)}
    .main{padding:20px 0 40px}
    .grid{display:grid;grid-template-columns:1.1fr 1fr;gap:20px;align-items:start}
    @media (max-width:900px){
      .grid{grid-template-columns:1fr}
      .video-wrap{position:relative;padding-top:56.25%}
      .video-wrap iframe{position:absolute;inset:0;width:100%;height:100%}
    }
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px;border-bottom:1px solid var(--border);font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%;height:420px;border:0;display:block;border-radius:16px}
    .tabs{display:flex;gap:8px;padding:12px 12px 0;flex-wrap:wrap}
    .tab-btn{background:#fff;border:1px solid var(--border);color:var(--fg);border-radius:999px;padding:8px 14px;cursor:pointer;font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent);color:#fff;background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex;flex-direction:column;gap:10px}
    .stack .row{padding:12px 14px;border:1px dashed var(--border);border-radius:12px;background:#fffdf6}
    .row b{display:inline-block;min-width:130px}
    .muted{color:var(--muted)}
    .link{color:#0b60d8;text-decoration:none}
    .link:hover{text-decoration:underline}

    /* 展開/收合 */
    .clamp{position:relative; max-height:360px; overflow:hidden}
    .clamp[data-collapsed="false"]{max-height:none}
    .clamp[data-collapsed="true"]::after{
      content:""; position:absolute; left:0; right:0; bottom:0; height:72px;
      background:linear-gradient(to bottom, rgba(255,255,255,0), var(--card)); pointer-events:none;
    }
    .expand-wrap{ margin-top:12px; }
    .expand-btn{
      display:inline-block; padding:8px 14px; border-radius:10px;
      background:var(--card); border:1px solid var(--border); cursor:pointer; font-weight:600;
    }
    .expand-btn:hover{ background:#fffef8; }
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">🏠 Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="切換語言">🌐 EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <!-- 左：影片 -->
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/qRHq_bKBdYw"
              title="Forest Friend" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- 右：標題 + Tabs -->
      <section class="card">
        <div class="hd" id="pageTitle">Forest Friend</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true"  data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Acquisition</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlockq">Unlock Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="followq">Follow-Up Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="comments">Comments</button>
        </div>
        <div class="bd">
          <div id="panel-story"   class="tab-panel active"></div>
          <div id="panel-acq"     class="tab-panel"></div>
          <div id="panel-unlockq" class="tab-panel"></div>
          <div id="panel-followq" class="tab-panel"></div>
          <div id="panel-comments" class="tab-panel">
            <div id="giscus_container" style="min-height:320px;"></div>
          </div>
        </div>
      </section>
    </div>
  </main>

<script>
const LANG_KEY = 'ffxiv-guide-lang';
const i18n = {
  EN:{
    langLabel:'EN',
    pageTitle:'Forest Friend',
    tabs:{ story:'Story', acq:'Acquisition', unlockq:'Unlock Quest', followq:'Follow-Up Quest', comments:'Comments' },
    readMore:'Show more', readLess:'Show less',
    story:`<div class="clamp" data-collapsed="true">
      <p>With tensions easing in Little Solace, Papalymo proposes a new approach: help the sylphs not through diplomacy, but through action. As displaced forest dwellers, the sylphs surely suffer their own share of hardships. Papalymo suggests that, rather than directly questioning them, you speak with Hearer Imedia—a Gridanian who has earned their trust.</p>
      <p>Imedia explains the plight of Little Solace: beasts from nearby forests frequently wander into the poorly defended settlement, harassing its residents. She asks you to slay the ziz gorlins and gall gnats threatening the area and gather three rare brownie brushes—materials significant to sylphic culture.</p>
      <p>You do as asked, and once more present yourself before Komuxio. At first skeptical, he remains guarded—trust, he insists, is not easily earned. But when you offer the brushes and speak of your deeds, his demeanor softens. Moved by your kindness and action, he begins to believe perhaps not all walking ones bring harm.</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>Quest Giver</b> Papalymo <small class="muted">(East Shroud, X:21.9, Y:25.6)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="dance-dance-diplomacy.html">Dance Dance Diplomacy</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="#">Presence of the Enemy</a></div>
    </div>`
  },
  JP:{
    langLabel:'JP',
    pageTitle:'仮宿暮らしの困りごと',
    tabs:{ story:'ストーリー', acq:'入手方法', unlockq:'開放クエスト', followq:'後続クエスト', comments:'コメント' },
    readMore:'全文を表示', readLess:'折りたたむ',
    story:`<div class="clamp" data-collapsed="true">
      <p>リトルソルセでの緊張が少しずつ緩和されつつある中、パパリモは新たな提案をする──外交ではなく、行動を通じてシルフ族の信頼を得るのだ。森を追われた彼らには、きっと様々な困難があるはず。だが、よそ者には簡単に心を開かない。だからこそ、シルフたちの悩みに詳しいグリダニア出身のイメディアに話を聞くよう勧められる。</p>
      <p>イメディアが語る現状は深刻だった。簡易な拠点であるリトルソルセには十分な防衛設備がなく、周辺から野獣たちが侵入しては住民を苦しめているという。特にジズ・ゴルリンやガル・ナットの被害が深刻で、これらの討伐と、希少な「ブラウニーブラッシュ」3本の採集を依頼される。それはシルフ文化において特別な意味を持つという。</p>
      <p>依頼を果たしたあなたは、再びコムシオのもとへ。最初は懐疑的だった彼だが、あなたの手にあるブラシと親切な行動により心が揺れる。親しみを持って接してくれる者など滅多にいないと語りながら、彼はこう思い始める──この歩く者なら、信じてもいいかもしれない。</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>クエスト発行</b> パパリモ <small class="muted">（黒衣森：東部森林 X:21.9, Y:25.6）</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="dance-dance-diplomacy.html">挨拶は軽快に</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="#">知らないヒト</a></div>
    </div>`
  },
  ZH:{
    langLabel:'ZH',
    pageTitle:'森林中同伴的煩憂',
    tabs:{ story:'故事概要', acq:'取得方式', unlockq:'解鎖任務', followq:'後續任務', comments:'留言' },
    readMore:'展開全文', readLess:'收合內容',
    story:`<div class="clamp" data-collapsed="true">
      <p>隨著與 Little Solace 的關係逐漸緩和，Papalymo 提出了一個嶄新的行動方案──不是靠言語，而是透過實際幫助，來爭取 sylph 們的信任。他指出，這些被迫離開森林的 sylph 必定面臨種種困苦，而直接詢問他們未必奏效。不如向熟悉情況的 Gridanian 居民 Imedia 諮詢。</p>
      <p>Imedia 熱切地說明當地情勢：作為臨時安置地，Little Solace 缺乏設施與防禦能力，導致野獸不時入侵，擾亂居民的生活。她請求你討伐危害最深的 ziz gorlin 和 gall gnat，並採集三株珍稀的「brownie brush」──這在 sylph 文化中具有特殊意義。</p>
      <p>完成任務後，你再度前往拜訪 Komuxio。他一如既往地保留戒心，表示信任並非輕易給予。但當你獻上三株 brownie brush，並分享自己討伐野獸的經歷時，他的語氣逐漸柔和。Komuxio 開始懷疑，或許自己一開始就錯了──這位 dancing one，與那些傷害他們的 walking one，是不同的。</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>任務發布</b> 帕帕里莫 <small class="muted">（黑衣森東部森林 X:21.9, Y:25.6）</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="dance-dance-diplomacy.html">輕快的外交之舞</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="#">潛伏的敵意</a></div>
    </div>`
  }
};

const langToggle  = document.getElementById('langToggle');
const pageTitle   = document.getElementById('pageTitle');
const tabBtns     = [...document.querySelectorAll('.tab-btn')];
const panels = {
  story:  document.getElementById('panel-story'),
  acq:    document.getElementById('panel-acq'),
  unlockq:document.getElementById('panel-unlockq'),
  followq:document.getElementById('panel-followq'),
  comments: document.getElementById('panel-comments')
};

function getLang(){ return localStorage.getItem(LANG_KEY) || 'EN'; }
function applyLang(lang){
  const t = i18n[lang] || i18n.EN;
  pageTitle.textContent = t.pageTitle;
  langToggle.textContent = `🌐 ${t.langLabel}`;
  tabBtns.forEach(btn => { btn.textContent = t.tabs[btn.dataset.tab]; });
  const activeBtn = tabBtns.find(b => b.getAttribute('aria-selected')==='true') || tabBtns[0];
  renderPanel(activeBtn.dataset.tab, lang);
}

function wireClamp(panelEl, t){
  const clamp = panelEl.querySelector('.clamp');
  const btn = panelEl.querySelector('[data-role="expand"]');
  if(!clamp || !btn) return;
  function setLabel(){
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    btn.textContent = collapsed ? t.readMore : t.readLess;
  }
  setLabel();
  btn.addEventListener('click', ()=>{
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    clamp.setAttribute('data-collapsed', collapsed ? 'false' : 'true');
    setLabel();
  });
}

function renderPanel(key, lang){
  const t = i18n[lang] || i18n.EN;
  Object.keys(panels).forEach(k => panels[k].classList.remove('active'));
  panels[key].classList.add('active');
  if (key !== 'comments') panels[key].innerHTML = t[key];
  if (key === 'story') wireClamp(panels[key], t);
  if (key === 'comments') loadGiscusForCurrentLang();
}

tabBtns.forEach(btn=>{
  btn.addEventListener('click', ()=>{
    tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
    btn.setAttribute('aria-selected','true');
    renderPanel(btn.dataset.tab, getLang());
  });
});

langToggle.addEventListener('click', ()=>{
  const cur = getLang();
  const next = cur==='EN' ? 'JP' : (cur==='JP' ? 'ZH' : 'EN');
  localStorage.setItem(LANG_KEY, next);
  applyLang(next);
});

applyLang(getLang());

/* === Giscus：Comments 分頁 === */
const GISCUS_CFG = {
  repo: 'BELAUG-FFXIV/FFXIV_Library',
  repoId: 'R_kgDOPyh4Kw',
  category: 'General',
  categoryId: 'DIC_kwDOPyh4K84CwPjL',
  theme: 'preferred_color_scheme'
};
function uiLang(code){ return code==='JP' ? 'ja' : (code==='ZH' ? 'zh-TW' : 'en'); }
function loadGiscusForCurrentLang(){
  const mount = document.getElementById('giscus_container');
  if (!mount) return;
  mount.innerHTML = '';
  const langCode = getLang();
  const s = document.createElement('script');
  s.src = 'https://giscus.app/client.js';
  s.setAttribute('data-repo', GISCUS_CFG.repo);
  s.setAttribute('data-repo-id', GISCUS_CFG.repoId);
  s.setAttribute('data-category', GISCUS_CFG.category);
  s.setAttribute('data-category-id', GISCUS_CFG.categoryId);
  s.setAttribute('data-mapping', 'specific');
  s.setAttribute('data-term', location.pathname + '｜' + langCode);
  s.setAttribute('data-reactions-enabled', '1');
  s.setAttribute('data-emit-metadata', '0');
  s.setAttribute('data-input-position', 'bottom');
  s.setAttribute('data-lang', uiLang(langCode));
  s.setAttribute('data-theme', GISCUS_CFG.theme);
  s.setAttribute('crossorigin', 'anonymous');
  s.async = true;
  mount.appendChild(s);
}
</script>
</body>
</html>
