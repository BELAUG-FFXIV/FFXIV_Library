<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Spirited Away | BELAUG Â· FFXIV Library</title>
  <meta name="description" content="MSQ â€“ Spirited Away (ARR Patch 2.0)">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root { --bg:#fff8e6; --card:#fff; --fg:#222; --muted:#666; --border:#e5e1d8; --accent:#e11d48; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif;background:var(--bg);color:var(--fg)}
    .container{max-width:1080px;margin:0 auto;padding:0 16px}
    .site-header{border-bottom:1px solid var(--border);background:#fff9edb3;backdrop-filter:saturate(120%) blur(6px);position:sticky;top:0;z-index:10}
    .nav{display:flex;align-items:center;justify-content:space-between;height:60px}
    .left{display:flex;align-items:center;gap:12px}
    .home{border:1px solid var(--border);background:#fff;padding:4px 8px;border-radius:8px;text-decoration:none;color:var(--fg);font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex;align-items:center;gap:8px}
    .icon-btn{background:none;border:none;cursor:pointer;font-size:14px;padding:6px 10px;border-radius:8px}
    .icon-btn:hover{background:#fff;border:1px solid var(--border)}
    .main{padding:20px 0 40px}
    .grid{display:grid;grid-template-columns:1.1fr 1fr;gap:20px;align-items:start}
    @media (max-width:900px){
      .grid{grid-template-columns:1fr}
      .video-wrap{position:relative;padding-top:56.25%}
      .video-wrap iframe{position:absolute;inset:0;width:100%;height:100%}
    }
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px;border-bottom:1px solid var(--border);font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%;height:420px;border:0;display:block;border-radius:16px}
    .tabs{display:flex;gap:8px;padding:12px 12px 0;flex-wrap:wrap}
    .tab-btn{background:#fff;border:1px solid var(--border);color:var(--fg);border-radius:999px;padding:8px 14px;cursor:pointer;font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent);color:#fff;background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex;flex-direction:column;gap:10px}
    .stack .row{padding:12px 14px;border:1px dashed var(--border);border-radius:12px;background:#fffdf6}
    .row b{display:inline-block;min-width:130px}
    .muted{color:var(--muted)}
    .link{color:#0b60d8;text-decoration:none}
    .link:hover{text-decoration:underline}

    /* å±•é–‹/æ”¶åˆ */
    .clamp{position:relative; max-height:360px; overflow:hidden}
    .clamp[data-collapsed="false"]{max-height:none}
    .clamp[data-collapsed="true"]::after{
      content:""; position:absolute; left:0; right:0; bottom:0; height:72px;
      background:linear-gradient(to bottom, rgba(255,255,255,0), var(--card)); pointer-events:none;
    }
    .expand-wrap{ margin-top:12px; }
    .expand-btn{
      display:inline-block; padding:8px 14px; border-radius:10px;
      background:var(--card); border:1px solid var(--border); cursor:pointer; font-weight:600;
    }
    .expand-btn:hover{ background:#fffef8; }
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">ğŸ  Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="åˆ‡æ›èªè¨€">ğŸŒ EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <!-- å·¦ï¼šå½±ç‰‡ -->
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/fKcwDsclhAk"
              title="Spirited Away" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- å³ï¼šæ¨™é¡Œ + Tabs -->
      <section class="card">
        <div class="hd" id="pageTitle">Spirited Away</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true"  data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Acquisition</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlockq">Unlock Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="followq">Follow-Up Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="comments">Comments</button>
        </div>
        <div class="bd">
          <div id="panel-story"   class="tab-panel active"></div>
          <div id="panel-acq"     class="tab-panel"></div>
          <div id="panel-unlockq" class="tab-panel"></div>
          <div id="panel-followq" class="tab-panel"></div>
          <div id="panel-comments" class="tab-panel">
            <div id="giscus_container" style="min-height:320px;"></div>
          </div>
        </div>
      </section>
    </div>
  </main>

<script>
const LANG_KEY = 'ffxiv-guide-lang';
const i18n = {
  EN:{
    langLabel:'EN',
    pageTitle:'Spirited Away',
    tabs:{ story:'Story', acq:'Acquisition', unlockq:'Unlock Quest', followq:'Follow-Up Quest', comments:'Comments' },
    readMore:'Show more', readLess:'Show less',
    story:`<div class="clamp" data-collapsed="true">
      <p>Komuxio greets you with uncharacteristic hesitation. He lowers his head and apologizes, confessing that he can no longer keep his promise to take you to meet the elder one. The elder has vanishedâ€”he entered the forest yesterday and has not returned since. Though the elder often wanders beneath the trees, never has he been gone for so long. Worry weighs heavily in Komuxioâ€™s voice as he pleads for your help.</p>
      <p>He explains that near the place where the elder disappeared stands the home of a walking one named Buscarron. Perhaps Buscarron saw something, yet Komuxio admits that walking ones seldom trust his people. And so, he entrusts this delicate task to you. Before you depart, he asks that you also seek help from your kin in Gridaniaâ€”for until the elder returns, none of his people will feel safe in the forest.</p>
      <p>Back in Gridania, Vorsaile Heuloix greets you as the sylphsâ€™ envoy, his tone warm until your words turn grave. The moment you mention the missing elder, his expression hardens. Should the elder fall into the hands of the tempered ones, he warns, it would spell disaster. He vows that his sharpest-eyed Serpents will search the Twelveswood night and day, and sends you to Bentbranch Meadows to deliver word to Giah Molkohâ€”the Wood Wailers will join the hunt.</p>
      <p>When you find Giah Molkoh, she listens with calm resolve. The sylph elder has vanished? Then she and her people will watch under every leaf, behind every branchâ€”if the elder is anywhere in the forest, they will find him.</p>
      <p>Later, in the South Shroud, you pause outside Buscarronâ€™s alehouse. Yda remarks that Buscarron is a trusted friend and that no place in the region carries news faster than his. Papalymo, ever cautious, wonders what would bring a sylph elder to a place their kind usually avoids. Still, the question of motive must waitâ€”finding him comes first.</p>
      <p>Inside, Buscarron greets you with his usual warmth, a tankard in hand and laughter on his lips. When he realizes youâ€™re not there for drink or meal, his smile softens. A sylph sighting, you say? Aye, thereâ€™s been talk of one wandering nearbyâ€”but he cannot say if itâ€™s the elder you seek. To most folk, the sylphs all look alike, he jokes, unless you paint one red and another blue. Then, with a wink, he adds that fate has a curious way of revealing answers when one simply lingers long enough to listen.</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>Quest Giver</b> Komuxio, East Shroud <small class="muted">(X:21.9, Y:25.6)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="brotherly-love.html">Brotherly Love</a></div>
    </div>`,
    followq:`<div class="stack">
  <div class="row"><a class="link" href="druthers-house-rules.html">Druthers House Rules</a></div>
</div>`
  },
  JP:{
    langLabel:'JP',
    pageTitle:'ãŸã ã‚ˆãˆã‚‹é•·è€',
    tabs:{ story:'ã‚¹ãƒˆãƒ¼ãƒªãƒ¼', acq:'å…¥æ‰‹æ–¹æ³•', unlockq:'é–‹æ”¾ã‚¯ã‚¨ã‚¹ãƒˆ', followq:'å¾Œç¶šã‚¯ã‚¨ã‚¹ãƒˆ', comments:'ã‚³ãƒ¡ãƒ³ãƒˆ' },
    readMore:'å…¨æ–‡ã‚’è¡¨ç¤º', readLess:'æŠ˜ã‚ŠãŸãŸã‚€',
    story:`<div class="clamp" data-collapsed="true">
      <p>ã‚³ãƒ ã‚¯ã‚·ã‚ªã¯çã—ããŸã‚ã‚‰ã„ã‚’è¦‹ã›ãªãŒã‚‰ã€ã‚ãªãŸã‚’è¿ãˆãŸã€‚å½¼ã¯æ·±ãé ­ã‚’ä¸‹ã’ã€ç”³ã—è¨³ãªã•ãã†ã«èªã‚‹ã€‚ã‚ãªãŸã‚’ elder one ã«ä¼šã‚ã›ã‚‹ã¨ç´„æŸã—ã¦ã„ãŸãŒã€ãã®ç´„æŸã‚’æœãŸã›ãªããªã£ãŸã®ã ã€‚elder ã¯æ˜¨æ—¥ã€æ£®ã«å…¥ã£ãŸãã‚Šæˆ»ã£ã¦ã„ãªã„ã€‚ã“ã‚Œã¾ã§ã‚‚æ£®ã«å‡ºã‚‹ã“ã¨ã¯ã‚ã£ãŸãŒã€ã“ã‚Œã»ã©é•·ãå§¿ã‚’æ¶ˆã—ãŸã“ã¨ã¯ãªã‹ã£ãŸã€‚å£°ã«æ»²ã‚€ä¸å®‰ã‚’æŠ‘ãˆãã‚Œãšã€å½¼ã¯ã‚ãªãŸã«åŠ©ã‘ã‚’æ±‚ã‚ãŸã€‚</p>
      <p>æœ€å¾Œã« elder ãŒç›®æ’ƒã•ã‚ŒãŸã®ã¯ã€Buscarron ã¨ã„ã† walking one ã®å®¶ã®è¿‘ãã ã¨ã„ã†ã€‚ã‚‚ã—ã‹ã™ã‚‹ã¨ã€å½¼ãªã‚‰ä½•ã‹ã‚’çŸ¥ã£ã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã€‚ã—ã‹ã—ã€ã‚³ãƒ ã‚¯ã‚·ã‚ªã¯ç¶šã‘ã¦è¨€ã†â”€â”€walking ones ã¯ these ones ã‚’ç°¡å˜ã«ã¯ä¿¡ç”¨ã—ã¦ãã‚Œãªã„ã€‚ã ã‹ã‚‰ã“ãã€ã‚ãªãŸã«ä»£ã‚ã‚Šã«è©±ã‚’ã—ã¦ã»ã—ã„ã¨é ¼ã‚“ã ã€‚ãã—ã¦å‡ºç™ºå‰ã«ã€Gridania ã«ã„ã‚‹ä»²é–“ãŸã¡ã«ã‚‚åŠ©ã‘ã‚’æ±‚ã‚ã¦ã»ã—ã„ã¨æ‡‡é¡˜ã™ã‚‹ã€‚elder ãŒæˆ»ã‚‰ã¬é™ã‚Šã€æ£®ã«æš®ã‚‰ã™å½¼ã‚‰ã«å®‰æ¯ã¯ãªã„ã®ã ã€‚</p>
      <p>Gridania ã«æˆ»ã‚‹ã¨ã€Vorsaile Heuloix ã¯ã‚ãªãŸã‚’ã‚·ãƒ«ãƒ•æ—ã®ä½¿è€…ã¨ã—ã¦æ­“è¿ã—ãŸã€‚ã ãŒã€ã‚ãªãŸã®å ±å‘Šã‚’èãã¨è¡¨æƒ…ãŒä¸€å¤‰ã™ã‚‹ã€‚elder ãŒè¡Œæ–¹ä¸æ˜ï¼Ÿ ã‚‚ã— touched ones ã«æ•ã‚‰ã‚ã‚Œã§ã‚‚ã—ãŸã‚‰ã€ä¸€å¤§äº‹ã ã€‚å½¼ã¯é‹­ã„ç›®ã‚’æŒã¤ Serpent ãŸã¡ã«æ£®ã‚’æ˜¼å¤œè¦‹å¼µã‚‰ã›ã‚‹ã¨èª“ã„ã€ã•ã‚‰ã« Bentbranch Meadows ã«ã„ã‚‹ Giah Molkoh ã¸çŸ¥ã‚‰ã›ã‚’å±Šã‘ã¦ã»ã—ã„ã¨è¨—ã—ãŸã€‚Wood Wailers ã‚‚æœç´¢ã«åŠ ã‚ã‚‹ã®ã ã¨ã„ã†ã€‚</p>
      <p>Giah Molkoh ã¯å ±å‘Šã‚’èãã¨ã€è½ã¡ç€ã„ãŸå£°ã§é ·ã„ãŸã€‚elder ãŒå§¿ã‚’æ¶ˆã—ãŸã®ãªã‚‰ã€è‘‰ã®ä¸‹ã‚‚æã®å½±ã‚‚ã€æ£®ã®ã™ã¹ã¦ã‚’è¦‹å¼µã‚‹ã¤ã‚‚ã‚Šã ã¨ã€‚Twleveswood ã®ã©ã“ã‹ã«ã„ã‚‹ã®ãªã‚‰ã€å¿…ãšè¦‹ã¤ã‘å‡ºã™ã¨åŠ›å¼·ãè¨€ã„åˆ‡ã£ãŸã€‚</p>
      <p>ã‚„ãŒã¦ã‚ãªãŸã¯ South Shroud ã«ã‚ã‚‹ Buscarron ã®é…’å ´ã«ãŸã©ã‚Šç€ãã€‚å¤–ã§è¶³ã‚’æ­¢ã‚ã‚‹ã¨ã€Yda ãŒã€ŒBuscarron ã¯ä¿¡é ¼ã§ãã‚‹å‹äººã§ã€ã“ã®åœ°ã®å™‚ã¯ã™ã¹ã¦å½¼ã®åº—ã‚’é€šã‚‹ã€ã¨å¾®ç¬‘ã‚€ã€‚ã ãŒ Papalymo ã¯æ…é‡ã«çœ‰ã‚’ã²ãã‚ãŸã€‚ã‚·ãƒ«ãƒ•ãŸã¡ãŒæ»…å¤šã«è¿‘ã¥ã‹ã¬ã“ã®å ´æ‰€ã«ã€elder ãŒæ¥ãŸç†ç”±ã¯ä½•ã ã‚ã†ã‹ï¼Ÿ ã¨ã¯ã„ãˆä»Šã¯ç†ç”±ã‚’å•ã†æ™‚ã§ã¯ãªã„ã€‚ã¾ãšè¦‹ã¤ã‘ã‚‹ã“ã¨ãŒå…ˆã ã€ã¨å½¼ã¯è¨€ã„åˆ‡ã‚‹ã€‚</p>
      <p>åº—ã®ä¸­ã§ Buscarron ã¯ã„ã¤ã‚‚ã®ã‚ˆã†ã«é™½æ°—ã«ã‚ãªãŸã‚’è¿ãˆã‚‹ã€‚ã ãŒã€ã‚ãªãŸãŒé£²ã¿ã«æ¥ãŸã®ã§ã¯ãªã„ã¨çŸ¥ã‚‹ã¨ã€ç¬‘ã¿ã‚’å’Œã‚‰ã’ãŸã€‚ã‚·ãƒ«ãƒ•ã‚’è¦‹ã‹ã‘ãŸã¨ã„ã†è©±ãªã‚‰ã€ç¢ºã‹ã«èã„ãŸã“ã¨ãŒã‚ã‚‹ãŒã€ãã‚ŒãŒ elder ã‹ã©ã†ã‹ã¯åˆ†ã‹ã‚‰ãªã„ã€‚ã©ã®ã‚·ãƒ«ãƒ•ã‚‚è¦‹ãŸç›®ã¯ã‚ˆãä¼¼ã¦ãŠã‚Šã€èµ¤ã¨é’ã«ã§ã‚‚å¡—ã‚‰ã­ã°è¦‹åˆ†ã‘ã¯ã¤ã‹ãªã„ã ã‚ã†ã¨å†—è«‡ã‚’è¨€ã„ãªãŒã‚‰è‚©ã‚’ã™ãã‚ã‚‹ã€‚ ãã‚Œã§ã‚‚ã€Œç¥ã€…ã®æ°—ã¾ãã‚Œã«ä»»ã›ã¦ã€ã—ã°ã‚‰ãã“ã“ã§æ§˜å­ã‚’è¦‹ã¦ã¿ã‚‹ã®ã‚‚æ‚ªããªã„ã€ã¨ã€å½¼ã¯è»½ãã‚¦ã‚£ãƒ³ã‚¯ã—ãŸã€‚</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>ã‚¯ã‚¨ã‚¹ãƒˆç™ºè¡Œ</b> ã‚³ãƒ ã‚·ã‚ªã€€é»’è¡£æ£®ï¼šæ±éƒ¨æ£®æ— <small class="muted">(X:21.9, Y:25.6)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="brotherly-love.html">ã‚¯ãƒ©ã‚¯ã‚·ã‚ªã®æ±ºæ„</a></div>
    </div>`,
    followq:`<div class="stack">
  <div class="row"><a class="link" href="druthers-house-rules.html">ãƒã‚¹ã‚«ãƒ­ãƒ³ãƒ‰ãƒ©ã‚¶ãƒ¼ã‚ºã®æŸ</a></div>
</div>`
  },
  ZH:{
    langLabel:'ZH',
    pageTitle:'è¿·é€”çš„é•·è€',
    tabs:{ story:'æ•…äº‹æ¦‚è¦', acq:'å–å¾—æ–¹å¼', unlockq:'è§£é–ä»»å‹™', followq:'å¾ŒçºŒä»»å‹™', comments:'ç•™è¨€' },
    readMore:'å±•é–‹å…¨æ–‡', readLess:'æ”¶åˆå…§å®¹',
    story:`<div class="clamp" data-collapsed="true">
      <p>ç•¶ä½ å›åˆ° Little Solace æ™‚ï¼ŒKomuxio ä»¥å¾€é‚£ä»½ç©©é‡çš„ç¥æƒ…å·²ä¸å¾©å­˜åœ¨ã€‚ä»–å£“ä½èº«å­ï¼Œæ»¿æ‡·æ­‰æ„åœ°å‘Šè¨´ä½ ï¼ŒåŸæœ¬è¦å¸¶ä½ å»è¦‹çš„ elder one å¤±è¹¤äº†ã€‚æ˜¨å¤©ä»–å¦‚å¾€å¸¸ä¸€èˆ¬é€²å…¥æ£®æ—ï¼Œå»å†ä¹Ÿæ²’æœ‰å›ä¾†ã€‚é›–ç„¶ elder å¸¸åœ¨æ—ä¸­è¡Œèµ°ï¼Œä½†é€™æ¬¡çš„æ¶ˆå¤±å¤ªé•·ï¼Œè®“ä¸å®‰çš„æ°£æ¯åœ¨ç©ºæ°£è£¡è”“å»¶ã€‚Komuxio çš„è²éŸ³é¡«æŠ–è€Œèª æ‡‡ï¼Œæ‡‡æ±‚ä½ å¹«å¿™å°‹æ‰¾ã€‚</p>
      <p>ä»–èªªï¼Œelder æœ€å¾Œå‡ºç¾çš„åœ°é»åœ¨ä¸€ä½åå« Buscarron çš„ walking one å®¶é™„è¿‘ã€‚æˆ–è¨±é‚£è£¡èƒ½æ‰¾åˆ°ç·šç´¢ï¼Œä½† Komuxio è‡ªçŸ¥ walking ones å‘ä¾†ä¸æ˜“ä¿¡ä»» these onesï¼Œå› æ­¤åªèƒ½å°‡å¸Œæœ›è¨—ä»˜çµ¦ä½ ã€‚è‡¨è¡Œå‰ï¼Œä»–åˆæƒ³èµ· Gridaniaâ”€â”€è«‹ä½ å›å»å°‹æ±‚ fellow kind ones çš„æ´æ‰‹ã€‚ç›´åˆ° elder å¹³å®‰æ­¸ä¾†ä¹‹å‰ï¼Œé€™ç‰‡æ£®æ—éƒ½é›£å†å®‰å¯§ã€‚</p>
      <p>å›åˆ° Gridaniaï¼ŒVorsaile Heuloix ä»¥å¤–äº¤ä½¿è€…çš„èº«åˆ†è¿æ¥ä½ ï¼Œèªæ°£ä¸€å¦‚æ—¢å¾€åœ°æº«å’Œã€‚ç„¶è€Œç•¶è½åˆ° elder å¤±è¹¤çš„æ¶ˆæ¯ï¼Œä»–çš„ç¥æƒ…ç¬é–“æ²‰ä¸‹ä¾†ã€‚ä»–èªªï¼Œè‹¥ elder è½å…¥ touched ones ä¹‹æ‰‹ï¼Œå¾Œæœå°‡ä¸å ªè¨­æƒ³ã€‚æ–¼æ˜¯ä»–æ‰¿è«¾æœƒæ´¾å‡ºæœ€è­¦è¦ºçš„ Serpentsï¼Œåœ¨ Twelveswood æ˜¼å¤œæœæŸ¥ï¼Œä¸¦è«‹ä½ å‰å¾€ Bentbranch Meadows é€šçŸ¥ Giah Molkohâ”€â”€Wood Wailers å°‡æœƒåƒèˆ‡é€™å ´æœæ•‘ã€‚</p>
      <p>ä½ å°‡æ¶ˆæ¯è½‰é”å¾Œï¼ŒGiah Molkoh ç›®å…‰å …å®šåœ°å›æ‡‰ã€‚è‹¥ elder ä»åœ¨é€™ç‰‡æ£®æ—ï¼Œå¥¹èªªï¼Œç„¡è«–æ¨¹è‘‰ä¹‹ä¸‹é‚„æ˜¯æå¹¹ä¹‹å¾Œï¼ŒWood Wailers çš„çœ¼ç›éƒ½ä¸æœƒéŒ¯éã€‚</p>
      <p>ç¨å¾Œï¼Œåœ¨ South Shroud çš„é…’é¤¨å¤–ï¼Œä½ èˆ‡ Yda å’Œ Papalymo åŒ¯åˆã€‚Yda è¼•è²èªªï¼ŒBuscarron æ˜¯å€¼å¾—ä¿¡ä»»çš„æœ‹å‹ï¼Œåœ¨é€™ç‰‡åœŸåœ°ä¸Šï¼Œæ²’æœ‰å“ªè£¡æ¯”ä»–çš„åº—æ›´å¿«å‚³å‡ºæ¶ˆæ¯ã€‚Papalymo å»è‹¥æœ‰æ‰€æ€â”€â”€Sylph å¹³æ—¥é¿é–‹é€™ä¸€å¸¶ï¼Œelder ç‚ºä½•æœƒä¾†ï¼Ÿä½†ä»–æœ€çµ‚æ–é ­é“ï¼šã€Œç†ç”±ä¹‹å¾Œå†æŸ¥ï¼Œç¾åœ¨æœ€é‡è¦çš„æ˜¯æŠŠä»–æ‰¾å›ä¾†ã€‚ã€</p>
      <p>ä½ æ¨é–€èµ°å…¥é…’é¤¨ã€‚Buscarron é¢å¸¶ç¬‘å®¹è¿æ¥ä½ ï¼Œé…’é¦™æ··é›œè‘—æœ¨æ¡¶çš„æ°£æ¯ã€‚ç•¶ä»–å¯Ÿè¦ºä½ ä¸æ˜¯ä¾†å–é…’çš„ï¼Œä»–æ”¶æ–‚ç¬‘æ„ï¼Œä»”ç´°è½ä½ è©¢å•ã€‚çš„ç¢ºï¼Œæœ€è¿‘æœ‰äººåœ¨é€™è£¡è¦‹é Sylphï¼Œä½†ä»–ç„¡æ³•ç¢ºå®šé‚£æ˜¯ä¸æ˜¯ elderã€‚å°å¤§å¤šæ•¸äººä¾†èªªï¼ŒSylph å¹¾ä¹éƒ½é•·å¾—ä¸€æ¨£â”€â”€é™¤éçµ¦ä»–å€‘åˆ†åˆ¥å¡—ä¸Šç´…èˆ‡è—ã€‚è©±ç•¢ï¼Œä»–è¼•æ‹ä½ çš„è‚©ï¼Œç¬‘è‘—èªªï¼Œä¹Ÿè¨±åªè¦å¤šå¾…ä¸€æœƒå…’ï¼Œå‘½é‹å¥³ç¥å°±æœƒè®“ç­”æ¡ˆè‡ªå·±å‡ºç¾åœ¨ä½ é¢å‰ã€‚</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>ä»»å‹™ç™¼å¸ƒ</b> æŸ¯å§†ä¿®æ­ã€€é»‘è¡£æ£®æ±éƒ¨æ£®æ— <small class="muted">(X:21.9, Y:25.6)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="brotherly-love.html">æ‰‹è¶³çš„ç¾ˆçµ†</a></div>
    </div>`,
    followq:`<div class="stack">
  <div class="row"><a class="link" href="druthers-house-rules.html">é…’é¤¨çš„è¡Œè¦</a></div>
</div>`
  }
};

const langToggle  = document.getElementById('langToggle');
const pageTitle   = document.getElementById('pageTitle');
const tabBtns     = [...document.querySelectorAll('.tab-btn')];
const panels = {
  story:  document.getElementById('panel-story'),
  acq:    document.getElementById('panel-acq'),
  unlockq:document.getElementById('panel-unlockq'),
  followq:document.getElementById('panel-followq'),
  comments: document.getElementById('panel-comments')
};

function getLang(){ return localStorage.getItem(LANG_KEY) || 'EN'; }
function applyLang(lang){
  const t = i18n[lang] || i18n.EN;
  pageTitle.textContent = t.pageTitle;
  langToggle.textContent = `ğŸŒ ${t.langLabel}`;
  tabBtns.forEach(btn => { btn.textContent = t.tabs[btn.dataset.tab]; });
  const activeBtn = tabBtns.find(b => b.getAttribute('aria-selected')==='true') || tabBtns[0];
  renderPanel(activeBtn.dataset.tab, lang);
}

function wireClamp(panelEl, t){
  const clamp = panelEl.querySelector('.clamp');
  const btn = panelEl.querySelector('[data-role="expand"]');
  if(!clamp || !btn) return;
  function setLabel(){
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    btn.textContent = collapsed ? t.readMore : t.readLess;
  }
  setLabel();
  btn.addEventListener('click', ()=>{
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    clamp.setAttribute('data-collapsed', collapsed ? 'false' : 'true');
    setLabel();
  });
}

function renderPanel(key, lang){
  const t = i18n[lang] || i18n.EN;
  Object.keys(panels).forEach(k => panels[k].classList.remove('active'));
  panels[key].classList.add('active');
  if (key !== 'comments') panels[key].innerHTML = t[key];
  if (key === 'story') wireClamp(panels[key], t);
  if (key === 'comments') loadGiscusForCurrentLang();
}

tabBtns.forEach(btn=>{
  btn.addEventListener('click', ()=>{
    tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
    btn.setAttribute('aria-selected','true');
    renderPanel(btn.dataset.tab, getLang());
  });
});

langToggle.addEventListener('click', ()=>{
  const cur = getLang();
  const next = cur==='EN' ? 'JP' : (cur==='JP' ? 'ZH' : 'EN');
  localStorage.setItem(LANG_KEY, next);
  applyLang(next);
});

applyLang(getLang());

/* === Giscusï¼šComments åˆ†é  === */
const GISCUS_CFG = {
  repo: 'BELAUG-FFXIV/FFXIV_Library',
  repoId: 'R_kgDOPyh4Kw',
  category: 'General',
  categoryId: 'DIC_kwDOPyh4K84CwPjL',
  theme: 'preferred_color_scheme'
};
function uiLang(code){ return code==='JP' ? 'ja' : (code==='ZH' ? 'zh-TW' : 'en'); }
function loadGiscusForCurrentLang(){
  const mount = document.getElementById('giscus_container');
  if (!mount) return;
  mount.innerHTML = '';
  const langCode = getLang();
  const s = document.createElement('script');
  s.src = 'https://giscus.app/client.js';
  s.setAttribute('data-repo', GISCUS_CFG.repo);
  s.setAttribute('data-repo-id', GISCUS_CFG.repoId);
  s.setAttribute('data-category', GISCUS_CFG.category);
  s.setAttribute('data-category-id', GISCUS_CFG.categoryId);
  s.setAttribute('data-mapping', 'specific');
  s.setAttribute('data-term', location.pathname + 'ï½œ' + langCode);
  s.setAttribute('data-reactions-enabled', '1');
  s.setAttribute('data-emit-metadata', '0');
  s.setAttribute('data-input-position', 'bottom');
  s.setAttribute('data-lang', uiLang(langCode));
  s.setAttribute('data-theme', GISCUS_CFG.theme);
  s.setAttribute('crossorigin', 'anonymous');
  s.async = true;
  mount.appendChild(s);
}
</script>
</body>
</html>
