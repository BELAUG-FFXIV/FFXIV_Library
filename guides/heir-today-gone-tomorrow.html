<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Heir Today, Gone Tomorrow | BELAUG · FFXIV Library</title>
  <meta name="description" content="MSQ – Heir Today, Gone Tomorrow (ARR Patch 2.0)">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root { --bg:#fff8e6; --card:#fff; --fg:#222; --muted:#666; --border:#e5e1d8; --accent:#e11d48; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif;background:var(--bg);color:var(--fg)}
    .container{max-width:1080px;margin:0 auto;padding:0 16px}
    .site-header{border-bottom:1px solid var(--border);background:#fff9edb3;backdrop-filter:saturate(120%) blur(6px);position:sticky;top:0;z-index:10}
    .nav{display:flex;align-items:center;justify-content:space-between;height:60px}
    .left{display:flex;align-items:center;gap:12px}
    .home{border:1px solid var(--border);background:#fff;padding:4px 8px;border-radius:8px;text-decoration:none;color:var(--fg);font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex;align-items:center;gap:8px}
    .icon-btn{background:none;border:none;cursor:pointer;font-size:14px;padding:6px 10px;border-radius:8px}
    .icon-btn:hover{background:#fff;border:1px solid var(--border)}
    .main{padding:20px 0 40px}
    .grid{display:grid;grid-template-columns:1.1fr 1fr;gap:20px;align-items:start}
    @media (max-width:900px){
      .grid{grid-template-columns:1fr}
      .video-wrap{position:relative;padding-top:56.25%}
      .video-wrap iframe{position:absolute;inset:0;width:100%;height:100%}
    }
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px;border-bottom:1px solid var(--border);font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%;height:420px;border:0;display:block;border-radius:16px}
    .tabs{display:flex;gap:8px;padding:12px 12px 0;flex-wrap:wrap}
    .tab-btn{background:#fff;border:1px solid var(--border);color:#222;border-radius:999px;padding:8px 14px;cursor:pointer;font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent);color:#fff;background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex;flex-direction:column;gap:10px}
    .stack .row{padding:12px 14px;border:1px dashed var(--border);border-radius:12px;background:#fffdf6}
    .row b{display:inline-block;min-width:130px}
    .muted{color:var(--muted)}
    .link{color:#0b60d8;text-decoration:none}
    .link:hover{text-decoration:underline}

    /* 長文自動收合（若內文過長） */
    .story-collapsible{position:relative;max-height:380px;overflow:hidden}
    .story-collapsible::after{
      content:"";position:absolute;inset:auto 0 0 0;height:72px;
      background:linear-gradient(to bottom, rgba(255,248,230,0), var(--card));
    }
    .story-toggle{display:inline-block;margin-top:10px;padding:8px 14px;border:1px solid var(--border);
      border-radius:999px;background:#fff;cursor:pointer;font-weight:600}
    .story-expanded{max-height:none}
    .story-expanded::after{display:none}
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">🏠 Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="切換語言">🌐 EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <!-- 左：影片 -->
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/uur3MG-Iy5s"
              title="Heir Today, Gone Tomorrow" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- 右：標題 + Tabs -->
      <section class="card">
        <div class="hd" id="pageTitle">Heir Today, Gone Tomorrow</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true"  data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Acquisition</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlockq">Unlock Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="followq">Follow-Up Quest</button>
        </div>
        <div class="bd">
          <div id="panel-story"   class="tab-panel active"></div>
          <div id="panel-acq"     class="tab-panel"></div>
          <div id="panel-unlockq" class="tab-panel"></div>
          <div id="panel-followq" class="tab-panel"></div>
        </div>
      </section>
    </div>
  </main>

<script>
const LANG_KEY = 'ffxiv-guide-lang';
const i18n = {
  EN:{
    langLabel:'EN',
    pageTitle:"Heir Today, Gone Tomorrow",
    tabs:{ story:'Story', acq:'Acquisition', unlockq:'Unlock Quest', followq:'Follow-Up Quest' },
    story:`<p>Leofric tries to send you away again, but when you insist, he relents. There’s something you can do—something he himself cannot. South of Lost Hope, a band of outlaws has taken over the Quiveron Manse. Their leader falsely claims to be heir to a fallen Syndicate member, exploiting the name to rob the helpless.</p>
<p>Leofric’s hands are tied. If he acts, retaliation will fall on the refugees. But you’re still a stranger to the bandits—a ghost without a name. He gives you one task: eliminate the baron.</p>
<p>You infiltrate the ruined estate and face down the scoundrels. When it’s over, you return. Leofric doesn’t celebrate. He only spits bitter truths: Ul’dah may glitter, but none of it reaches places like Lost Hope. He once believed in honor and duty—until he refused to be part of the farce. Now, his time is over. But yours may just be beginning.</p>`,
    acq:`<div class="stack">
      <div class="row"><b>Quest Giver</b> Leofric <small class="muted">(Central Thanalan, X: 23.3, Y: 16.0)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="last-letter-to-lost-hope.html">Last Letter to Lost Hope</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="passing-the-blade.html">Passing the Blade</a></div>
    </div>`
  },
  JP:{
    langLabel:'JP',
    pageTitle:'その男、サー・キヴロン',
    tabs:{ story:'ストーリー', acq:'入手方法', unlockq:'開放クエスト', followq:'後続クエスト' },
    story:`<p>レオフリックは再び立ち去るよう促すが、あなたの強い意思に押され、ついに口を開く。彼にはできず、あなただからこそできることがあるのだという。ロストホープの南、クイヴェロン屋敷には盗賊団が巣くっており、その頭目は、カラミティで死んだシンジケート議員の後継者を自称している。</p>
<p>彼らは名を語り、難民たちからわずかな所持品さえ奪っていく。だが、レオフリックは動けない。顔が知られている彼が動けば、報復の矛先はロストホープに向かう。だが、あなたは違う。名も顔も知られていない存在──影だ。</p>
<p>あなたは屋敷へ向かい、無法者たちを討伐する。戻ったあなたに、レオフリックは感謝も歓喜も見せない。ただ、現実を語る。「ウルダハの繁栄」は表面だけのもの。小さき者たちは置き去りにされたまま。彼は「茶番」に加わるのを拒んだ──それが彼の終わりだった。だが、あなたの物語は、まだ始まったばかりだ。</p>`,
    acq:`<div class="stack">
      <div class="row"><b>クエスト発行</b> レオフリック <small class="muted">（中央ザナラーン, X: 23.3, Y: 16.0）</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="last-letter-to-lost-hope.html">貧民街の連隊長</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="passing-the-blade.html">受け継がれる護身刀</a></div>
    </div>`
  },
  ZH:{
    langLabel:'ZH',
    pageTitle:'繼承人轉瞬即逝',
    tabs:{ story:'故事概要', acq:'取得方式', unlockq:'解鎖任務', followq:'後續任務' },
    story:`<p>Leofric 再次要你離開，但你堅持留下。他嘆了口氣，終於低聲說出實情：在 Lost Hope 南邊的 Quiveron Manse，有一群盜賊盤踞。他們的首領自稱是已故 Syndicate 成員 Eolande Quiveron 的繼承人，假藉這個名號掠奪難民，無人能管。</p>
<p>Leofric 明白自己若親自出面，只會讓盜賊報復難民。他的臉太容易被認出。而你，是無名的影子，是陌生人。他託付你一件事：替 Lost Hope 解決這場壓迫。</p>
<p>你潛入那座廢墟，親手終結了那群惡徒。回到 Lost Hope，Leofric 並沒有慶賀。他只道出冰冷事實：Ul’dah 或許看似繁榮，但那不屬於底層百姓。他曾相信榮譽與使命，卻因拒絕「扮演角色」而被排除。他的時代結束了。而你的責任，才正開始。</p>`,
    acq:`<div class="stack">
      <div class="row"><b>任務發布</b> Leofric <small class="muted">（薩納蘭中部, X: 23.3, Y: 16.0）</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="last-letter-to-lost-hope.html">給無望鎮的最後一封信</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="passing-the-blade.html">傳承之刃</a></div>
    </div>`
  }
};

const langToggle  = document.getElementById('langToggle');
const pageTitle   = document.getElementById('pageTitle');
const tabBtns     = [...document.querySelectorAll('.tab-btn')];
const panels = {
  story:  document.getElementById('panel-story'),
  acq:    document.getElementById('panel-acq'),
  unlockq:document.getElementById('panel-unlockq'),
  followq:document.getElementById('panel-followq')
};

function getLang(){ return localStorage.getItem(LANG_KEY) || 'EN'; }
function applyLang(lang){
  const t = i18n[lang] || i18n.EN;
  pageTitle.textContent = t.pageTitle;
  langToggle.textContent = `🌐 ${t.langLabel}`;
  tabBtns.forEach(btn => { btn.textContent = t.tabs[btn.dataset.tab]; });
  const activeBtn = tabBtns.find(b => b.getAttribute('aria-selected')==='true') || tabBtns[0];
  renderPanel(activeBtn.dataset.tab, lang);
}
function renderPanel(key, lang){
  const t = i18n[lang] || i18n.EN;
  Object.keys(panels).forEach(k => panels[k].classList.remove('active'));
  panels[key].classList.add('active');
  panels[key].innerHTML = t[key];
}
tabBtns.forEach(btn=>{
  btn.addEventListener('click', ()=>{
    tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
    btn.setAttribute('aria-selected','true');
    renderPanel(btn.dataset.tab, getLang());
  });
});
langToggle.addEventListener('click', ()=>{
  const cur = getLang();
  const next = cur==='EN' ? 'JP' : (cur==='JP' ? 'ZH' : 'EN');
  localStorage.setItem(LANG_KEY, next);
  applyLang(next);
});

/* —— 長文自動收合（依字數自動出現） —— */
const readMoreLabels = {
  EN: {more:'Read more', less:'Show less'},
  JP: {more:'続きを読む',   less:'折りたたむ'},
  ZH: {more:'展開全文',     less:'收合內容'}
};
function makeStoryCollapsible(lang){
  const panel = document.getElementById('panel-story');
  if(!panel) return;
  const textLen = panel.textContent.trim().length;
  if(textLen < 800) return;
  const inner = panel.innerHTML.trim();
  const wrap = document.createElement('div');
  wrap.className = 'story-collapsible';
  wrap.innerHTML = inner;
  const btn = document.createElement('button');
  const L = readMoreLabels[lang] || readMoreLabels.EN;
  btn.className = 'story-toggle';
  btn.textContent = L.more;
  btn.addEventListener('click', ()=>{
    const on = wrap.classList.toggle('story-expanded');
    btn.textContent = on ? L.less : L.more;
  });
  panel.innerHTML = '';
  panel.appendChild(wrap);
  panel.appendChild(btn);
}
/* 掛鉤 renderPanel：切到 Story 時套用收合 */
const _origRenderPanel = renderPanel;
renderPanel = function(key, lang){
  _origRenderPanel(key, lang);
  if(key==='story') makeStoryCollapsible(lang);
};

applyLang(getLang());
</script>
</body>
</html>
