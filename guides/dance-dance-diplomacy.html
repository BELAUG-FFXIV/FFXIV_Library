<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dance Dance Diplomacy | BELAUG Â· FFXIV Library</title>
  <meta name="description" content="MSQ â€“ Dance Dance Diplomacy (ARR Patch 2.0)">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root { --bg:#fff8e6; --card:#fff; --fg:#222; --muted:#666; --border:#e5e1d8; --accent:#e11d48; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif;background:var(--bg);color:var(--fg)}
    .container{max-width:1080px;margin:0 auto;padding:0 16px}
    .site-header{border-bottom:1px solid var(--border);background:#fff9edb3;backdrop-filter:saturate(120%) blur(6px);position:sticky;top:0;z-index:10}
    .nav{display:flex;align-items:center;justify-content:space-between;height:60px}
    .left{display:flex;align-items:center;gap:12px}
    .home{border:1px solid var(--border);background:#fff;padding:4px 8px;border-radius:8px;text-decoration:none;color:var(--fg);font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex;align-items:center;gap:8px}
    .icon-btn{background:none;border:none;cursor:pointer;font-size:14px;padding:6px 10px;border-radius:8px}
    .icon-btn:hover{background:#fff;border:1px solid var(--border)}
    .main{padding:20px 0 40px}
    .grid{display:grid;grid-template-columns:1.1fr 1fr;gap:20px;align-items:start}
    @media (max-width:900px){
      .grid{grid-template-columns:1fr}
      .video-wrap{position:relative;padding-top:56.25%}
      .video-wrap iframe{position:absolute;inset:0;width:100%;height:100%}
    }
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px;border-bottom:1px solid var(--border);font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%;height:420px;border:0;display:block;border-radius:16px}
    .tabs{display:flex;gap:8px;padding:12px 12px 0;flex-wrap:wrap}
    .tab-btn{background:#fff;border:1px solid var(--border);color:var(--fg);border-radius:999px;padding:8px 14px;cursor:pointer;font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent);color:#fff;background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex;flex-direction:column;gap:10px}
    .stack .row{padding:12px 14px;border:1px dashed var(--border);border-radius:12px;background:#fffdf6}
    .row b{display:inline-block;min-width:130px}
    .muted{color:var(--muted)}
    .link{color:#0b60d8;text-decoration:none}
    .link:hover{text-decoration:underline}
    .clamp{position:relative; max-height:360px; overflow:hidden}
    .clamp[data-collapsed="false"]{max-height:none}
    .clamp[data-collapsed="true"]::after{
      content:""; position:absolute; left:0; right:0; bottom:0; height:72px;
      background:linear-gradient(to bottom, rgba(255,255,255,0), var(--card)); pointer-events:none;
    }
    .expand-wrap{ margin-top:12px; }
    .expand-btn{
      display:inline-block; padding:8px 14px; border-radius:10px;
      background:var(--card); border:1px solid var(--border); cursor:pointer; font-weight:600;
    }
    .expand-btn:hover{ background:#fffef8; }
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">ğŸ  Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="åˆ‡æ›èªè¨€">ğŸŒ EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <!-- å·¦ï¼šå½±ç‰‡ -->
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/rq4oEv9J1ic" title="Dance Dance Diplomacy" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- å³ï¼šæ¨™é¡Œ + Tabs -->
      <section class="card">
        <div class="hd" id="pageTitle">Dance Dance Diplomacy</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true" data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Acquisition</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlockq">Unlock Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="followq">Follow-Up Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="comments">Comments</button>
        </div>
        <div class="bd">
          <div id="panel-story" class="tab-panel active"></div>
          <div id="panel-acq" class="tab-panel"></div>
          <div id="panel-unlockq" class="tab-panel"></div>
          <div id="panel-followq" class="tab-panel"></div>
          <div id="panel-comments" class="tab-panel"><div id="giscus_container" style="min-height:320px"></div></div>
        </div>
      </section>
    </div>
  </main>

<script>
const LANG_KEY = 'ffxiv-guide-lang';
const i18n = {
  EN: {
    langLabel: 'EN',
    pageTitle: 'Dance Dance Diplomacy',
    tabs: { story: 'Story', acq: 'Acquisition', unlockq: 'Unlock Quest', followq: 'Follow-Up Quest', comments: 'Comments' },
    readMore: 'Show more', readLess: 'Show less',
    story: `<div class="clamp" data-collapsed="true">
      <p>With the diplomatic mission to Little Solace at a stalemate, Yda proposes a more heartfelt solutionâ€”dancing. After all, you painstakingly learned the sylphsâ€™ customary greeting, yet had no chance to use it. Though Ydaâ€™s enthusiasm is cut short by leg cramps, she encourages you to approach the sylphs with sincerity and spirit.</p>
      <p>As you perform your lively jig, the sylphs begin to open up. Komuxio expresses hope for unity in protecting Little Solace. Others like Knolexia and Dellexia are charmed by your gestures, recognizing your goodwill. Though one admits their secret weaving arts remain out of reach to outsiders, your efforts earn their trust.</p>
      <p>Upon your return, Yda beams with joyâ€”your dance brought smiles and lifted the spirits of the entire settlement. And as for the better news? Her leg cramps are gone. With friendship rekindled, itâ€™s time to move forward.</p>
    </div><div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq: `<div class="stack"><div class="row"><b>Quest Giver</b> Yda <small class="muted">(East Shroud, X:21.9, Y:25.6)</small></div></div>`,
    unlockq: `<div class="stack"><div class="row"><a class="link" href="first-contact.html">First Contact</a></div></div>`,
    followq: `<div class="stack"><div class="row"><a class="link" href="forest-friend.html">Forest Friend</a></div></div>`
  },
  JP: {
    langLabel: 'JP',
    pageTitle: 'æŒ¨æ‹¶ã¯è»½å¿«ã«',
    tabs: { story: 'ã‚¹ãƒˆãƒ¼ãƒªãƒ¼', acq: 'å…¥æ‰‹æ–¹æ³•', unlockq: 'é–‹æ”¾ã‚¯ã‚¨ã‚¹ãƒˆ', followq: 'å¾Œç¶šã‚¯ã‚¨ã‚¹ãƒˆ', comments: 'ã‚³ãƒ¡ãƒ³ãƒˆ' },
    readMore: 'å…¨æ–‡ã‚’è¡¨ç¤º', readLess: 'æŠ˜ã‚ŠãŸãŸã‚€',
    story: `<div class="clamp" data-collapsed="true">
      <p>ãƒªãƒˆãƒ«ã‚½ãƒ«ã‚»ã§ã®å’Œå¹³äº¤æ¸‰ãŒé›£èˆªã™ã‚‹ãªã‹ã€ãƒ¦ã‚¦ãƒ€ãŒææ¡ˆã—ãŸã®ã¯å¿ƒã‹ã‚‰ã®è¸Šã‚Šã ã£ãŸã€‚ã›ã£ã‹ãã‚·ãƒ«ãƒ•æ—ã®æŒ¨æ‹¶ã‚’ç¿’å¾—ã—ãŸã®ã ã‹ã‚‰ã€å®Ÿéš›ã«æŠ«éœ²ã—ã¦ã¿ã‚ˆã†ã¨ã„ã†ã®ã ã€‚æœ¬äººã‚‚ä¸€ç·’ã«è¸Šã‚‹æ°—æº€ã€…ã ã£ãŸãŒã€è¶³ã®ç—™æ”£ã«ã‚ˆã‚Šã‚ãˆãªãæ–­å¿µã€‚ãã‚Œã§ã‚‚ã‚ãªãŸã«ã¯ã€èª æ„ã‚’è¾¼ã‚ã¦èˆã„ã‚’ä¼ãˆã‚‹ã‚ˆã†èƒŒä¸­ã‚’æŠ¼ã™ã€‚</p>
      <p>ã‚ãªãŸã®é™½æ°—ãªã‚¹ãƒ†ãƒƒãƒ—ã«ã€ã‚·ãƒ«ãƒ•ãŸã¡ãŒæ¬¡ç¬¬ã«å¿ƒã‚’é–‹ã„ã¦ã„ãã€‚ã‚³ãƒ ã‚·ã‚ªã¯ãƒªãƒˆãƒ«ã‚½ãƒ«ã‚»ã®å®ˆè­·ã«å¯¾ã™ã‚‹æ€ã„ã‚’èªã‚Šã€ãƒãƒ¬ã‚¯ã‚·ã‚¢ã‚„ãƒ‡ãƒ¬ã‚¯ã‚·ã‚¢ã‚‚ãã®èˆã«æ„Ÿæ¿€ã€‚ç§˜ä¼ã®ç¹”æŠ€ã‚’ä¼ãˆã‚‹ã“ã¨ã¯ã§ããªã„ã¨ã—ãªãŒã‚‰ã‚‚ã€å½¼ã‚‰ã¯ã‚ãªãŸã‚’ã€Œå‹ã€ã¨èªã‚ã¦ãã‚ŒãŸã€‚</p>
      <p>æ‹ ç‚¹ã«æˆ»ã‚‹ã¨ã€ãƒ¦ã‚¦ãƒ€ã¯å¤§å–œã³ã€‚ã‚ãªãŸã®è¸Šã‚ŠãŒãƒªãƒˆãƒ«ã‚½ãƒ«ã‚»å…¨ä½“ã«ç¬‘é¡”ã‚’ã‚‚ãŸã‚‰ã—ãŸã¨ã„ã†ã€‚ãã—ã¦ã€Œã•ã‚‰ã«è‰¯ã„çŸ¥ã‚‰ã›ã€ã¨ã—ã¦ã€è‡ªèº«ã®è¶³ã®ç—™æ”£ã‚‚å®Œæ²»ã—ãŸã¨ç¬‘ã†ã€‚ä¿¡é ¼ã‚’å–ã‚Šæˆ»ã—ãŸä»Šã€æ–°ãŸãªä¸€æ­©ã‚’è¸ã¿å‡ºã™æ™‚ã ã€‚</p>
    </div><div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq: `<div class="stack"><div class="row"><b>ã‚¯ã‚¨ã‚¹ãƒˆç™ºè¡Œ</b> ã‚¤ãƒ€ <small class="muted">ï¼ˆé»’è¡£æ£®ï¼šæ±éƒ¨æ£®æ—, X:21.9, Y:25.6ï¼‰</small></div></div>`,
    unlockq: `<div class="stack"><div class="row"><a class="link" href="first-contact.html">ã‚·ãƒ«ãƒ•æ—ã¨ã®æ¶ã‘æ©‹</a></div></div>`,
    followq: `<div class="stack"><div class="row"><a class="link" href="forest-friend.html">ä»®å®¿æš®ã‚‰ã—ã®å›°ã‚Šã”ã¨</a></div></div>`
  },
  ZH: {
    langLabel: 'ZH',
    pageTitle: 'è¼•å¿«çš„å¤–äº¤ä¹‹èˆ',
    tabs: { story: 'æ•…äº‹æ¦‚è¦', acq: 'å–å¾—æ–¹å¼', unlockq: 'è§£é–ä»»å‹™', followq: 'å¾ŒçºŒä»»å‹™', comments: 'ç•™è¨€' },
    readMore: 'å±•é–‹å…¨æ–‡', readLess: 'æ”¶åˆå…§å®¹',
    story: `<div class="clamp" data-collapsed="true">
      <p>åœ¨èˆ‡ Little Solace çš„å’Œå¹³ä½¿ç¯€ä»»å‹™é™·å…¥åƒµå±€ä¹‹éš›ï¼ŒYda æå‡ºä¸€å€‹çœŸèª åˆç°¡å–®çš„å»ºè­°â”€â”€è·³èˆã€‚ä½ è²»ç›¡å¿ƒåŠ›å­¸æœƒ sylph çš„å‚³çµ±æ‹›å‘¼èˆï¼Œå»é²é²æœªèƒ½æ–½å±•ã€‚é›–ç„¶å¥¹è‡ªå·±å› è…¿æŠ½ç­‹ç„¡æ³•å…±èˆï¼Œä½†å¥¹å …ä¿¡ï¼Œåªè¦ä½ æ‡·è‘—çœŸå¿ƒï¼Œä»–å€‘ä¸€å®šæœƒæ˜ç™½ä½ çš„å–„æ„ã€‚</p>
      <p>ç•¶ä½ åœ¨æ—é–“ç¿©ç¿©èµ·èˆï¼Œsylph å€‘çµ‚æ–¼æ•é–‹å¿ƒæ‰‰ã€‚Komuxio èªªæ˜è‡ªå·±å°å®ˆè­· Little Solace çš„æœŸæœ›ï¼Œè€Œ Knolexia èˆ‡ Dellexia å‰‡å› ä½ çš„èˆæ­¥è€Œæ­¡å–œï¼Œè¦–ä½ ç‚ºã€Œé¡˜æ„ç†è§£æˆ‘å€‘çš„å‹äººã€ã€‚å„˜ç®¡æœ‰ä¸€ä½è¡¨ç¤º sylph çš„ç¹”è¡“ç„¡æ³•å¤–å‚³ï¼Œä½†é€™ä»½æ–‡åŒ–å·®ç•°ä¸¦æœªé˜»ç¤™å½¼æ­¤çš„ç†è§£èˆ‡å–„æ„ã€‚</p>
      <p>å›åˆ°æ“šé»å¾Œï¼ŒYda æ»¿è‡‰ç¬‘å®¹è¿æ¥ä½ â”€â”€ä½ çš„èˆè¹ˆç‚ºæ•´å€‹éƒ¨è½å¸¶ä¾†äº†ç¬‘å®¹èˆ‡å¸Œæœ›ã€‚è€Œæ›´æ£’çš„æ¶ˆæ¯ï¼Ÿå¥¹çš„è…¿æŠ½ç­‹ä¹Ÿç—Šç™’äº†ï¼é€éè‚¢é«”èˆ‡å¿ƒæ„çš„äº¤æµï¼Œé›™æ–¹çš„å‹èª¼çµ‚æ–¼é‚å‡ºé‡è¦ä¸€æ­¥ã€‚</p>
    </div><div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq: `<div class="stack"><div class="row"><b>ä»»å‹™ç™¼å¸ƒ</b> ä¼Šé” <small class="muted">ï¼ˆé»‘è¡£æ£®æ±éƒ¨æ£®æ—, X:21.9, Y:25.6ï¼‰</small></div></div>`,
    unlockq: `<div class="stack"><div class="row"><a class="link" href="first-contact.html">å»ºç«‹èˆ‡æ£®éˆæ—çš„é€£çµ</a></div></div>`,
    followq: `<div class="stack"><div class="row"><a class="link" href="forest-friend.html">æ£®æ—ä¸­åŒä¼´çš„ç…©æ†‚</a></div></div>`
  }
};

const langToggle = document.getElementById('langToggle');
const pageTitle = document.getElementById('pageTitle');
const tabBtns = [...document.querySelectorAll('.tab-btn')];
const panels = {
  story: document.getElementById('panel-story'),
  acq: document.getElementById('panel-acq'),
  unlockq: document.getElementById('panel-unlockq'),
  followq: document.getElementById('panel-followq'),
  comments: document.getElementById('panel-comments')
};

function getLang(){ return localStorage.getItem(LANG_KEY) || 'EN'; }
function applyLang(lang){
  const t = i18n[lang] || i18n.EN;
  pageTitle.textContent = t.pageTitle;
  langToggle.textContent = `ğŸŒ ${t.langLabel}`;
  tabBtns.forEach(btn => { btn.textContent = t.tabs[btn.dataset.tab]; });
  const activeBtn = tabBtns.find(b => b.getAttribute('aria-selected')==='true') || tabBtns[0];
  renderPanel(activeBtn.dataset.tab, lang);
}

function wireClamp(panelEl, t){
  const clamp = panelEl.querySelector('.clamp');
  const btn = panelEl.querySelector('[data-role="expand"]');
  if(!clamp || !btn) return;
  function setLabel(){
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    btn.textContent = collapsed ? t.readMore : t.readLess;
  }
  setLabel();
  btn.addEventListener('click', ()=>{
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    clamp.setAttribute('data-collapsed', collapsed ? 'false' : 'true');
    setLabel();
  });
}

function renderPanel(key, lang){
  const t = i18n[lang] || i18n.EN;
  Object.keys(panels).forEach(k => panels[k].classList.remove('active'));
  panels[key].classList.add('active');
  if (key !== 'comments') panels[key].innerHTML = t[key];
  if (key === 'story') wireClamp(panels[key], t);
  if (key === 'comments') loadGiscusForCurrentLang();
}

tabBtns.forEach(btn=>{
  btn.addEventListener('click', ()=>{
    tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
    btn.setAttribute('aria-selected','true');
    renderPanel(btn.dataset.tab, getLang());
  });
});

langToggle.addEventListener('click', ()=>{
  const cur = getLang();
  const next = cur==='EN' ? 'JP' : (cur==='JP' ? 'ZH' : 'EN');
  localStorage.setItem(LANG_KEY, next);
  applyLang(next);
});

applyLang(getLang());

/* === Giscusï¼šComments åˆ†é  === */
const GISCUS_CFG = {
  repo: 'BELAUG-FFXIV/FFXIV_Library',
  repoId: 'R_kgDOPyh4Kw',
  category: 'General',
  categoryId: 'DIC_kwDOPyh4K84CwPjL',
  theme: 'preferred_color_scheme'
};
function uiLang(code){ return code==='JP' ? 'ja' : (code==='ZH' ? 'zh-TW' : 'en'); }
function loadGiscusForCurrentLang(){
  const mount = document.getElementById('giscus_container');
  if (!mount) return;
  mount.innerHTML = '';
  const langCode = getLang();
  const s = document.createElement('script');
  s.src = 'https://giscus.app/client.js';
  s.setAttribute('data-repo', GISCUS_CFG.repo);
  s.setAttribute('data-repo-id', GISCUS_CFG.repoId);
  s.setAttribute('data-category', GISCUS_CFG.category);
  s.setAttribute('data-category-id', GISCUS_CFG.categoryId);
  s.setAttribute('data-mapping', 'specific');
  s.setAttribute('data-term', location.pathname + 'ï½œ' + langCode);
  s.setAttribute('data-reactions-enabled', '1');
  s.setAttribute('data-emit-metadata', '0');
  s.setAttribute('data-input-position', 'bottom');
  s.setAttribute('data-lang', uiLang(langCode));
  s.setAttribute('data-theme', GISCUS_CFG.theme);
  s.setAttribute('crossorigin', 'anonymous');
  s.async = true;
  mount.appendChild(s);
}
</script>
</body>
</html>
