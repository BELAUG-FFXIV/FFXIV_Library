<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The Bowl of Embers | BELAUG · FFXIV Library</title>
  <meta name="description" content="FFXIV ARR 2.0 Trial — The Bowl of Embers（イフリート討伐戦 / 伊弗利特討伐戰）：故事概要、需求條件、解鎖任務與後續任務，附影片。">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root { --bg:#fff8e6; --card:#ffffff; --fg:#222; --muted:#666; --border:#e5e1d8; --accent:#e11d48; }
    *{box-sizing:border-box}
    body{margin:0; font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif; background:var(--bg); color:var(--fg);}
    .container{max-width:1080px; margin:0 auto; padding:0 16px}
    .site-header{border-bottom:1px solid var(--border); background:#fff9edb3; backdrop-filter:saturate(120%) blur(6px); position:sticky; top:0; z-index:10}
    .nav{display:flex; align-items:center; justify-content:space-between; height:60px}
    .left{display:flex; align-items:center; gap:12px}
    .home{border:1px solid var(--border); background:#fff; padding:4px 8px; border-radius:8px; text-decoration:none; color:var(--fg); font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex; align-items:center; gap:8px}
    .icon-btn{background:none; border:none; cursor:pointer; font-size:14px; padding:6px 10px; border-radius:8px}
    .icon-btn:hover{background:#fff; border:1px solid var(--border)}
    .main{padding:20px 0 40px}
    .grid{display:grid; grid-template-columns:1.1fr 1fr; gap:20px; align-items:start;}
    @media (max-width:900px){ .grid{grid-template-columns:1fr} .video-wrap{position:relative; padding-top:56.25%} .video-wrap iframe{position:absolute; inset:0; width:100%; height:100%} }
    .card{background:var(--card); border:1px solid var(--border); border-radius:16px; box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px; border-bottom:1px solid var(--border); font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%; height:420px; border:0; display:block; border-radius:16px}
    .tabs{display:flex; gap:8px; padding:12px 12px 0; flex-wrap:wrap}
    .tab-btn{background:#fff; border:1px solid var(--border); color:var(--fg); border-radius:999px; padding:8px 14px; cursor:pointer; font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent); color:#fff; background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex; flex-direction:column; gap:10px}
    .stack .row{padding:12px 14px; border:1px dashed var(--border); border-radius:12px; background:#fffdf6}
    .muted{color:var(--muted)}
    .link{color:#0b60d8; text-decoration:none}
    .link:hover{text-decoration:underline}
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">🏠 Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="切換語言">🌐 EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <!-- 左：影片 -->
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/4-dwHd4LurY" title="The Bowl of Embers" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- 右：標題 + Tabs -->
      <section class="card">
        <div class="hd" id="pageTitle">The Bowl of Embers</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true" data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="req">Requirements</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Unlock Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlock">Follow-Up Quest</button>
        </div>
        <div class="bd">
          <div id="panel-story" class="tab-panel active"></div>
          <div id="panel-acq" class="tab-panel"></div>
          <div id="panel-req" class="tab-panel"></div>
          <div id="panel-unlock" class="tab-panel"></div>
        </div>
      </section>
    </div>
  </main>

  <script>
    const LANG_KEY = 'ffxiv-guide-lang';

    const i18n = {
      EN:{
        langLabel:'EN',
        pageTitle:'The Bowl of Embers',
        tabs:{story:'Story', req:'Requirements', acq:'Unlock Quest', unlock:'Follow-Up Quest'},
        story:`<p>Owing to a betrayal, you have been captured by the Amalj’aa and taken to their stronghold of Zanr’ak, there to be given as an offering to the primal Ifrit. If you are to survive this fiery encounter with the Lord of the Inferno, you and your comrades must fight with no less than every onze of your strength. Should you fall, your souls shall burn for eternity…</p>`,
        req:`<div class="stack">
          <div class="row"><strong>Players:</strong> 1–4 players (1 Tank, 1 Healer, 2 DPS)</div>
          <div class="row"><strong>Class/Job:</strong> Disciples of War or Magic</div>
          <div class="row">※ Limited jobs can participate only in a preformed party meeting party size requirements or an unrestricted party, and if duty rules allow.</div>
          <div class="row"><strong>Level:</strong> 20 (Sync from 22)</div>
          <div class="row">※ While synced, all item stats are adjusted.</div>
          <div class="row">※ Role and item level restrictions are lifted for parties meeting minimum size requirements.</div>
        </div>`,
        acq:`<div class="stack">
          <div class="row"><a class="link" href="#">Lord of the Inferno</a></div>
        </div>`,
        unlock:`<div class="stack">
          <div class="row"><a class="link" href="#">A Hero in the Making</a></div>
        </div>`
      },

      JP:{
        langLabel:'JP',
        pageTitle:'イフリート討伐戦',
        tabs:{story:'ストーリー', req:'必要条件', acq:'開放クエスト', unlock:'後続クエスト'},
        story:`<p>裏切りにより、アマルジャ族に囚われ、ザンラクの拠点へと連行されたあなたは、焔神イフリートへの生贄として捧げられることに──。業火に包まれるこの戦いを生き延びるには、仲間と共に全力を尽くすしかない。敗北すれば、その魂は永劫の炎に焼かれ続けることとなる……。</p>`,
        req:`<div class="stack">
          <div class="row"><strong>プレイヤー数：</strong>1～4人（タンク1／ヒーラー1／DPS2）</div>
          <div class="row"><strong>クラス／ジョブ：</strong>ファイター／ソーサラー</div>
          <div class="row">※ リミテッドジョブは、規定人数の事前結成パーティまたは制限解除パーティかつ規定が許可する場合のみ参加可。</div>
          <div class="row"><strong>レベル：</strong>20（シンク：22）</div>
          <div class="row">※ シンク中は全装備ステータスが調整されます。</div>
          <div class="row">※ 最低人数を満たすパーティではロール／IL制限が解除されます。</div>
        </div>`,
        acq:`<div class="stack">
          <div class="row"><a class="link" href="#">猛る焔神イフリート</a></div>
        </div>`,
        unlock:`<div class="stack">
          <div class="row"><a class="link" href="#">英雄の卵</a></div>
        </div>`
      },

      ZH:{
        langLabel:'ZH-TW',
        pageTitle:'伊弗利特討伐戰',
        tabs:{story:'故事概要', req:'需求條件', acq:'解鎖任務', unlock:'後續任務'},
        story:`<p>你遭遇背叛，被 Amalj’aa 擄走，帶往他們位於 Zanr’ak 的據點，作為祭獻給焰神 Ifrit 的活人祭品。若想從這場炙熱的對決中倖存，你與夥伴必須傾盡全力迎戰。若是敗北，你的靈魂將永遠在地獄之火中燃燒……</p>`,
        req:`<div class="stack">
          <div class="row"><strong>人數：</strong>1–4 人（1 坦克／1 治療／2 輸出）</div>
          <div class="row"><strong>職業：</strong>戰鬥職業／魔法職業</div>
          <div class="row">※ 限定職業僅能在事先組成符合人數條件的隊伍，或以無限制規則參加，且需符合任務規則允許的情況。</div>
          <div class="row"><strong>等級：</strong>20（同步至 22）</div>
          <div class="row">※ 同步時，所有裝備數值將自動調整。</div>
          <div class="row">※ 當隊伍僅達最低人數時，角色定位與裝備品級限制將解除。</div>
        </div>`,
        acq:`<div class="stack">
          <div class="row"><a class="link" href="#">地獄之火伊弗利特</a></div>
        </div>`,
        unlock:`<div class="stack">
          <div class="row"><a class="link" href="#">初露頭角的英雄</a></div>
        </div>`
      }
    };

    const langToggle = document.getElementById('langToggle');
    const pageTitle  = document.getElementById('pageTitle');
    const tabBtns    = [...document.querySelectorAll('.tab-btn')];
    const panels = {
      story : document.getElementById('panel-story'),
      acq   : document.getElementById('panel-acq'),
      req   : document.getElementById('panel-req'),
      unlock: document.getElementById('panel-unlock')
    };

    function getLang(){ return localStorage.getItem(LANG_KEY) || 'EN'; }
    function applyLang(lang){
      const t = i18n[lang] || i18n.EN;
      pageTitle.textContent = t.pageTitle;
      langToggle.textContent = `🌐 ${t.langLabel}`;
      tabBtns.forEach(btn => { btn.textContent = t.tabs[btn.dataset.tab]; });
      const activeBtn = tabBtns.find(b=>b.getAttribute('aria-selected')==='true') || tabBtns[0];
      renderPanel(activeBtn.dataset.tab, lang);
    }

    function renderPanel(key, lang){
      const t = i18n[lang] || i18n.EN;
      Object.keys(panels).forEach(k => panels[k].classList.remove('active'));
      panels[key].classList.add('active');
      panels[key].innerHTML = t[key];
    }

    tabBtns.forEach(btn=>{
      btn.addEventListener('click',()=>{
        tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
        btn.setAttribute('aria-selected','true');
        renderPanel(btn.dataset.tab, getLang());
      });
    });

    langToggle.addEventListener('click',()=>{
      const cur=getLang();
      const next=cur==='EN'?'JP':(cur==='JP'?'ZH':'EN');
      localStorage.setItem(LANG_KEY,next);
      applyLang(next);
    });

    applyLang(getLang());
  </script>
</body>
</html>
