<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The Dancing Plague | BELAUG Â· FFXIV Library</title>
  <meta name="description" content="FFXIV SHB 5.0 Trial â€” The Dancing Plagueï¼ˆãƒ†ã‚£ã‚¿ãƒ¼ãƒ‹ã‚¢è¨æ»…æˆ¦ / æ³°å¦å¦®é›…è¨æ»…æˆ°ï¼‰ï¼šæ•…äº‹æ¦‚è¦ã€éœ€æ±‚æ¢ä»¶ã€è§£é–ä»»å‹™èˆ‡å¾ŒçºŒä»»å‹™ï¼Œé™„å½±ç‰‡ã€‚">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root { --bg:#fff8e6; --card:#ffffff; --fg:#222; --muted:#666; --border:#e5e1d8; --accent:#e11d48; }
    *{box-sizing:border-box}
    body{margin:0; font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif; background:var(--bg); color:var(--fg);}
    .container{max-width:1080px; margin:0 auto; padding:0 16px}
    .site-header{border-bottom:1px solid var(--border); background:#fff9edb3; backdrop-filter:saturate(120%) blur(6px); position:sticky; top:0; z-index:10}
    .nav{display:flex; align-items:center; justify-content:space-between; height:60px}
    .left{display:flex; align-items:center; gap:12px}
    .home{border:1px solid var(--border); background:#fff; padding:4px 8px; border-radius:8px; text-decoration:none; color:var(--fg); font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex; align-items:center; gap:8px}
    .icon-btn{background:none; border:none; cursor:pointer; font-size:14px; padding:6px 10px; border-radius:8px}
    .icon-btn:hover{background:#fff; border:1px solid var(--border)}
    .main{padding:20px 0 40px}
    .grid{display:grid; grid-template-columns:1.1fr 1fr; gap:20px; align-items:start;}
    @media (max-width:900px){ .grid{grid-template-columns:1fr} .video-wrap{position:relative; padding-top:56.25%} .video-wrap iframe{position:absolute; inset:0; width:100%; height:100%} }
    .card{background:var(--card); border:1px solid var(--border); border-radius:16px; box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px; border-bottom:1px solid var(--border); font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%; height:420px; border:0; display:block; border-radius:16px}
    .tabs{display:flex; gap:8px; padding:12px 12px 0; flex-wrap:wrap}
    .tab-btn{background:#fff; border:1px solid var(--border); color:var(--fg); border-radius:999px; padding:8px 14px; cursor:pointer; font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent); color:#fff; background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex; flex-direction:column; gap:10px}
    .stack .row{padding:12px 14px; border:1px dashed var(--border); border-radius:12px; background:#fffdf6}
    .muted{color:var(--muted)}
    .link{color:#0b60d8; text-decoration:none}
    .link:hover{text-decoration:underline}
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">ğŸ  Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="åˆ‡æ›èªè¨€">ğŸŒ EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <!-- å·¦ï¼šå½±ç‰‡ -->
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/mD-G3HHd-tU" title="The Dancing Plague" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- å³ï¼šæ¨™é¡Œ + Tabs -->
      <section class="card">
        <div class="hd" id="pageTitle">The Dancing Plague</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true" data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="req">Requirements</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Unlock Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlock">Follow-Up Quest</button>
          <!-- æ–°å¢ï¼šComments åˆ†é æŒ‰éˆ• -->
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="comments">Comments</button>
        </div>
        <div class="bd">
          <div id="panel-story" class="tab-panel active"></div>
          <div id="panel-acq" class="tab-panel"></div>
          <div id="panel-req" class="tab-panel"></div>
          <div id="panel-unlock" class="tab-panel"></div>
          <!-- æ–°å¢ï¼šç•™è¨€é¢æ¿ -->
          <div id="panel-comments" class="tab-panel">
            <div id="giscus_container" style="min-height:320px;"></div>
          </div>
        </div>
      </section>
    </div>
  </main>

  <script>
    const LANG_KEY = 'ffxiv-guide-lang';

    const i18n = {
      EN:{
        langLabel:'EN',
        pageTitle:'The Dancing Plague',
        tabs:{story:'Story', req:'Requirements', acq:'Unlock Quest', unlock:'Follow-Up Quest', comments:'Comments'},
        story:`<p>The white dress, the shell crown, the stone scepter, the crystal shoesâ€¦ Having acquired the four fae relics through considerable effort, you now stand ready to break the seal over Lyhe Ghiah and confront the Lightwarden of Il Mhegâ”€the fallen faerie king, Titania.</p>
        <p>Yet even as you prepare to challenge the sin eater within, your party is being hunted from without. The forces of Eulmore, throwing all caution to the wind, march relentlessly upon the faerie kingdom. Time is short, and your resolve must be unshakableâ€”for the fate of Il Mheg and its people hangs in the balance.</p>`,
        req:`<div class="stack">
          <div class="row"><strong>Players:</strong> 1â€“8 players (2 Tanks, 2 Healers, 4 DPS)</div>
          <div class="row"><strong>Class/Job:</strong> Disciples of War or Magic</div>
          <div class="row">â€» Limited jobs can participate only in a preformed party meeting party size requirements or an unrestricted party, and if duty rules allow.</div>
          <div class="row"><strong>Level:</strong> 73 (Sync from 74)</div>
          <div class="row">â€» While synced, all item stats are adjusted.</div>
          <div class="row">â€» Role and item level restrictions are lifted for parties meeting minimum size requirements.</div>
        </div>`,
        acq:`<div class="stack">
          <div class="row"><a class="link" href="#">Acht-la Ormh Inn</a></div>
        </div>`,
        unlock:`<div class="stack">
          <div class="row"><a class="link" href="#">The Wheel Turns</a></div>
        </div>`
      },

      JP:{
        langLabel:'JP',
        pageTitle:'ãƒ†ã‚£ã‚¿ãƒ¼ãƒ‹ã‚¢è¨æ»…æˆ¦',
        tabs:{story:'ã‚¹ãƒˆãƒ¼ãƒªãƒ¼', req:'å¿…è¦æ¡ä»¶', acq:'é–‹æ”¾ã‚¯ã‚¨ã‚¹ãƒˆ', unlock:'å¾Œç¶šã‚¯ã‚¨ã‚¹ãƒˆ', comments:'ã‚³ãƒ¡ãƒ³ãƒˆ'},
        story:`<p>ç™½ã®ãƒ‰ãƒ¬ã‚¹ã€è²æ®»ã®å† ã€çŸ³ã®ç‹ç¬ã€æ°´æ™¶ã®é´â€¦â€¦å››ã¤ã®å¦–ç²¾ã®ç§˜å®ã‚’æ‰‹ã«å…¥ã‚Œã€ä»Šã¾ã•ã«ã€Œãƒªã‚§ãƒ¼ãƒ»ã‚®ã‚¢åŸã€ã®å°å°ã‚’è§£ã‹ã‚“ã¨ã—ã¦ã„ã‚‹ã€‚</p>
        <p>ãã“ã«å¾…ã¡å—ã‘ã‚‹ã®ã¯ã€ã‚¤ãƒ«ãƒ»ãƒ¡ã‚°ã®å¤§ç½ªå–°ã„ã§ã‚ã‚Šã€å •ã¡ãŸå¦–ç²¾ç‹ã€Œãƒ†ã‚£ã‚¿ãƒ¼ãƒ‹ã‚¢ã€ã€‚ã—ã‹ã—ã€ã‚ãªãŸãŸã¡ãŒå†…ãªã‚‹è„…å¨ã«ç«‹ã¡å‘ã‹ã†ãã®æ™‚ã€ãƒ¦ãƒ¼ãƒ«ãƒ¢ã‚¢è»ãŒå¤–ã‹ã‚‰è¿«ã‚‹ã€‚ãŸã‚ã‚‰ã„ã‚‚ãªãã€å¦–ç²¾ç‹å›½ã‚’æ»…ã¼ã™ã¹ãé€²è»ã—ã¦ã„ã‚‹ã®ã ã€‚</p>
        <p>åˆ»ä¸€åˆ»ã¨è¿«ã‚‹å±æ©Ÿã€‚ã„ã¾ã“ãã€æºã‚‹ãŒã¬è¦šæ‚Ÿã‚’èƒ¸ã«â€¦â€¦ã‚¤ãƒ«ãƒ»ãƒ¡ã‚°ã®å‘½é‹ã‚’è³­ã‘ãŸæˆ¦ã„ãŒå§‹ã¾ã‚‹ã€‚</p>`,
        req:`<div class="stack">
          <div class="row"><strong>ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æ•°ï¼š</strong>1ï½8äººï¼ˆã‚¿ãƒ³ã‚¯2ï¼ãƒ’ãƒ¼ãƒ©ãƒ¼2ï¼DPS4ï¼‰</div>
          <div class="row"><strong>ã‚¯ãƒ©ã‚¹ï¼ã‚¸ãƒ§ãƒ–ï¼š</strong>ãƒ•ã‚¡ã‚¤ã‚¿ãƒ¼ï¼ã‚½ãƒ¼ã‚µãƒ©ãƒ¼</div>
          <div class="row">â€» ãƒªãƒŸãƒ†ãƒƒãƒ‰ã‚¸ãƒ§ãƒ–ã¯ã€è¦å®šäººæ•°ã®äº‹å‰çµæˆãƒ‘ãƒ¼ãƒ†ã‚£ã¾ãŸã¯åˆ¶é™è§£é™¤ãƒ‘ãƒ¼ãƒ†ã‚£ã‹ã¤è¦å®šãŒè¨±å¯ã™ã‚‹å ´åˆã®ã¿å‚åŠ å¯ã€‚</div>
          <div class="row"><strong>ãƒ¬ãƒ™ãƒ«ï¼š</strong>73ï¼ˆã‚·ãƒ³ã‚¯ï¼š74ï¼‰</div>
          <div class="row">â€» ã‚·ãƒ³ã‚¯ä¸­ã¯å…¨è£…å‚™ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒèª¿æ•´ã•ã‚Œã¾ã™ã€‚</div>
          <div class="row">â€» æœ€ä½äººæ•°ã‚’æº€ãŸã™ãƒ‘ãƒ¼ãƒ†ã‚£ã§ã¯ãƒ­ãƒ¼ãƒ«ï¼ILåˆ¶é™ãŒè§£é™¤ã•ã‚Œã¾ã™ã€‚</div>
        </div>`,
        acq:`<div class="stack">
          <div class="row"><a class="link" href="#">ã‚¢ã‚¯ãƒˆãƒ©ãƒ»ã‚ªãƒ«ãƒ¯ãƒ»ã‚¤ãƒ³</a></div>
        </div>`,
        unlock:`<div class="stack">
          <div class="row"><a class="link" href="#">é‹å‘½ã¯ã¾ãŸå»»ã‚‹</a></div>
        </div>`
      },

      ZH:{
        langLabel:'ZH-TW',
        pageTitle:'æ³°å¦å¦®é›…è¨æ»…æˆ°',
        tabs:{story:'æ•…äº‹æ¦‚è¦', req:'éœ€æ±‚æ¢ä»¶', acq:'è§£é–ä»»å‹™', unlock:'å¾ŒçºŒä»»å‹™', comments:'ç•™è¨€'},
        story:`<p>ç™½è‰²é•·è£™ã€è²æ®¼çš‡å† ã€çŸ³ä¹‹æ¬Šæ–ã€æ°´æ™¶é‹â”€â”€æ­·ç¶“è‰±è¾›ï¼Œä½ çµ‚æ–¼é›†é½Šå››ä»¶å¦–ç²¾éºç‰©ï¼Œå³å°‡è§£é–‹ Lyhe Ghiah çš„å°å°ï¼Œé¢å° Il Mheg çš„å…‰ä¹‹å·¢ç©´â”€â”€å¢®è½çš„å¦–ç²¾ç‹ Titaniaã€‚</p>
        <p>ç„¶è€Œï¼Œå°±åœ¨ä½ æº–å‚™é€²å…¥å°å°ä¹‹åœ°ä¹‹éš›ï¼Œä¾†è‡ª Eulmore çš„è»å‹¢å·²ç¶“å¸­æ²è€Œä¾†ï¼Œä¸é¡§ä¸€åˆ‡åœ°é€²è»å¦–ç²¾ä¹‹é„‰ã€‚å…§å¤–å¤¾æ“Šï¼Œæƒ…å‹¢è¬åˆ†å±æ€¥ã€‚</p>
        <p>ä½ å¿…é ˆå …å®šä¿¡å¿µï¼Œå› ç‚º Il Mheg çš„å‘½é‹ã€é€™ç¾¤å¤©çœŸçš„å¦–ç²¾å€‘çš„æœªä¾†ï¼Œå…¨éƒ½ç³»æ–¼é€™å ´æ±ºæˆ°ä¹‹ä¸­ã€‚</p>`,
        req:`<div class="stack">
          <div class="row"><strong>äººæ•¸ï¼š</strong>1â€“8 äººï¼ˆ2 å¦å…‹ï¼2 æ²»ç™‚ï¼4 è¼¸å‡ºï¼‰</div>
          <div class="row"><strong>è·æ¥­ï¼š</strong>æˆ°é¬¥è·æ¥­ï¼é­”æ³•è·æ¥­</div>
          <div class="row">â€» é™å®šè·æ¥­åƒ…èƒ½åœ¨äº‹å…ˆçµ„æˆç¬¦åˆäººæ•¸æ¢ä»¶çš„éšŠä¼ï¼Œæˆ–ä»¥ç„¡é™åˆ¶è¦å‰‡åƒåŠ ï¼Œä¸”éœ€ç¬¦åˆä»»å‹™è¦å‰‡å…è¨±çš„æƒ…æ³ã€‚</div>
          <div class="row"><strong>ç­‰ç´šï¼š</strong>73ï¼ˆåŒæ­¥è‡³ 74ï¼‰</div>
          <div class="row">â€» åŒæ­¥æ™‚ï¼Œæ‰€æœ‰è£å‚™æ•¸å€¼å°‡è‡ªå‹•èª¿æ•´ã€‚</div>
          <div class="row">â€» ç•¶éšŠä¼åƒ…é”æœ€ä½äººæ•¸æ™‚ï¼Œè§’è‰²å®šä½èˆ‡è£å‚™å“ç´šé™åˆ¶å°‡è§£é™¤ã€‚</div>
        </div>`,
        acq:`<div class="stack">
          <div class="row"><a class="link" href="#">é˜¿å…‹ç‰¹æ‹‰ãƒ»å¥§çˆ¾å§†å®¢æ£§</a></div>
        </div>`,
        unlock:`<div class="stack">
          <div class="row"><a class="link" href="#">å‘½é‹ä¹‹è¼ª</a></div>
        </div>`
      }
    };

    const langToggle = document.getElementById('langToggle');
    const pageTitle  = document.getElementById('pageTitle');
    const tabBtns    = [...document.querySelectorAll('.tab-btn')];
    const panels = {
      story : document.getElementById('panel-story'),
      acq   : document.getElementById('panel-acq'),
      req   : document.getElementById('panel-req'),
      unlock: document.getElementById('panel-unlock'),
      comments: document.getElementById('panel-comments') // æ–°å¢
    };

    function getLang(){ return localStorage.getItem(LANG_KEY) || 'EN'; }

    // é€²å…¥ comments æ‰è¼‰å…¥ giscusï¼›é¿å…è¦†å¯«ç•™è¨€å®¹å™¨
    function renderPanel(key, lang){
      const t = i18n[lang] || i18n.EN;
      Object.keys(panels).forEach(k => panels[k].classList.remove('active'));
      panels[key].classList.add('active');

      if (key !== 'comments') {
        panels[key].innerHTML = t[key];
      } else {
        loadGiscusForCurrentLang();
      }
    }

    tabBtns.forEach(btn=>{
      btn.addEventListener('click',()=>{
        tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
        btn.setAttribute('aria-selected','true');
        renderPanel(btn.dataset.tab, getLang());
      });
    });

    langToggle.addEventListener('click',()=>{
      const cur=getLang();
      const next=cur==='EN'?'JP':(cur==='JP'?'ZH':'EN');
      localStorage.setItem(LANG_KEY,next);
      applyLang(next);
    });

    function applyLang(lang){
      const t = i18n[lang] || i18n.EN;
      pageTitle.textContent = t.pageTitle;
      langToggle.textContent = `ğŸŒ ${t.langLabel}`;
      tabBtns.forEach(btn => { btn.textContent = t.tabs[btn.dataset.tab]; });
      const activeBtn = tabBtns.find(b=>b.getAttribute('aria-selected')==='true') || tabBtns[0];
      renderPanel(activeBtn.dataset.tab, lang);
      // è‹¥åœåœ¨ç•™è¨€åˆ†é ï¼Œåˆ‡èªè¨€å¾Œé‡è¼‰ giscus
      if (activeBtn && activeBtn.dataset.tab === 'comments') loadGiscusForCurrentLang();
    }

    applyLang(getLang());

    /* === Giscusï¼šå–®ä¸€ Comments åˆ†é ï¼Œéš¨èªè¨€åˆ‡æ› === */
    const GISCUS_CFG = {
      repo: 'BELAUG-FFXIV/FFXIV_Library',
      repoId: 'R_kgDOPyh4Kw',
      category: 'General',
      categoryId: 'DIC_kwDOPyh4K84CwPjL',
      theme: 'preferred_color_scheme'
    };
    function uiLang(code){ return code==='JP' ? 'ja' : (code==='ZH' ? 'zh-TW' : 'en'); }
    function loadGiscusForCurrentLang(){
      const mount = document.getElementById('giscus_container');
      if (!mount) return;
      mount.innerHTML = '';
      const langCode = getLang(); // EN / JP / ZH
      const s = document.createElement('script');
      s.src = 'https://giscus.app/client.js';
      s.setAttribute('data-repo', GISCUS_CFG.repo);
      s.setAttribute('data-repo-id', GISCUS_CFG.repoId);
      s.setAttribute('data-category', GISCUS_CFG.category);
      s.setAttribute('data-category-id', GISCUS_CFG.categoryId);
      s.setAttribute('data-mapping', 'specific');
      s.setAttribute('data-term', location.pathname + 'ï½œ' + langCode);
      s.setAttribute('data-reactions-enabled', '1');
      s.setAttribute('data-emit-metadata', '0');
      s.setAttribute('data-input-position', 'bottom');
      s.setAttribute('data-lang', uiLang(langCode));
      s.setAttribute('data-theme', GISCUS_CFG.theme);
      s.setAttribute('crossorigin', 'anonymous');
      s.async = true;
      mount.appendChild(s);
    }
  </script>
</body>
</html>
