<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Following Footfalls | BELAUG Â· FFXIV Library</title>
  <meta name="description" content="MSQ â€“ Following Footfalls (ARR Patch 2.0)">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root { --bg:#fff8e6; --card:#fff; --fg:#222; --muted:#666; --border:#e5e1d8; --accent:#e11d48; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif;background:var(--bg);color:var(--fg)}
    .container{max-width:1080px;margin:0 auto;padding:0 16px}
    .site-header{border-bottom:1px solid var(--border);background:#fff9edb3;backdrop-filter:saturate(120%) blur(6px);position:sticky;top:0;z-index:10}
    .nav{display:flex;align-items:center;justify-content:space-between;height:60px}
    .left{display:flex;align-items:center;gap:12px}
    .home{border:1px solid var(--border);background:#fff;padding:4px 8px;border-radius:8px;text-decoration:none;color:var(--fg);font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex;align-items:center;gap:8px}
    .icon-btn{background:none;border:none;cursor:pointer;font-size:14px;padding:6px 10px;border-radius:8px}
    .icon-btn:hover{background:#fff;border:1px solid var(--border)}
    .main{padding:20px 0 40px}
    .grid{display:grid;grid-template-columns:1.1fr 1fr;gap:20px;align-items:start}
    @media (max-width:900px){
      .grid{grid-template-columns:1fr}
      .video-wrap{position:relative;padding-top:56.25%}
      .video-wrap iframe{position:absolute;inset:0;width:100%;height:100%}
    }
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px;border-bottom:1px solid var(--border);font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%;height:420px;border:0;display:block;border-radius:16px}
    .tabs{display:flex;gap:8px;padding:12px 12px 0;flex-wrap:wrap}
    .tab-btn{background:#fff;border:1px solid var(--border);color:var(--fg);border-radius:999px;padding:8px 14px;cursor:pointer;font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent);color:#fff;background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex;flex-direction:column;gap:10px}
    .stack .row{padding:12px 14px;border:1px dashed var(--border);border-radius:12px;background:#fffdf6}
    .row b{display:inline-block;min-width:130px}
    .muted{color:var(--muted)}
    .link{color:#0b60d8;text-decoration:none}
    .link:hover{text-decoration:underline}
    /* å±•é–‹/æ”¶åˆ */
    .clamp{position:relative; max-height:360px; overflow:hidden}
    .clamp[data-collapsed="false"]{max-height:none}
    .clamp[data-collapsed="true"]::after{
      content:""; position:absolute; left:0; right:0; bottom:0; height:72px;
      background:linear-gradient(to bottom, rgba(255,255,255,0), var(--card)); pointer-events:none;
    }
    .expand-wrap{ margin-top:12px; }
    .expand-btn{
      display:inline-block; padding:8px 14px; border-radius:10px;
      background:var(--card); border:1px solid var(--border); cursor:pointer; font-weight:600;
    }
    .expand-btn:hover{ background:#fffef8; }
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">ğŸ  Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="åˆ‡æ›èªè¨€">ğŸŒ EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <!-- å·¦ï¼šå½±ç‰‡ -->
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/TfZCL7818sg"
              title="Following Footfalls" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- å³ï¼šæ¨™é¡Œ + Tabs -->
      <section class="card">
        <div class="hd" id="pageTitle">Following Footfalls</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true"  data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Acquisition</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlockq">Unlock Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="followq">Follow-Up Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="comments">Comments</button>
        </div>
        <div class="bd">
          <div id="panel-story"   class="tab-panel active"></div>
          <div id="panel-acq"     class="tab-panel"></div>
          <div id="panel-unlockq" class="tab-panel"></div>
          <div id="panel-followq" class="tab-panel"></div>
          <div id="panel-comments" class="tab-panel">
            <div id="giscus_container" style="min-height:320px;"></div>
          </div>
        </div>
      </section>
    </div>
  </main>

<script>
const LANG_KEY = 'ffxiv-guide-lang';
const i18n = {
  EN:{
    langLabel:'EN',
    pageTitle:'Following Footfalls',
    tabs:{ story:'Story', acq:'Acquisition', unlockq:'Unlock Quest', followq:'Follow-Up Quest', comments:'Comments' },
    readMore:'Show more', readLess:'Show less',
    story:`<div class="clamp" data-collapsed="true">
      <p>In the bustling trading settlement of Horizon, Fufulupa hurries over to you the moment you arrive, his round face tight with worry. Once again, the Brass Blades of the Rose are in need of your aid. Thaumaturges from the Ossuary have come to Western Thanalan to survey the ancient ruins known as the Footfalls in search of ancient relics, and because the surrounding area is rife with wild beasts, the Horizon garrison has been charged with their protection. Yet Captain Baldewyn has dispatched only a small handful of Brass Blades, and for all his assurances, Fufulupa cannot bring himself to believe that such a meager force will be enough to keep their honored patrons safe. Anxious but determined to do what little he can, he begs you to go in his stead, travel out to the Footfalls, and offer your strength to the unit stationed there by speaking with Totoruna.</p>
      <p>Leaving Horizon behind, you follow the sandy road west until the broken statues and weather-worn stonework of the Footfalls rise into view. There, among the ruins, a small detachment of Brass Blades stands guard, and one Lalafellin soldierâ€”Totorunaâ€”eyes you with open suspicion as you approach and introduce yourself as reinforcements. He scoffs that he has heard nothing of this from Captain Baldewyn, and remarks that the captain ordered only trusted men to take part in the operation. Insisting that they have the situation well in hand and that Fufulupa has no business meddling in matters that do not concern him, he waves away your offer of aid, grumbling that the boy has a stick up his arse the size of a sabotender and that it is no wonder he was told to stay back in Horizon. Your concern for the survey party finds no welcome here, and you are left with the uneasy sense that Fufulupaâ€™s fears may yet prove justified.</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>Quest Giver</b> Fufulupa <small class="muted">Western Thanalan (X:22.6, Y:17.1)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="passing-the-blade.html">Passing the Blade</a></div>
      <div class="row">All classes and jobs (excluding limited jobs) (Level 10 or above)</div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="storms-on-the-horizon.html">Storms on the Horizon</a></div>
    </div>`
  },
  JP:{
    langLabel:'JP',
    pageTitle:'è¶³è·¡ã®è°·ã¸',
    tabs:{ story:'ã‚¹ãƒˆãƒ¼ãƒªãƒ¼', acq:'å…¥æ‰‹æ–¹æ³•', unlockq:'é–‹æ”¾ã‚¯ã‚¨ã‚¹ãƒˆ', followq:'å¾Œç¶šã‚¯ã‚¨ã‚¹ãƒˆ', comments:'ã‚³ãƒ¡ãƒ³ãƒˆ' },
    readMore:'å…¨æ–‡ã‚’è¡¨ç¤º', readLess:'æŠ˜ã‚ŠãŸãŸã‚€',
    story:`<div class="clamp" data-collapsed="true">
      <p>äº¤æ˜“ã®ç”ºãƒ›ãƒ©ã‚¤ã‚ºãƒ³ã¯ã€ä»Šæ—¥ã‚‚è¡Œãäº¤ã†äººã¨è·ã§ã›ã‚ã—ãªãã«ãã‚ã£ã¦ã„ã‚‹ã€‚ãã®å–§å™ªã®ä¸­ã§ã€éŠ…åˆƒå›£ãƒ­ãƒ¼ã‚ºé€£éšŠã«æ‰€å±ã™ã‚‹ãƒ•ãƒ•ãƒ«ãƒ‘ãŒã€ã©ã“ã‹è½ã¡ç€ã‹ãªã„é¢æŒã¡ã§ã‚ãªãŸã‚’å‘¼ã³æ­¢ã‚ãŸã€‚å½¼ã®è©±ã«ã‚ˆã‚Œã°ã€ã‚¦ãƒ«ãƒ€ãƒã®å±éª¸é¤¨ã‹ã‚‰ã‚„ã£ã¦æ¥ãŸå‘ªè¡“å£«ãŸã¡ãŒã€è¥¿ã‚¶ãƒŠãƒ©ãƒ¼ãƒ³ã®éºè·¡ã€Œè¶³è·¡ã®è°·ã€ã§å¤ä»£ã®éºç‰©ã‚’èª¿æŸ»ã—ã¦ã„ã‚‹ã¨ã„ã†ã€‚å‘¨å›²ã«ã¯å‡¶æš´ãªé­”ç‰©ã‚‚å¤šãã€èª¿æŸ»å›£ã®è­·è¡›ã¯ãƒ›ãƒ©ã‚¤ã‚ºãƒ³é§å±¯ã®éŠ…åˆƒå›£ãŒä»»ã•ã‚Œã¦ã„ã‚‹ã®ã ãŒã€ç¾åœ°ã«æ´¾é£ã•ã‚ŒãŸã®ã¯ã€ãƒãƒ«ãƒ‰ã‚¦ã‚£ãƒ³é€£éšŠé•·ãŒé¸ã‚“ã ã”ãå°‘æ•°ã®å…µã ã‘ã‚‰ã—ã„ã€‚é€£éšŠé•·ã¯ååˆ†ã ã¨è¨€ã„å¼µã‚‹ã‚‚ã®ã®ã€ãƒ•ãƒ•ãƒ«ãƒ‘ã«ã¯ã©ã†ã—ã¦ã‚‚å¿ƒé…ãŒæ‹­ãˆãªã„ã€‚ã›ã‚ã¦è‡ªåˆ†ã®ä»£ã‚ã‚Šã«åŠ›ã«ãªã£ã¦ã»ã—ã„â”€â”€ãã†é¡˜ã£ãŸå½¼ã¯ã€ã‚ãªãŸã«è¶³è·¡ã®è°·ã¾ã§å‘ã‹ã„ã€ç¾å ´ã‚’é ã‹ã‚‹ãƒˆãƒˆãƒ«ãƒŠã«å”åŠ›ã‚’ç”³ã—å‡ºã¦ã»ã—ã„ã¨ã€å¿…æ­»ã®æ§˜å­ã§é ¼ã¿è¾¼ã‚€ã€‚</p>
      <p>ã‚ãªãŸã¯ãƒ›ãƒ©ã‚¤ã‚ºãƒ³ã‚’å¾Œã«ã—ã€ç ‚å¡µèˆã†è¡—é“ã‚’è¥¿ã¸ã¨é€²ã‚“ã§ã„ãã€‚ã‚„ãŒã¦ã€å´©ã‚Œè½ã¡ãŸçŸ³åƒã‚„é¢¨é›¨ã«æ™’ã•ã‚ŒãŸéºæ§‹ãŒç‚¹åœ¨ã™ã‚‹è¶³è·¡ã®è°·ãŒå§¿ã‚’ç¾ã—ãŸã€‚ãã®éºè·¡ã®ä¸­ã§ã€éŠ…åˆƒå›£ã®å°éšŠãŒè­¦å‚™ã«ã‚ãŸã£ã¦ãŠã‚Šã€ãã®ã²ã¨ã‚Šã§ã‚ã‚‹ãƒ©ãƒ©ãƒ•ã‚§ãƒ«æ—ã®å…µå£«ãƒˆãƒˆãƒ«ãƒŠãŒã€ã“ã¡ã‚‰ã‚’é‹­ã„è¦–ç·šã§å€¤è¸ã¿ã™ã‚‹ã€‚æ´è»ã ã¨åä¹—ã‚‹ã‚ãªãŸã«å¯¾ã—ã€å½¼ã¯ãƒãƒ«ãƒ‰ã‚¦ã‚£ãƒ³é€£éšŠé•·ã‹ã‚‰ãã®ã‚ˆã†ãªè©±ã¯ä¸€åˆ‡èã„ã¦ã„ãªã„ã¨é¼»ã§ç¬‘ã„ã€ã€Œä¿¡é ¼ã§ãã‚‹å¥´ã ã‘ã§ååˆ†ã ã€ã¨è¨€ã„æ”¾ã¤ã€‚ä½œæˆ¦ã¯è‡ªåˆ†ãŸã¡ã ã‘ã§å•é¡Œãªãé‚è¡Œã§ãã‚‹ã¨å¼·èª¿ã—ã€ãƒ•ãƒ•ãƒ«ãƒ‘ãŒä½™è¨ˆãªå£å‡ºã—ã‚’ã—ã¦ã„ã‚‹ã ã‘ã ã¨åˆ‡ã‚Šæ¨ã¦ã‚‹ã¨ã€ã‚ã®å°åƒ§ã¯å°»ã«ã‚µãƒœãƒ†ãƒ³ãƒ€ãƒ¼ã§ã‚‚åˆºã•ã£ãŸã‚ˆã†ãªå …ç‰©ã ã€ã¨æ¶æ„ã—ã¦ãƒ›ãƒ©ã‚¤ã‚ºãƒ³ã«ç½®ã„ã¦ã„ã‹ã‚ŒãŸã“ã¨ã¾ã§å˜²ç¬‘ã†ã€‚ç”³ã—å‡ºãŸåŠ©åŠ›ã¯ã‚ã£ã•ã‚Šã¨é€€ã‘ã‚‰ã‚Œã€èª¿æŸ»å›£ã®å®‰å…¨ã‚’æ¡ˆã˜ã‚‹ãƒ•ãƒ•ãƒ«ãƒ‘ã®ä¸å®‰ã¨ã€ç¾å ´ã®å…µãŸã¡ã¨ã®æ¸©åº¦å·®ã ã‘ãŒã€ä¹¾ã„ãŸè°·é–“ã®é¢¨ã®ã‚ˆã†ã«èƒ¸ã®å†…ã«æ®‹ã•ã‚ŒãŸã€‚</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>ã‚¯ã‚¨ã‚¹ãƒˆç™ºè¡Œ</b> ãƒ•ãƒ•ãƒ«ãƒ‘ã€€<small class="muted">è¥¿ã‚¶ãƒŠãƒ©ãƒ¼ãƒ³ (X:22.6, Y:17.1)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="passing-the-blade.html">å—ã‘ç¶™ãŒã‚Œã‚‹è­·èº«åˆ€</a></div>
      <div class="row">ã™ã¹ã¦ï¼ˆãƒªãƒŸãƒ†ãƒƒãƒ‰ã‚¸ãƒ§ãƒ–ã‚’é™¤ãï¼‰Lv 10ï½</div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="storms-on-the-horizon.html">é…’ã®ã‚µã‚«ãƒŠæ±‚ã‚€</a></div>
    </div>`
  },
  ZH:{
    langLabel:'ZH',
    pageTitle:'è¸å°‹è¶³è·¡ä¹‹è°·',
    tabs:{ story:'æ•…äº‹æ¦‚è¦', acq:'å–å¾—æ–¹å¼', unlockq:'è§£é–ä»»å‹™', followq:'å¾ŒçºŒä»»å‹™', comments:'ç•™è¨€' },
    readMore:'å±•é–‹å…¨æ–‡', readLess:'æ”¶åˆå…§å®¹',
    story:`<div class="clamp" data-collapsed="true">
      <p>åœ¨å¾€ä¾†ä¸çµ•çš„è²¿æ˜“èšè½ Horizon è£¡ï¼ŒBrass Blades of the Rose çš„æˆå“¡ Fufulupa ä¸€çœ‹è¦‹ä½ ä¾¿åŒ†åŒ†è¿ä¸Šå‰ä¾†ï¼Œå°å°çš„è‡‰é¾å¯«æ»¿ä¸å®‰ã€‚ä»–èªªï¼Œä¾†è‡ª Ossuary çš„ Thaumaturges æ­£åœ¨è¥¿ Thanalan çš„éºè·¡å€åŸŸ The Footfalls æœå°‹å¤ä»£éºç‰©ï¼Œç”±æ–¼å‘¨é­éå¸ƒå…‡æƒ¡çš„é‡ç¸ï¼ŒHorizon çš„é§ç´®éƒ¨éšŠè¢«æŒ‡æ´¾è² è²¬è­·è¡›ã€‚ç„¶è€Œ Captain Baldewyn æ´¾å¾€ç¾åœ°çš„ Brass Blades å»åªæœ‰å¯¥å¯¥å¹¾äººï¼Œå³ä¾¿é€£éšŠé•·ä¸€å†ä¿è­‰äººæ‰‹è¶³å¤ ï¼ŒFufulupa å¿ƒè£¡ä»ç„¶ç„¡æ³•æ”¾å¿ƒã€‚ç‚ºäº†ç›¡åˆ°è‡ªå·±æ‰€èƒ½åšåˆ°çš„ä¸€é»é»è²¬ä»»ï¼Œä»–æ‡‡åˆ‡åœ°è«‹æ±‚ä½ ä»£æ›¿è‡ªå·±å‰å¾€ The Footfallsï¼Œå‘é‚£è£¡è² è²¬æŒ‡æ®çš„ Totoruna èªªæ˜ä¾†æ„ï¼Œä¸»å‹•æå‡ºå”åŠ©å®ˆå‚™ã€‚</p>
      <p>ä½ é›¢é–‹ Horizonï¼Œæ²¿è‘—é‹ªæ»¿ç ‚å¡µçš„é“è·¯ä¸€è·¯å‘è¥¿ï¼Œç›´åˆ°é¢¨è•æ–‘é§çš„çŸ³åƒèˆ‡æ®˜ç ´éºæ§‹æ˜ å…¥çœ¼ç°¾ï¼ŒThe Footfalls çš„è¼ªå»“æ‰åœ¨è¦–é‡ä¸­æ¸…æ™°èµ·ä¾†ã€‚éºè·¡å…§é§å®ˆè‘—ä¸€å°éšŠ Brass Bladesï¼Œå…¶ä¸­ä¸€åæ‹‰æ‹‰è²çˆ¾å£«å…µ Totoruna ä»¥å¸¶è‘—æˆ’å¿ƒçš„çœ¼ç¥æ‰“é‡è‘—ä½ é€™ä½è‡ªç¨±å‰ä¾†æ”¯æ´çš„å†’éšªè€…ã€‚è½èªªä½ æ˜¯è¢«æ´¾ä¾†å¹«å¿™ï¼Œä»–å—¤ä¹‹ä»¥é¼»ï¼Œèªªè‡ªå·±å¾æœªè½ Captain Baldewyn æèµ·æ­¤äº‹ï¼Œé‚„å¼·èª¿é€™æ¬¡è¡Œå‹•åªéœ€è¦ã€Œå€¼å¾—ä¿¡ä»»çš„äººã€ã€‚ä»–å …ç¨±æƒ…æ³ç›¡åœ¨æŒæ¡ä¹‹ä¸­ï¼Œæ ¹æœ¬è¼ªä¸åˆ° Fufulupa ä¾†æ’æ‰‹ï¼Œåˆä¸å±‘åœ°èªªé‚£å­©å­å°±åƒå±è‚¡è¢« sabotender åˆºåˆ°ä¸€æ¨£åƒµç¡¬æ­»æ¿ï¼Œé›£æ€ªæœƒè¢«ç•™åœ¨ Horizonã€‚ä½ çš„å¥½æ„å°±é€™æ¨£è¢«ä¸€å£å›çµ•ï¼Œåªå‰©ä¸‹å°èª¿æŸ¥éšŠå®‰å±çš„æ†‚æ…®æ‚„æ‚„æ²‰åœ¨å¿ƒåº•ï¼Œèˆ‡è¶³è·¡è°·å¯‚å¯¥ä¹¾ç‡¥çš„é¢¨ä¸€åŒåœ¨éºè·¡ä¹‹é–“è¿´ç›ªã€‚</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>ä»»å‹™ç™¼å¸ƒ</b> èŠ™èŠ™éœ²å¸•ã€€<small class="muted">è¥¿è–©ç´è˜­ (X:22.6, Y:17.1)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="passing-the-blade.html">å‚³æ‰¿ä¹‹åˆƒ</a></div>
      <div class="row">æ‰€æœ‰è·æ¥­ï¼ˆä¸å«é™å®šè·ï¼‰ ç­‰ç´š 10 ä»¥ä¸Š</div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="storms-on-the-horizon.html">é¢¨æš´å‰çš„é…’å®´</a></div>
    </div>`
  }
};

const langToggle  = document.getElementById('langToggle');
const pageTitle   = document.getElementById('pageTitle');
const tabBtns     = [...document.querySelectorAll('.tab-btn')];
const panels = {
  story:  document.getElementById('panel-story'),
  acq:    document.getElementById('panel-acq'),
  unlockq:document.getElementById('panel-unlockq'),
  followq:document.getElementById('panel-followq'),
  comments: document.getElementById('panel-comments')
};

function getLang(){ return localStorage.getItem(LANG_KEY) || 'EN'; }
function applyLang(lang){
  const t = i18n[lang] || i18n.EN;
  pageTitle.textContent = t.pageTitle;
  langToggle.textContent = `ğŸŒ ${t.langLabel}`;
  tabBtns.forEach(btn => { btn.textContent = t.tabs[btn.dataset.tab]; });
  const activeBtn = tabBtns.find(b => b.getAttribute('aria-selected')==='true') || tabBtns[0];
  renderPanel(activeBtn.dataset.tab, lang);
}

function wireClamp(panelEl, t){
  const clamp = panelEl.querySelector('.clamp');
  const btn = panelEl.querySelector('[data-role="expand"]');
  if(!clamp || !btn) return;
  function setLabel(){
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    btn.textContent = collapsed ? t.readMore : t.readLess;
  }
  setLabel();
  btn.addEventListener('click', ()=>{
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    clamp.setAttribute('data-collapsed', collapsed ? 'false' : 'true');
    setLabel();
  });
}

function renderPanel(key, lang){
  const t = i18n[lang] || i18n.EN;
  Object.keys(panels).forEach(k => panels[k].classList.remove('active'));
  panels[key].classList.add('active');
  if (key !== 'comments') panels[key].innerHTML = t[key];
  if (key === 'story') wireClamp(panels[key], t);
  if (key === 'comments') loadGiscusForCurrentLang();
}

tabBtns.forEach(btn=>{
  btn.addEventListener('click', ()=>{
    tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
    btn.setAttribute('aria-selected','true');
    renderPanel(btn.dataset.tab, getLang());
  });
});

langToggle.addEventListener('click', ()=>{
  const cur = getLang();
  const next = cur==='EN' ? 'JP' : (cur==='JP' ? 'ZH' : 'EN');
  localStorage.setItem(LANG_KEY, next);
  applyLang(next);
});

applyLang(getLang());

/* === Giscusï¼šComments åˆ†é  === */
const GISCUS_CFG = {
  repo: 'BELAUG-FFXIV/FFXIV_Library',
  repoId: 'R_kgDOPyh4Kw',
  category: 'General',
  categoryId: 'DIC_kwDOPyh4K84CwPjL',
  theme: 'preferred_color_scheme'
};
function uiLang(code){ return code==='JP' ? 'ja' : (code==='ZH' ? 'zh-TW' : 'en'); }
function loadGiscusForCurrentLang(){
  const mount = document.getElementById('giscus_container');
  if (!mount) return;
  mount.innerHTML = '';
  const langCode = getLang();
  const s = document.createElement('script');
  s.src = 'https://giscus.app/client.js';
  s.setAttribute('data-repo', GISCUS_CFG.repo);
  s.setAttribute('data-repo-id', GISCUS_CFG.repoId);
  s.setAttribute('data-category', GISCUS_CFG.category);
  s.setAttribute('data-category-id', GISCUS_CFG.categoryId);
  s.setAttribute('data-mapping', 'specific');
  s.setAttribute('data-term', location.pathname + 'ï½œ' + langCode);
  s.setAttribute('data-reactions-enabled', '1');
  s.setAttribute('data-emit-metadata', '0');
  s.setAttribute('data-input-position', 'bottom');
  s.setAttribute('data-lang', uiLang(langCode));
  s.setAttribute('data-theme', GISCUS_CFG.theme);
  s.setAttribute('crossorigin', 'anonymous');
  s.async = true;
  mount.appendChild(s);
}
</script>
</body>
</html>
