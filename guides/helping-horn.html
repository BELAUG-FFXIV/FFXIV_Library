<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Helping Horn | BELAUG Â· FFXIV Library</title>
  <meta name="description" content="MSQ â€“ Helping Horn (ARR Patch 2.0)">
  <link rel="icon" href="../img/favicon.ico" />
  <style>
    :root { --bg:#fff8e6; --card:#fff; --fg:#222; --muted:#666; --border:#e5e1d8; --accent:#e11d48; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,"Noto Sans TC","Noto Sans JP",Arial,sans-serif;background:var(--bg);color:var(--fg)}
    .container{max-width:1080px;margin:0 auto;padding:0 16px}
    .site-header{border-bottom:1px solid var(--border);background:#fff9edb3;backdrop-filter:saturate(120%) blur(6px);position:sticky;top:0;z-index:10}
    .nav{display:flex;align-items:center;justify-content:space-between;height:60px}
    .left{display:flex;align-items:center;gap:12px}
    .home{border:1px solid var(--border);background:#fff;padding:4px 8px;border-radius:8px;text-decoration:none;color:var(--fg);font-weight:800}
    .home:hover{background:#fffef8}
    .right{display:flex;align-items:center;gap:8px}
    .icon-btn{background:none;border:none;cursor:pointer;font-size:14px;padding:6px 10px;border-radius:8px}
    .icon-btn:hover{background:#fff;border:1px solid var(--border)}
    .main{padding:20px 0 40px}
    .grid{display:grid;grid-template-columns:1.1fr 1fr;gap:20px;align-items:start}
    @media (max-width:900px){
      .grid{grid-template-columns:1fr}
      .video-wrap{position:relative;padding-top:56.25%}
      .video-wrap iframe{position:absolute;inset:0;width:100%;height:100%}
    }
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 4px 14px rgba(0,0,0,.05)}
    .card .hd{padding:14px 16px;border-bottom:1px solid var(--border);font-weight:700}
    .card .bd{padding:16px}
    .video-card .bd{padding:0}
    .video-card iframe{width:100%;height:420px;border:0;display:block;border-radius:16px}
    .tabs{display:flex;gap:8px;padding:12px 12px 0;flex-wrap:wrap}
    .tab-btn{background:#fff;border:1px solid var(--border);color:var(--fg);border-radius:999px;padding:8px 14px;cursor:pointer;font-weight:600}
    .tab-btn[aria-selected="true"]{border-color:var(--accent);color:#fff;background:var(--accent)}
    .tab-panel{display:none}
    .tab-panel.active{display:block}
    .stack{display:flex;flex-direction:column;gap:10px}
    .stack .row{padding:12px 14px;border:1px dashed var(--border);border-radius:12px;background:#fffdf6}
    .row b{display:inline-block;min-width:130px}
    .muted{color:var(--muted)}
    .link{color:#0b60d8;text-decoration:none}
    .link:hover{text-decoration:underline}
    /* å±•é–‹/æ”¶åˆ */
    .clamp{position:relative; max-height:360px; overflow:hidden}
    .clamp[data-collapsed="false"]{max-height:none}
    .clamp[data-collapsed="true"]::after{
      content:""; position:absolute; left:0; right:0; bottom:0; height:72px;
      background:linear-gradient(to bottom, rgba(255,255,255,0), var(--card)); pointer-events:none;
    }
    .expand-wrap{ margin-top:12px; }
    .expand-btn{
      display:inline-block; padding:8px 14px; border-radius:10px;
      background:var(--card); border:1px solid var(--border); cursor:pointer; font-weight:600;
    }
    .expand-btn:hover{ background:#fffef8; }
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="container nav">
      <div class="left">
        <a class="home" href="../index.html">ğŸ  Home</a>
      </div>
      <div class="right">
        <button id="langToggle" class="icon-btn" aria-label="åˆ‡æ›èªè¨€">ğŸŒ EN</button>
      </div>
    </nav>
  </header>

  <main class="container main">
    <div class="grid">
      <!-- å·¦ï¼šå½±ç‰‡ -->
      <section class="card video-card">
        <div class="bd">
          <div class="video-wrap">
            <iframe id="ytFrame" src="https://www.youtube.com/embed/omjRZnM6WMM"
              title="Helping Horn" allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <!-- å³ï¼šæ¨™é¡Œ + Tabs -->
      <section class="card">
        <div class="hd" id="pageTitle">Helping Horn</div>
        <div class="tabs" role="tablist">
          <button class="tab-btn" role="tab" aria-selected="true"  data-tab="story">Story</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="acq">Acquisition</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="unlockq">Unlock Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="followq">Follow-Up Quest</button>
          <button class="tab-btn" role="tab" aria-selected="false" data-tab="comments">Comments</button>
        </div>
        <div class="bd">
          <div id="panel-story"   class="tab-panel active"></div>
          <div id="panel-acq"     class="tab-panel"></div>
          <div id="panel-unlockq" class="tab-panel"></div>
          <div id="panel-followq" class="tab-panel"></div>
          <div id="panel-comments" class="tab-panel">
            <div id="giscus_container" style="min-height:320px;"></div>
          </div>
        </div>
      </section>
    </div>
  </main>

<script>
const LANG_KEY = 'ffxiv-guide-lang';
const i18n = {
  EN:{
    langLabel:'EN',
    pageTitle:'Helping Horn',
    tabs:{ story:'Story', acq:'Acquisition', unlockq:'Unlock Quest', followq:'Follow-Up Quest', comments:'Comments' },
    readMore:'Show more', readLess:'Show less',
    story:`<div class="clamp" data-collapsed="true">
      <p>Still reeling from the indifference shown by Quarrymillâ€™s villagers, Meffrid struggles to care for his wounded comrades. Gallien remains unable to stand, and the villagers continue to turn their backs on the Ala Mhigans. With few options left, Meffrid turns once more to you.</p>
      <p>He requests four long antelope horns, explaining they are traditionally used in his homeland as a remedy for poisons. Upon your return, he thanks you profusely and considers how best to prepare them. He recalls tales of a kind tavernkeeperâ€”Buscarronâ€”who never refuses to help those in need, regardless of their origins.</p>
      <p>Buscarron greets you warmly and, upon hearing your request, offers not only to help but to give you ready-made powder from his own stock. He explains that an Ala Mhigan once used this same remedy to save his life, and now itâ€™s his turn to repay the kindness.</p>
      <p>You bring the ointment to Faramund, who is overcome with gratitude. Gallien will be treated at once, and for the first time in a long while, Meffrid might finally find some rest. Your aid has brought relief and hope to those long denied both.</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>Quest Giver</b> Meffrid <small class="muted">(South Shroud, X: 25.6 Y: 20.6)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="killing-him-softly.html">Killing Him Softly</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="he-aint-heavy.html">He Ainâ€™t Heavy</a></div>
    </div>`
  },
  JP:{
    langLabel:'JP',
    pageTitle:'è§’è–¬ãŒç¹‹ãç¸',
    tabs:{ story:'ã‚¹ãƒˆãƒ¼ãƒªãƒ¼', acq:'å…¥æ‰‹æ–¹æ³•', unlockq:'é–‹æ”¾ã‚¯ã‚¨ã‚¹ãƒˆ', followq:'å¾Œç¶šã‚¯ã‚¨ã‚¹ãƒˆ', comments:'ã‚³ãƒ¡ãƒ³ãƒˆ' },
    readMore:'å…¨æ–‡ã‚’è¡¨ç¤º', readLess:'æŠ˜ã‚ŠãŸãŸã‚€',
    story:`<div class="clamp" data-collapsed="true">
      <p>ã‚¯ã‚©ãƒ¼ãƒªãƒ¼ãƒŸãƒ«ã®å†·ãŸã„æ…‹åº¦ã«å¤±æœ›ã—ãªãŒã‚‰ã‚‚ã€ãƒ¡ãƒƒãƒ•ãƒªãƒƒãƒ‰ã¯å‚·ã¤ã„ãŸä»²é–“ãŸã¡ã®å‘½ã‚’ã¤ãªã”ã†ã¨å¿…æ­»ã ã£ãŸã€‚ã‚¬ãƒªã‚¢ãƒ³ã¯ã„ã¾ã ç«‹ã¡ä¸ŠãŒã‚‹ã“ã¨ã™ã‚‰ã§ããšã€æ‘äººãŸã¡ã¯ã‚¢ãƒ©ãƒŸã‚´ã®æ°‘ã‚’ç„¡è¦–ã—ç¶šã‘ã¦ã„ã‚‹ã€‚é ¼ã‚Œã‚‹è€…ãŒã„ãªã„ä¸­ã€ãƒ¡ãƒƒãƒ•ãƒªãƒƒãƒ‰ã¯å†ã³ã‚ãªãŸã«åŠ©ã‘ã‚’æ±‚ã‚ã‚‹ã€‚</p>
      <p>å½¼ã¯ã€æ•…éƒ·ã§æ¯’ã®è§£æ¯’è–¬ã¨ã—ã¦ç”¨ã„ã‚‰ã‚Œã¦ããŸã€Œè§’è–¬ã€ã‚’ä½œã‚‹ãŸã‚ã«ã€é•·è§’ã®ã‚«ãƒ¢ã‚·ã‚«ã®è§’ã‚’4æœ¬é›†ã‚ã¦ã»ã—ã„ã¨ä¾é ¼ã™ã‚‹ã€‚è§’ã‚’å±Šã‘ã‚‹ã¨ã€æ·±ãæ„Ÿè¬ã—ãŸå½¼ã¯ã€ãã‚Œã‚’ã©ã†èª¿åˆã™ã¹ãã‹ã‚’è€ƒãˆã‚‹ã€‚ãã‚“ãªä¸­ã€ä»²é–“ã‹ã‚‰èã„ãŸã¨ã„ã†ã‚ã‚‹ç”·â”€â”€ãƒ–ãƒƒã‚¹ã‚«ãƒ­ãƒ³ã®ã“ã¨ã‚’æ€ã„å‡ºã™ã€‚å‡ºè‡ªã«é–¢ã‚ã‚‰ãšèª°ã«ã§ã‚‚æ‰‹ã‚’å·®ã—ä¼¸ã¹ã‚‹ã€å¯›å¤§ãªé…’å ´ã®ä¸»ã ã€‚</p>
      <p>ã‚ãªãŸãŒãƒ–ãƒƒã‚¹ã‚«ãƒ­ãƒ³ã®ã‚‚ã¨ã‚’è¨ªã‚Œã‚‹ã¨ã€å½¼ã¯æ‡ã‹ã—ãã†ã«ç¬‘ã¿ã‚’æµ®ã‹ã¹ã€ã‹ã¤ã¦ã‚¢ãƒ©ãƒŸã‚´ã®å‹ãŒè‡ªåˆ†ã®å‚·ã‚’ãã®è–¬ã§æ•‘ã£ã¦ãã‚ŒãŸã“ã¨ã‚’èªã‚‹ã€‚ãã—ã¦ä»Šåº¦ã¯è‡ªåˆ†ã®ç•ªã ã¨è¨€ã„ã€å€‰åº«ã«ä¿ç®¡ã—ã¦ã„ãŸèª¿åˆæ¸ˆã¿ã®è–¬ã‚’è­²ã£ã¦ãã‚Œã‚‹ã®ã ã£ãŸã€‚</p>
      <p>è–¬ã‚’ãƒ•ã‚¡ãƒ©ãƒãƒ³ãƒ‰ã«å±Šã‘ã‚‹ã¨ã€å½¼ã¯å–œã³ã¨æ„Ÿè¬ã®è¨€è‘‰ã§è¿ãˆã¦ãã‚Œã‚‹ã€‚ã“ã‚Œã§ã‚¬ãƒªã‚¢ãƒ³ã®æ²»ç™‚ãŒå§‹ã‚ã‚‰ã‚Œã‚‹â”€â”€ãã—ã¦ã€ã™ã¹ã¦ã®å‘½ã‚’å®ˆã‚ã†ã¨å¿ƒã‚’ã™ã‚Šæ¸›ã‚‰ã—ã¦ã„ãŸãƒ¡ãƒƒãƒ•ãƒªãƒƒãƒ‰ã‚‚ã€ã‚ˆã†ã‚„ãå®‰ã‚‰ãã‚’å¾—ã‚‰ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã€‚ã‚ãªãŸã®æ‰‹åŠ©ã‘ãŒã€å¸Œæœ›ã‚’å¤±ã£ã¦ã„ãŸå½¼ã‚‰ã«å†ã³å…‰ã‚’ã‚‚ãŸã‚‰ã—ãŸã®ã ã£ãŸã€‚</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>ã‚¯ã‚¨ã‚¹ãƒˆç™ºè¡Œ</b> ãƒ¡ãƒ•ãƒªãƒƒãƒ‰ã€€é»’è¡£æ£®ï¼šå—éƒ¨æ£®æ— <small class="muted">(X: 25.6 Y: 20.6)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="killing-him-softly.html">ç„¡æ…ˆæ‚²ãªç²¾éœŠ</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="he-aint-heavy.html">ç•°é‚¦ã®çµ†</a></div>
    </div>`
  },
  ZH:{
    langLabel:'ZH',
    pageTitle:'å› è—¥çµç·£',
    tabs:{ story:'æ•…äº‹æ¦‚è¦', acq:'å–å¾—æ–¹å¼', unlockq:'è§£é–ä»»å‹™', followq:'å¾ŒçºŒä»»å‹™', comments:'ç•™è¨€' },
    readMore:'å±•é–‹å…¨æ–‡', readLess:'æ”¶åˆå…§å®¹',
    story:`<div class="clamp" data-collapsed="true">
      <p>é¢å° Quarrymill æ‘æ°‘çš„å†·æ¼ ï¼ŒMeffrid å¿ƒä¸­æ»¿æ˜¯è‹¦æ¾€ã€‚ä»–å¸¶é ˜åŒä¼´é é“è€Œä¾†å°‹æ±‚åº‡è­·ï¼Œå¦‚ä»Šå»åªèƒ½çœ¼çœ‹ Gallien å› å‚·è‡¥å€’ï¼Œç„¡åŠ›å†å‰è¡Œã€‚åœ¨æ²’æœ‰å…¶ä»–é¸æ“‡çš„æƒ…æ³ä¸‹ï¼Œä»–å†æ¬¡è«‹æ±‚ä½ çš„å¹«åŠ©ã€‚</p>
      <p>ä»–æåˆ°ï¼Œé•·è§’ç¾šç¾Šçš„è§’åœ¨ Ala Mhigan å‚³çµ±ä¸­å¯ç”¨ä¾†è£½ä½œè§£æ¯’è—¥åŠ‘ï¼Œåªè¦èƒ½æ”¶é›†å››æ”¯ï¼Œä»–å°‡æ„Ÿæ¿€ä¸ç›¡ã€‚ç•¶ä½ å®Œæˆä»»å‹™æ­¸ä¾†ï¼ŒMeffrid å……æ»¿æ„Ÿæ¿€åœ°æ”¶ä¸‹è§’ï¼Œä½†éš¨å³ç‚ºå¦‚ä½•è£½æˆè—¥ç²‰è€Œç…©æƒ±ã€‚ä»–å¿½ç„¶æƒ³èµ·æ›¾è½éä¸€ä½å‚³èä¸­çš„é…’é¤¨è€é—†â”€â”€Buscarronâ”€â”€æ“šèªªä»–å¾ä¸æ‹’çµ•ä»»ä½•æ±‚åŠ©è€…ï¼Œä¸è«–å‡ºèº«ã€‚</p>
      <p>ä½ å¸¶è‘—è§’å‰å¾€ Buscarronâ€™s Druthersï¼ŒBuscarron ç†±æƒ…æ¥å¾…ä½ ï¼Œè½èä¾†æ„å¾Œæ›´ä¸»å‹•å–å‡ºå€‰åº«è£¡ç¾æˆçš„è—¥ç²‰ã€‚ä»–æèµ·éå»æ›¾æœ‰ä¸€ä½ Ala Mhigan æˆ°å£«ç‚ºä»–æ²»ç™‚æ½°çˆ›çš„å‚·å£ï¼Œæ•‘äº†ä»–ä¸€å‘½ã€‚å¦‚ä»Šï¼Œä»–ä¹Ÿæƒ³å›å ±é€™ä»½æ©æƒ…ã€‚</p>
      <p>ä½ å°‡è—¥è†äº¤çµ¦ Faramundï¼Œä»–æ¿€å‹•åœ°é“è¬ï¼Œç«‹åˆ»è‘—æ‰‹ç‚º Gallien æ²»ç™‚ã€‚å¤šå¹´ä¾†å£“åœ¨ Meffrid è‚©ä¸Šçš„é‡æ“”çµ‚æ–¼ç¨ç¨é¬†å‹•ã€‚ä½ çš„å–„æ„èˆ‡è¡Œå‹•ï¼Œè®“ä¸€ç¾¤è¢«éºå¿˜çš„æˆ°å£«ï¼Œå†æ¬¡æ„Ÿå—åˆ°å¸Œæœ›çš„é‡é‡ã€‚</p>
    </div>
    <div class="expand-wrap"><button class="expand-btn" data-role="expand"></button></div>`,
    acq:`<div class="stack">
      <div class="row"><b>ä»»å‹™ç™¼å¸ƒ</b> æ¢…å¼—é‡Œå¾·ã€€é»‘è¡£æ£®æ—å—éƒ¨ <small class="muted">(X: 25.6 Y: 20.6)</small></div>
    </div>`,
    unlockq:`<div class="stack">
      <div class="row"><a class="link" href="killing-him-softly.html">ç„¡æƒ…çš„æ£®éˆ</a></div>
    </div>`,
    followq:`<div class="stack">
      <div class="row"><a class="link" href="he-aint-heavy.html">ç•°é‚¦ä¹‹å‹</a></div>
    </div>`
  }
};

const langToggle  = document.getElementById('langToggle');
const pageTitle   = document.getElementById('pageTitle');
const tabBtns     = [...document.querySelectorAll('.tab-btn')];
const panels = {
  story:  document.getElementById('panel-story'),
  acq:    document.getElementById('panel-acq'),
  unlockq:document.getElementById('panel-unlockq'),
  followq:document.getElementById('panel-followq'),
  comments: document.getElementById('panel-comments')
};

function getLang(){ return localStorage.getItem(LANG_KEY) || 'EN'; }
function applyLang(lang){
  const t = i18n[lang] || i18n.EN;
  pageTitle.textContent = t.pageTitle;
  langToggle.textContent = `ğŸŒ ${t.langLabel}`;
  tabBtns.forEach(btn => { btn.textContent = t.tabs[btn.dataset.tab]; });
  const activeBtn = tabBtns.find(b => b.getAttribute('aria-selected')==='true') || tabBtns[0];
  renderPanel(activeBtn.dataset.tab, lang);
}

function wireClamp(panelEl, t){
  const clamp = panelEl.querySelector('.clamp');
  const btn = panelEl.querySelector('[data-role="expand"]');
  if(!clamp || !btn) return;
  function setLabel(){
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    btn.textContent = collapsed ? t.readMore : t.readLess;
  }
  setLabel();
  btn.addEventListener('click', ()=>{
    const collapsed = clamp.getAttribute('data-collapsed') !== 'false';
    clamp.setAttribute('data-collapsed', collapsed ? 'false' : 'true');
    setLabel();
  });
}

function renderPanel(key, lang){
  const t = i18n[lang] || i18n.EN;
  Object.keys(panels).forEach(k => panels[k].classList.remove('active'));
  panels[key].classList.add('active');
  if (key !== 'comments') panels[key].innerHTML = t[key];
  if (key === 'story') wireClamp(panels[key], t);
  if (key === 'comments') loadGiscusForCurrentLang();
}

tabBtns.forEach(btn=>{
  btn.addEventListener('click', ()=>{
    tabBtns.forEach(b=>b.setAttribute('aria-selected','false'));
    btn.setAttribute('aria-selected','true');
    renderPanel(btn.dataset.tab, getLang());
  });
});

langToggle.addEventListener('click', ()=>{
  const cur = getLang();
  const next = cur==='EN' ? 'JP' : (cur==='JP' ? 'ZH' : 'EN');
  localStorage.setItem(LANG_KEY, next);
  applyLang(next);
});

applyLang(getLang());

/* === Giscusï¼šComments åˆ†é  === */
const GISCUS_CFG = {
  repo: 'BELAUG-FFXIV/FFXIV_Library',
  repoId: 'R_kgDOPyh4Kw',
  category: 'General',
  categoryId: 'DIC_kwDOPyh4K84CwPjL',
  theme: 'preferred_color_scheme'
};
function uiLang(code){ return code==='JP' ? 'ja' : (code==='ZH' ? 'zh-TW' : 'en'); }
function loadGiscusForCurrentLang(){
  const mount = document.getElementById('giscus_container');
  if (!mount) return;
  mount.innerHTML = '';
  const langCode = getLang();
  const s = document.createElement('script');
  s.src = 'https://giscus.app/client.js';
  s.setAttribute('data-repo', GISCUS_CFG.repo);
  s.setAttribute('data-repo-id', GISCUS_CFG.repoId);
  s.setAttribute('data-category', GISCUS_CFG.category);
  s.setAttribute('data-category-id', GISCUS_CFG.categoryId);
  s.setAttribute('data-mapping', 'specific');
  s.setAttribute('data-term', location.pathname + 'ï½œ' + langCode);
  s.setAttribute('data-reactions-enabled', '1');
  s.setAttribute('data-emit-metadata', '0');
  s.setAttribute('data-input-position', 'bottom');
  s.setAttribute('data-lang', uiLang(langCode));
  s.setAttribute('data-theme', GISCUS_CFG.theme);
  s.setAttribute('crossorigin', 'anonymous');
  s.async = true;
  mount.appendChild(s);
}
</script>
</body>
</html>
